
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module PFPL.Theorems_Eval</title>
<meta name="description" content="Documentation of Coq module PFPL.Theorems_Eval" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module PFPL.Theorems_Eval</h1>
<div class="coq">
<span class="kwd">Set</span> <span class="id">Warnings</span> "-<span class="id">notation</span>-<span class="id">overridden</span>,-<span class="id">parsing</span>,-<span class="id">deprecated</span>-<span class="id">hint</span>-<span class="id">without</span>-<span class="id">locality</span>".<br/>
<span class="id">From</span> <span class="id">Coq</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html">Bool.Bool</a></span>.<br/>
<span class="id">From</span> <span class="id">Coq</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html">Strings.String</a></span>.<br/>
<span class="id">From</span> <span class="id">Coq</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.Arith.html">Arith.Arith</a></span>.<br/>
<span class="id">From</span> <span class="id">Coq</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.EqNat.html">Arith.EqNat</a></span>. <span class="kwd">Import</span> <span class="id">Nat</span>.<br/>
<span class="id">From</span> <span class="id">Coq</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.PeanoNat.html">Arith.PeanoNat</a></span>.<br/>
<span class="id">From</span> <span class="id">Coq</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html">Strings.String</a></span>.<br/>
<span class="id">From</span> <span class="id">Coq</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Eqdep_dec.html">Logic.Eqdep_dec</a></span>.<br/>
<span class="id">From</span> <span class="id">Coq</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.micromega.Lia.html">Lia</a></span>.<br/>
<span class="id">From</span> <span class="id">PFPL</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="PFPL.PartialMap_Set.html">PartialMap_Set</a></span>.<br/>
<span class="id">From</span> <span class="id">PFPL</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="PFPL.Definitions.html">Definitions</a></span>.<br/>
<span class="id">From</span> <span class="id">PFPL</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="PFPL.Lemmas_Vars.html">Lemmas_Vars</a></span>.<br/>
<span class="id">From</span> <span class="id">PFPL</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="PFPL.Lemmas_Rename.html">Lemmas_Rename</a></span>.<br/>
<span class="id">From</span> <span class="id">PFPL</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="PFPL.Lemmas_Same_Structure.html">Lemmas_Same_Structure</a></span>.<br/>
<span class="id">From</span> <span class="id">PFPL</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="PFPL.Induction_Expr.html">Induction_Expr</a></span>.<br/>
<span class="id">From</span> <span class="id">PFPL</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="PFPL.Lemmas_AlphaEquiv.html">Lemmas_AlphaEquiv</a></span>.<br/>
<span class="id">From</span> <span class="id">PFPL</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="PFPL.Lemmas_Rename_AlphaEquiv.html">Lemmas_Rename_AlphaEquiv</a></span>.<br/>
<span class="id">From</span> <span class="id">PFPL</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="PFPL.Lemmas_FreshRename.html">Lemmas_FreshRename</a></span>.<br/>
<span class="id">From</span> <span class="id">PFPL</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="PFPL.Lemmas_FreshRename_AlphaEquiv.html">Lemmas_FreshRename_AlphaEquiv</a></span>.<br/>
<span class="id">From</span> <span class="id">PFPL</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="PFPL.Lemmas_Rename_FreshRename.html">Lemmas_Rename_FreshRename</a></span>.<br/>
<span class="id">From</span> <span class="id">PFPL</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="PFPL.Lemmas_Subst.html">Lemmas_Subst</a></span>.<br/>
<span class="id">From</span> <span class="id">PFPL</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="PFPL.Lemmas_Rename_Subst.html">Lemmas_Rename_Subst</a></span>.<br/>
<span class="id">From</span> <span class="id">PFPL</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="PFPL.Theorems_AlphaEquiv.html">Theorems_AlphaEquiv</a></span>.<br/>
<br/>
<div class="doc">In the book </div>
<span class="kwd">Lemma</span> <span class="id"><a name="finality_of_values">finality_of_values</a></span> : <span class="kwd">forall</span> <span class="id">e</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="PFPL.Definitions.html#Val">Val</a></span> <span class="id">e</span> /\ (<span class="id">exists</span> <span class="id">e</span>', <span class="kwd">Eval</span> <span class="id">e</span> <span class="id">e</span>') -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof117')">Proof.</div>
<div class="proofscript" id="proof117">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">H</span>. <span class="tactic">destruct</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>; <span class="tactic">inversion</span> <span class="id">H0</span>.<br/>
Qed.</div>
<br/>
<div class="doc">In the book </div>
<span class="kwd">Lemma</span> <span class="id"><a name="determinacy">determinacy</a></span> : <span class="kwd">forall</span> <span class="id">e</span> <span class="id">e</span>' <span class="id">e</span>'',<br/>
&nbsp;&nbsp;<span class="kwd">Eval</span> <span class="id">e</span> <span class="id">e</span>' -&gt; <span class="kwd">Eval</span> <span class="id">e</span> <span class="id">e</span>'' -&gt; <span class="id">e</span>' = <span class="id">e</span>''.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof118')">Proof.</div>
<div class="proofscript" id="proof118">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">e</span> <span class="id">e</span>' <span class="id">e</span>'' <span class="id">H1</span>. <span class="tactic">generalize</span> <span class="tactic">dependent</span> <span class="id">e</span>''.<br/>
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">H1</span>; <span class="tactic">intros</span> <span class="id">e</span>'' <span class="id">H2</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">inversion</span> <span class="id">H2</span>; <span class="tactic">subst</span>. <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">inversion</span> <span class="id">H2</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">IHEval</span> <span class="kwd">in</span> <span class="id">H4</span>. <span class="tactic">subst</span>. <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H3</span>; <span class="tactic">subst</span>; <span class="tactic">inversion</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">inversion</span> <span class="id">H2</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>; <span class="tactic">inversion</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">IHEval</span> <span class="kwd">in</span> <span class="id">H6</span>. <span class="tactic">subst</span>. <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">inversion</span> <span class="id">H2</span>; <span class="tactic">subst</span>. <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">inversion</span> <span class="id">H2</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">IHEval</span> <span class="kwd">in</span> <span class="id">H4</span>. <span class="tactic">subst</span>. <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H3</span>; <span class="tactic">subst</span>; <span class="tactic">inversion</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">inversion</span> <span class="id">H2</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>; <span class="tactic">inversion</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">IHEval</span> <span class="kwd">in</span> <span class="id">H6</span>. <span class="tactic">subst</span>. <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">inversion</span> <span class="id">H2</span>; <span class="tactic">subst</span>. <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">inversion</span> <span class="id">H2</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">IHEval</span> <span class="kwd">in</span> <span class="id">H4</span>. <span class="tactic">subst</span>. <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H3</span>; <span class="tactic">subst</span>; <span class="tactic">inversion</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">inversion</span> <span class="id">H2</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>; <span class="tactic">inversion</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">IHEval</span> <span class="kwd">in</span> <span class="id">H6</span>. <span class="tactic">subst</span>. <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">inversion</span> <span class="id">H2</span>; <span class="tactic">subst</span>. <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">inversion</span> <span class="id">H2</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">IHEval</span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="tactic">subst</span>. <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">inversion</span> <span class="id">H2</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">IHEval</span> <span class="kwd">in</span> <span class="id">H5</span>. <span class="tactic">subst</span>. <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H5</span>; <span class="tactic">subst</span>; <span class="tactic">inversion</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">inversion</span> <span class="id">H2</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>; <span class="tactic">inversion</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">reflexivity</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Small-step implementation </div>
<span class="kwd">Fixpoint</span> <span class="id"><a name="eval">eval</a></span> (<span class="id">e</span> : <span class="id"><a href="PFPL.Definitions.html#EExp">EExp</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="PFPL.Definitions.html#EExp">EExp</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">e</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="PFPL.Definitions.html#EId">EId</a></span> <span class="id">_</span> | <span class="id"><a href="PFPL.Definitions.html#ENum">ENum</a></span> <span class="id">_</span> | <span class="id"><a href="PFPL.Definitions.html#EStr">EStr</a></span> <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="PFPL.Definitions.html#EPlus">EPlus</a></span> <span class="id">e1</span> <span class="id">e2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">e1</span>, <span class="id">e2</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="PFPL.Definitions.html#ENum">ENum</a></span> <span class="id">n1</span>, <span class="id"><a href="PFPL.Definitions.html#ENum">ENum</a></span> <span class="id">n2</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="PFPL.Definitions.html#ENum">ENum</a></span> (<span class="id">n1</span> + <span class="id">n2</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span>, <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="PFPL.Definitions.html#is_val">is_val</a></span> <span class="id">e1</span> <span class="kwd">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">eval</span> <span class="id">e2</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">e2</span>' =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="PFPL.Definitions.html#EPlus">EPlus</a></span> <span class="id">e1</span> <span class="id">e2</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">eval</span> <span class="id">e1</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">e1</span>' =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="PFPL.Definitions.html#EPlus">EPlus</a></span> <span class="id">e1</span>' <span class="id">e2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="PFPL.Definitions.html#ETimes">ETimes</a></span> <span class="id">e1</span> <span class="id">e2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">e1</span>, <span class="id">e2</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="PFPL.Definitions.html#ENum">ENum</a></span> <span class="id">n1</span>, <span class="id"><a href="PFPL.Definitions.html#ENum">ENum</a></span> <span class="id">n2</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="PFPL.Definitions.html#ENum">ENum</a></span> (<span class="id">n1</span> * <span class="id">n2</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span>, <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="PFPL.Definitions.html#is_val">is_val</a></span> <span class="id">e1</span> <span class="kwd">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">eval</span> <span class="id">e2</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">e2</span>' =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="PFPL.Definitions.html#ETimes">ETimes</a></span> <span class="id">e1</span> <span class="id">e2</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">eval</span> <span class="id">e1</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">e1</span>' =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="PFPL.Definitions.html#ETimes">ETimes</a></span> <span class="id">e1</span>' <span class="id">e2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="PFPL.Definitions.html#ECat">ECat</a></span> <span class="id">e1</span> <span class="id">e2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">e1</span>, <span class="id">e2</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="PFPL.Definitions.html#EStr">EStr</a></span> <span class="id">s1</span>, <span class="id"><a href="PFPL.Definitions.html#EStr">EStr</a></span> <span class="id">s2</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="PFPL.Definitions.html#EStr">EStr</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#append">append</a></span> <span class="id">s1</span> <span class="id">s2</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span>, <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="PFPL.Definitions.html#is_val">is_val</a></span> <span class="id">e1</span> <span class="kwd">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">eval</span> <span class="id">e2</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">e2</span>' =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="PFPL.Definitions.html#ECat">ECat</a></span> <span class="id">e1</span> <span class="id">e2</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">eval</span> <span class="id">e1</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">e1</span>' =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="PFPL.Definitions.html#ECat">ECat</a></span> <span class="id">e1</span>' <span class="id">e2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="PFPL.Definitions.html#ELen">ELen</a></span> <span class="id">e1</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">e1</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="PFPL.Definitions.html#EStr">EStr</a></span> <span class="id">s1</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="PFPL.Definitions.html#ENum">ENum</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#length">length</a></span> <span class="id">s1</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">eval</span> <span class="id">e1</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">e1</span>' =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="PFPL.Definitions.html#ELen">ELen</a></span> <span class="id">e1</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="PFPL.Definitions.html#ELet">ELet</a></span> <span class="id">e1</span> <span class="id">x</span> <span class="id">e2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="PFPL.Definitions.html#is_val">is_val</a></span> <span class="id">e1</span> <span class="kwd">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="tactic">subst</span> <span class="id">e1</span> <span class="id">x</span> <span class="id">e2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">eval</span> <span class="id">e1</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">e1</span>' =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="PFPL.Definitions.html#ELet">ELet</a></span> <span class="id">e1</span>' <span class="id">x</span> <span class="id">e2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<div class="doc">A value does not evaluate </div>
<span class="kwd">Lemma</span> <span class="id"><a name="values_do_not_evaluate_1">values_do_not_evaluate_1</a></span> : <span class="kwd">forall</span> <span class="id">e</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="PFPL.Definitions.html#Val">Val</a></span> <span class="id">e</span> -&gt; <span class="id"><a href="PFPL.Theorems_Eval.html#eval">eval</a></span> <span class="id">e</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof119')">Proof.</div>
<div class="proofscript" id="proof119">
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">e</span>; <span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;<span class="id">all</span>: <span class="tactic">inversion</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">all</span>: <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id">all</span>: <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">all</span>: <span class="tactic">reflexivity</span>.<br/>
Qed.</div>
<br/>
<div class="doc">An evaluation is possible only to non-values </div>
<span class="kwd">Lemma</span> <span class="id"><a name="values_do_not_evaluate_2">values_do_not_evaluate_2</a></span> : <span class="kwd">forall</span> <span class="id">e</span> <span class="id">e</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="PFPL.Theorems_Eval.html#eval">eval</a></span> <span class="id">e</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">e</span>' -&gt; <span class="id"><a href="PFPL.Definitions.html#is_val">is_val</a></span> <span class="id">e</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof120')">Proof.</div>
<div class="proofscript" id="proof120">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">case_eq</span> (<span class="id"><a href="PFPL.Definitions.html#is_val">is_val</a></span> <span class="id">e</span>); <span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="PFPL.Definitions.html#val_rel_equiv_is_val">val_rel_equiv_is_val</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="PFPL.Theorems_Eval.html#values_do_not_evaluate_1">values_do_not_evaluate_1</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">reflexivity</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Correcteness of the small-step implementation (part 1) </div>
<span class="kwd">Lemma</span> <span class="id"><a name="eval_correct_1">eval_correct_1</a></span> : <span class="kwd">forall</span> <span class="id">e</span> <span class="id">e</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="PFPL.Theorems_Eval.html#eval">eval</a></span> <span class="id">e</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">e</span>' -&gt; <span class="kwd">Eval</span> <span class="id">e</span> <span class="id">e</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof121')">Proof.</div>
<div class="proofscript" id="proof121">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">e</span>; <span class="tactic">intros</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;- <span class="id">case_eq</span> (<span class="id"><a href="PFPL.Theorems_Eval.html#eval">eval</a></span> <span class="id">e1</span>); <span class="tactic">intros</span>; <span class="tactic">rewrite</span> <span class="id">H0</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">assert</span> (<span class="id">T</span> := <span class="id"><a href="PFPL.Theorems_Eval.html#values_do_not_evaluate_2">values_do_not_evaluate_2</a></span> <span class="id">e1</span> <span class="id">e</span> <span class="id">H0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">T</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">e1</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">T</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>: <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>: <span class="tactic">apply</span> <span class="id"><a href="PFPL.Definitions.html#evalPlus2">evalPlus2</a></span>; <span class="tactic">apply</span> <span class="id">IHe1</span>; <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">case_eq</span> (<span class="id"><a href="PFPL.Theorems_Eval.html#eval">eval</a></span> <span class="id">e2</span>); <span class="tactic">intros</span>; <span class="tactic">rewrite</span> <span class="id">H1</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">case_eq</span> (<span class="id"><a href="PFPL.Definitions.html#is_val">is_val</a></span> <span class="id">e1</span>); <span class="tactic">intros</span>; <span class="tactic">rewrite</span> <span class="id">H2</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="PFPL.Definitions.html#val_rel_equiv_is_val">val_rel_equiv_is_val</a></span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">cut</span> (<span class="id">e</span>' = (<span class="id"><a href="PFPL.Definitions.html#EPlus">EPlus</a></span> <span class="id">e1</span> <span class="id">e</span>)). <span class="tactic">intro</span>. <span class="tactic">subst</span> <span class="id">e</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="PFPL.Definitions.html#evalPlus3">evalPlus3</a></span>. <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">IHe2</span>. <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">T</span> := <span class="id"><a href="PFPL.Theorems_Eval.html#values_do_not_evaluate_2">values_do_not_evaluate_2</a></span> <span class="id">e2</span> <span class="id">e</span> <span class="id">H1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">e2</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">T</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>: <span class="tactic">destruct</span> <span class="id">e1</span>; <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">e1</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H2</span>; <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">destruct</span> <span class="id">e1</span>; <span class="tactic">unfold</span> <span class="id"><a href="PFPL.Definitions.html#is_val">is_val</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>: <span class="tactic">destruct</span> <span class="id">e2</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>. <span class="tactic">subst</span>. <span class="tactic">apply</span> <span class="id"><a href="PFPL.Definitions.html#evalPlus1">evalPlus1</a></span>. <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id">case_eq</span> (<span class="id"><a href="PFPL.Theorems_Eval.html#eval">eval</a></span> <span class="id">e1</span>); <span class="tactic">intros</span>; <span class="tactic">rewrite</span> <span class="id">H0</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">assert</span> (<span class="id">T</span> := <span class="id"><a href="PFPL.Theorems_Eval.html#values_do_not_evaluate_2">values_do_not_evaluate_2</a></span> <span class="id">e1</span> <span class="id">e</span> <span class="id">H0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">T</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">e1</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">T</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>: <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>: <span class="tactic">apply</span> <span class="id"><a href="PFPL.Definitions.html#evalTimes2">evalTimes2</a></span>; <span class="tactic">apply</span> <span class="id">IHe1</span>; <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">case_eq</span> (<span class="id"><a href="PFPL.Theorems_Eval.html#eval">eval</a></span> <span class="id">e2</span>); <span class="tactic">intros</span>; <span class="tactic">rewrite</span> <span class="id">H1</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">case_eq</span> (<span class="id"><a href="PFPL.Definitions.html#is_val">is_val</a></span> <span class="id">e1</span>); <span class="tactic">intros</span>; <span class="tactic">rewrite</span> <span class="id">H2</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="PFPL.Definitions.html#val_rel_equiv_is_val">val_rel_equiv_is_val</a></span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">cut</span> (<span class="id">e</span>' = (<span class="id"><a href="PFPL.Definitions.html#ETimes">ETimes</a></span> <span class="id">e1</span> <span class="id">e</span>)). <span class="tactic">intro</span>. <span class="tactic">subst</span> <span class="id">e</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="PFPL.Definitions.html#evalTimes3">evalTimes3</a></span>. <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">IHe2</span>. <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">T</span> := <span class="id"><a href="PFPL.Theorems_Eval.html#values_do_not_evaluate_2">values_do_not_evaluate_2</a></span> <span class="id">e2</span> <span class="id">e</span> <span class="id">H1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">e2</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">T</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>: <span class="tactic">destruct</span> <span class="id">e1</span>; <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">e1</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H2</span>; <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">destruct</span> <span class="id">e1</span>; <span class="tactic">unfold</span> <span class="id"><a href="PFPL.Definitions.html#is_val">is_val</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>: <span class="tactic">destruct</span> <span class="id">e2</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>. <span class="tactic">subst</span>. <span class="tactic">apply</span> <span class="id"><a href="PFPL.Definitions.html#evalTimes1">evalTimes1</a></span>. <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id">case_eq</span> (<span class="id"><a href="PFPL.Theorems_Eval.html#eval">eval</a></span> <span class="id">e1</span>); <span class="tactic">intros</span>; <span class="tactic">rewrite</span> <span class="id">H0</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">assert</span> (<span class="id">T</span> := <span class="id"><a href="PFPL.Theorems_Eval.html#values_do_not_evaluate_2">values_do_not_evaluate_2</a></span> <span class="id">e1</span> <span class="id">e</span> <span class="id">H0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">T</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">e1</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">T</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>: <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>: <span class="tactic">apply</span> <span class="id"><a href="PFPL.Definitions.html#evalCat2">evalCat2</a></span>; <span class="tactic">apply</span> <span class="id">IHe1</span>; <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">case_eq</span> (<span class="id"><a href="PFPL.Theorems_Eval.html#eval">eval</a></span> <span class="id">e2</span>); <span class="tactic">intros</span>; <span class="tactic">rewrite</span> <span class="id">H1</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">case_eq</span> (<span class="id"><a href="PFPL.Definitions.html#is_val">is_val</a></span> <span class="id">e1</span>); <span class="tactic">intros</span>; <span class="tactic">rewrite</span> <span class="id">H2</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="PFPL.Definitions.html#val_rel_equiv_is_val">val_rel_equiv_is_val</a></span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">cut</span> (<span class="id">e</span>' = (<span class="id"><a href="PFPL.Definitions.html#ECat">ECat</a></span> <span class="id">e1</span> <span class="id">e</span>)). <span class="tactic">intro</span>. <span class="tactic">subst</span> <span class="id">e</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="PFPL.Definitions.html#evalCat3">evalCat3</a></span>. <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">IHe2</span>. <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">T</span> := <span class="id"><a href="PFPL.Theorems_Eval.html#values_do_not_evaluate_2">values_do_not_evaluate_2</a></span> <span class="id">e2</span> <span class="id">e</span> <span class="id">H1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">e2</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">T</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>: <span class="tactic">destruct</span> <span class="id">e1</span>; <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">e1</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H2</span>; <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">destruct</span> <span class="id">e1</span>; <span class="tactic">unfold</span> <span class="id"><a href="PFPL.Definitions.html#is_val">is_val</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>: <span class="tactic">destruct</span> <span class="id">e2</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>. <span class="tactic">subst</span>. <span class="tactic">apply</span> <span class="id"><a href="PFPL.Definitions.html#evalCat1">evalCat1</a></span>. <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id">case_eq</span> (<span class="id"><a href="PFPL.Theorems_Eval.html#eval">eval</a></span> <span class="id">e</span>); <span class="tactic">intros</span>; <span class="tactic">rewrite</span> <span class="id">H0</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">destruct</span> <span class="id">e</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>: <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>: <span class="tactic">try</span> (<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">discriminate</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>: <span class="tactic">apply</span> <span class="id"><a href="PFPL.Definitions.html#evalLen2">evalLen2</a></span>; <span class="tactic">apply</span> <span class="id">IHe</span>; <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">destruct</span> <span class="id">e</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="PFPL.Definitions.html#evalLen1">evalLen1</a></span>. <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id">case_eq</span> (<span class="id"><a href="PFPL.Definitions.html#is_val">is_val</a></span> <span class="id">e1</span>); <span class="tactic">intros</span>; <span class="tactic">rewrite</span> <span class="id">H0</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="PFPL.Definitions.html#val_rel_equiv_is_val">val_rel_equiv_is_val</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="PFPL.Definitions.html#evalLet2">evalLet2</a></span>; <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">case_eq</span> (<span class="id"><a href="PFPL.Theorems_Eval.html#eval">eval</a></span> <span class="id">e1</span>); <span class="tactic">intros</span>; <span class="tactic">rewrite</span> <span class="id">H1</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="PFPL.Definitions.html#evalLet1">evalLet1</a></span>. <span class="tactic">apply</span> <span class="id">IHe1</span>. <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">discriminate</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Correcteness of the small-step implementation (part 2) </div>
<span class="kwd">Lemma</span> <span class="id"><a name="eval_correct_2">eval_correct_2</a></span> : <span class="kwd">forall</span> <span class="id">e</span> <span class="id">e</span>',<br/>
&nbsp;&nbsp;<span class="kwd">Eval</span> <span class="id">e</span> <span class="id">e</span>' -&gt; <span class="id"><a href="PFPL.Theorems_Eval.html#eval">eval</a></span> <span class="id">e</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">e</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof122')">Proof.</div>
<div class="proofscript" id="proof122">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">e</span> <span class="id">e</span>' <span class="id">H</span>. <span class="tactic">induction</span> <span class="id">H</span>; <span class="tactic">subst</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">rewrite</span> <span class="id">IHEval</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="PFPL.Theorems_Eval.html#values_do_not_evaluate_2">values_do_not_evaluate_2</a></span> <span class="id">e1</span> <span class="id">e1</span>' <span class="id">IHEval</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">e1</span>; <span class="tactic">try</span> (<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">IHEval</span>; <span class="tactic">discriminate</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>: <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">rewrite</span> <span class="id">IHEval</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="PFPL.Definitions.html#val_rel_equiv_is_val">val_rel_equiv_is_val</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">rewrite</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">T</span> := <span class="id"><a href="PFPL.Theorems_Eval.html#values_do_not_evaluate_2">values_do_not_evaluate_2</a></span> <span class="id">e2</span> <span class="id">e2</span>' <span class="id">IHEval</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">e2</span>; <span class="tactic">try</span> (<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">T</span>; <span class="tactic">discriminate</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>: <span class="tactic">destruct</span> <span class="id">e1</span>; <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">rewrite</span> <span class="id">IHEval</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="PFPL.Theorems_Eval.html#values_do_not_evaluate_2">values_do_not_evaluate_2</a></span> <span class="id">e1</span> <span class="id">e1</span>' <span class="id">IHEval</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">e1</span>; <span class="tactic">try</span> (<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">IHEval</span>; <span class="tactic">discriminate</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>: <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">rewrite</span> <span class="id">IHEval</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="PFPL.Definitions.html#val_rel_equiv_is_val">val_rel_equiv_is_val</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">rewrite</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">T</span> := <span class="id"><a href="PFPL.Theorems_Eval.html#values_do_not_evaluate_2">values_do_not_evaluate_2</a></span> <span class="id">e2</span> <span class="id">e2</span>' <span class="id">IHEval</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">e2</span>; <span class="tactic">try</span> (<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">T</span>; <span class="tactic">discriminate</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>: <span class="tactic">destruct</span> <span class="id">e1</span>; <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">rewrite</span> <span class="id">IHEval</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="PFPL.Theorems_Eval.html#values_do_not_evaluate_2">values_do_not_evaluate_2</a></span> <span class="id">e1</span> <span class="id">e1</span>' <span class="id">IHEval</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">e1</span>; <span class="tactic">try</span> (<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">IHEval</span>; <span class="tactic">discriminate</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>: <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">rewrite</span> <span class="id">IHEval</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="PFPL.Definitions.html#val_rel_equiv_is_val">val_rel_equiv_is_val</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">rewrite</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">T</span> := <span class="id"><a href="PFPL.Theorems_Eval.html#values_do_not_evaluate_2">values_do_not_evaluate_2</a></span> <span class="id">e2</span> <span class="id">e2</span>' <span class="id">IHEval</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">e2</span>; <span class="tactic">try</span> (<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">T</span>; <span class="tactic">discriminate</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>: <span class="tactic">destruct</span> <span class="id">e1</span>; <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">rewrite</span> <span class="id">IHEval</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">e1</span>; <span class="tactic">try</span> (<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">IHEval</span>; <span class="tactic">discriminate</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>: <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">rewrite</span> <span class="id">IHEval</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="PFPL.Theorems_Eval.html#values_do_not_evaluate_2">values_do_not_evaluate_2</a></span> <span class="id">e1</span> <span class="id">e1</span>' <span class="id">IHEval</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">rewrite</span> <span class="id"><a href="PFPL.Definitions.html#val_rel_equiv_is_val">val_rel_equiv_is_val</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">rewrite</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">reflexivity</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Correcteness of the small-step implementation </div>
<span class="kwd">Theorem</span> <span class="id"><a name="eval_correct">eval_correct</a></span> : <span class="kwd">forall</span> <span class="id">e</span> <span class="id">e</span>',<br/>
&nbsp;&nbsp;<span class="kwd">Eval</span> <span class="id">e</span> <span class="id">e</span>' &lt;-&gt; <span class="id"><a href="PFPL.Theorems_Eval.html#eval">eval</a></span> <span class="id">e</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">e</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof123')">Proof.</div>
<div class="proofscript" id="proof123">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="PFPL.Theorems_Eval.html#eval_correct_2">eval_correct_2</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="PFPL.Theorems_Eval.html#eval_correct_1">eval_correct_1</a></span>.<br/>
Qed.</div>
<br/>
<div class="doc">Function to count the number of subexpressions </div>
<span class="kwd">Fixpoint</span> <span class="id"><a name="subexprs_count">subexprs_count</a></span> (<span class="id">e</span> : <span class="id"><a href="PFPL.Definitions.html#EExp">EExp</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">e</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="PFPL.Definitions.html#EId">EId</a></span> <span class="id">_</span> =&gt; 1<br/>
&nbsp;&nbsp;| <span class="id"><a href="PFPL.Definitions.html#ELet">ELet</a></span> <span class="id">e1</span> <span class="id">x</span> <span class="id">e2</span> =&gt; 1 + <span class="id">subexprs_count</span> <span class="id">e1</span> + <span class="id">subexprs_count</span> <span class="id">e2</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="PFPL.Definitions.html#ENum">ENum</a></span> <span class="id">_</span> =&gt; 1<br/>
&nbsp;&nbsp;| <span class="id"><a href="PFPL.Definitions.html#EStr">EStr</a></span> <span class="id">_</span> =&gt; 1<br/>
&nbsp;&nbsp;| <span class="id"><a href="PFPL.Definitions.html#EPlus">EPlus</a></span> <span class="id">e1</span> <span class="id">e2</span> =&gt; 1 + <span class="id">subexprs_count</span> <span class="id">e1</span> + <span class="id">subexprs_count</span> <span class="id">e2</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="PFPL.Definitions.html#ETimes">ETimes</a></span> <span class="id">e1</span> <span class="id">e2</span> =&gt; 1 + <span class="id">subexprs_count</span> <span class="id">e1</span> + <span class="id">subexprs_count</span> <span class="id">e2</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="PFPL.Definitions.html#ECat">ECat</a></span> <span class="id">e1</span> <span class="id">e2</span> =&gt; 1 + <span class="id">subexprs_count</span> <span class="id">e1</span> + <span class="id">subexprs_count</span> <span class="id">e2</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="PFPL.Definitions.html#ELen">ELen</a></span> <span class="id">e1</span> =&gt; 1 + <span class="id">subexprs_count</span> <span class="id">e1</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<div class="doc">Substitution is able to reduce the number of subexpressions (auxiliary) </div>
<span class="kwd">Lemma</span> <span class="tactic">subst</span>'<span class="id">_reduces_aux</span> : <span class="kwd">forall</span> <span class="id">e1</span> <span class="id">x</span> <span class="id">e2</span> <span class="id">e2</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="PFPL.Theorems_Eval.html#subexprs_count">subexprs_count</a></span> <span class="id">e1</span> = 1 -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="PFPL.Theorems_Eval.html#subexprs_count">subexprs_count</a></span> <span class="id">e2</span> = <span class="id"><a href="PFPL.Theorems_Eval.html#subexprs_count">subexprs_count</a></span> <span class="id">e2</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="PFPL.Theorems_Eval.html#subexprs_count">subexprs_count</a></span> (<span class="tactic">subst</span>' <span class="id">e1</span> <span class="id">x</span> <span class="id">e2</span>) = <span class="id"><a href="PFPL.Theorems_Eval.html#subexprs_count">subexprs_count</a></span> <span class="id">e2</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof124')">Proof.</div>
<div class="proofscript" id="proof124">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">e1</span> <span class="id">x</span>. <span class="tactic">induction</span> <span class="id">e2</span>; <span class="tactic">intros</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="tactic">destruct</span> (<span class="id">x</span> =? <span class="id">x0</span>); <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H</span>. <span class="id">all</span>: <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">rewrite</span> &lt;- <span class="id">H0</span>. <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">IHe2_1</span> := <span class="id">IHe2_1</span> <span class="id">e2_1</span> <span class="id">H</span>). <span class="tactic">assert</span>(<span class="id">IHe2_2</span> := <span class="id">IHe2_2</span> <span class="id">e2_2</span> <span class="id">H</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">IHe2_1</span>. <span class="tactic">rewrite</span> <span class="id">IHe2_2</span>. <span class="id">all</span>: <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">rewrite</span> &lt;- <span class="id">H0</span>. <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">IHe2_1</span> := <span class="id">IHe2_1</span> <span class="id">e2_1</span> <span class="id">H</span>). <span class="tactic">assert</span>(<span class="id">IHe2_2</span> := <span class="id">IHe2_2</span> <span class="id">e2_2</span> <span class="id">H</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">IHe2_1</span>. <span class="tactic">rewrite</span> <span class="id">IHe2_2</span>. <span class="id">all</span>: <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">rewrite</span> &lt;- <span class="id">H0</span>. <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">IHe2_1</span> := <span class="id">IHe2_1</span> <span class="id">e2_1</span> <span class="id">H</span>). <span class="tactic">assert</span>(<span class="id">IHe2_2</span> := <span class="id">IHe2_2</span> <span class="id">e2_2</span> <span class="id">H</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">IHe2_1</span>. <span class="tactic">rewrite</span> <span class="id">IHe2_2</span>. <span class="id">all</span>: <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">rewrite</span> &lt;- <span class="id">H0</span>. <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">IHe2</span> := <span class="id">IHe2</span> <span class="id">e2</span> <span class="id">H</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">IHe2</span>. <span class="id">all</span>: <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">rewrite</span> &lt;- <span class="id">H0</span>. <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">IHe2_1</span> := <span class="id">IHe2_1</span> <span class="id">e2_1</span> <span class="id">H</span>). <span class="tactic">assert</span>(<span class="id">IHe2_2</span> := <span class="id">IHe2_2</span> <span class="id">e2_2</span> <span class="id">H</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">x</span> =? <span class="id">x0</span>); <span class="tactic">simpl</span>; <span class="tactic">rewrite</span> <span class="id">IHe2_1</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="tactic">rewrite</span> <span class="id">IHe2_2</span>; <span class="tactic">reflexivity</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Substitution is able to reduce the number of subexpressions </div>
<span class="kwd">Lemma</span> <span class="tactic">subst</span>'<span class="id">_reduces</span> : <span class="kwd">forall</span> <span class="id">e1</span> <span class="id">x</span> <span class="id">e2</span> <span class="id">e2</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="PFPL.Theorems_Eval.html#subexprs_count">subexprs_count</a></span> <span class="id">e1</span> = 1 -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="PFPL.Theorems_Eval.html#subexprs_count">subexprs_count</a></span> <span class="id">e2</span> = <span class="id"><a href="PFPL.Theorems_Eval.html#subexprs_count">subexprs_count</a></span> <span class="id">e2</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="PFPL.Theorems_Eval.html#subexprs_count">subexprs_count</a></span> (<span class="tactic">subst</span>' <span class="id">e1</span> <span class="id">x</span> <span class="id">e2</span>) &lt; <span class="id"><a href="PFPL.Theorems_Eval.html#subexprs_count">subexprs_count</a></span> (<span class="id"><a href="PFPL.Definitions.html#ELet">ELet</a></span> <span class="id">e1</span> <span class="id">x</span> <span class="id">e2</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof125')">Proof.</div>
<div class="proofscript" id="proof125">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">rewrite</span> (<span class="tactic">subst</span>'<span class="id">_reduces_aux</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">e2</span>').<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.Lt.html#le_lt_n_Sm">le_lt_n_Sm</a></span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.Plus.html#le_plus_r">le_plus_r</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">assumption</span>. <span class="tactic">assumption</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Fresh renamings keep the number of subexpressions </div>
<span class="kwd">Lemma</span> <span class="id"><a name="fresh_rename_keeps_count">fresh_rename_keeps_count</a></span> : <span class="kwd">forall</span> <span class="id">e</span> <span class="id">bv</span> <span class="id">o</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="PFPL.Theorems_Eval.html#subexprs_count">subexprs_count</a></span> <span class="id">e</span> = <span class="id"><a href="PFPL.Theorems_Eval.html#subexprs_count">subexprs_count</a></span> (<span class="id"><a href="PFPL.Definitions.html#fresh_rename">fresh_rename</a></span> <span class="id">e</span> <span class="id">bv</span> <span class="id">o</span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof126')">Proof.</div>
<div class="proofscript" id="proof126">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">e</span>; <span class="tactic">intros</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">destruct</span> (<span class="id">bv</span> <span class="id">x</span>); <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">assert</span>(<span class="id">IHe1</span> := <span class="id">IHe1</span> <span class="id">bv</span> <span class="id">o</span>). <span class="tactic">assert</span>(<span class="id">IHe2</span> := <span class="id">IHe2</span> <span class="id">bv</span> <span class="id">o</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">IHe1</span>. <span class="tactic">rewrite</span> <span class="id">IHe2</span>. <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">assert</span>(<span class="id">IHe1</span> := <span class="id">IHe1</span> <span class="id">bv</span> <span class="id">o</span>). <span class="tactic">assert</span>(<span class="id">IHe2</span> := <span class="id">IHe2</span> <span class="id">bv</span> <span class="id">o</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">IHe1</span>. <span class="tactic">rewrite</span> <span class="id">IHe2</span>. <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">assert</span>(<span class="id">IHe1</span> := <span class="id">IHe1</span> <span class="id">bv</span> <span class="id">o</span>). <span class="tactic">assert</span>(<span class="id">IHe2</span> := <span class="id">IHe2</span> <span class="id">bv</span> <span class="id">o</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">IHe1</span>. <span class="tactic">rewrite</span> <span class="id">IHe2</span>. <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">assert</span>(<span class="id">IHe</span> := <span class="id">IHe</span> <span class="id">bv</span> <span class="id">o</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">IHe</span>. <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">assert</span>(<span class="id">IHe1</span> := <span class="id">IHe1</span> <span class="id">bv</span> <span class="id">o</span>). <span class="tactic">assert</span>(<span class="id">IHe2</span> := <span class="id">IHe2</span> (<span class="id"><a href="PFPL.PartialMap_Set.html#updateSet">updateSet</a></span> <span class="id">bv</span> <span class="id">x</span>) <span class="id">o</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">IHe1</span>. <span class="tactic">rewrite</span> <span class="id">IHe2</span>. <span class="tactic">reflexivity</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Substitution with capture-avoidance is able to reduce the number of subexpressions </div>
<span class="kwd">Lemma</span> <span class="id"><a name="subst_reduces">subst_reduces</a></span> : <span class="kwd">forall</span> <span class="id">e1</span> <span class="id">x</span> <span class="id">e2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="PFPL.Theorems_Eval.html#subexprs_count">subexprs_count</a></span> <span class="id">e1</span> = 1 -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="PFPL.Theorems_Eval.html#subexprs_count">subexprs_count</a></span> (<span class="tactic">subst</span> <span class="id">e1</span> <span class="id">x</span> <span class="id">e2</span>) &lt; <span class="id"><a href="PFPL.Theorems_Eval.html#subexprs_count">subexprs_count</a></span> (<span class="id"><a href="PFPL.Definitions.html#ELet">ELet</a></span> <span class="id">e1</span> <span class="id">x</span> <span class="id">e2</span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof127')">Proof.</div>
<div class="proofscript" id="proof127">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="tactic">subst</span>'<span class="id">_reduces</span>. <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="tactic">symmetry</span>. <span class="tactic">apply</span> <span class="id"><a href="PFPL.Theorems_Eval.html#fresh_rename_keeps_count">fresh_rename_keeps_count</a></span>.<br/>
Qed.</div>
<br/>
<div class="doc">Evaluation produces an expression with less subexpressions </div>
<span class="kwd">Lemma</span> <span class="id"><a name="eval_reduces">eval_reduces</a></span> : <span class="kwd">forall</span> <span class="id">e</span> <span class="id">e</span>',<br/>
&nbsp;&nbsp;<span class="kwd">Eval</span> <span class="id">e</span> <span class="id">e</span>' -&gt; <span class="id"><a href="PFPL.Theorems_Eval.html#subexprs_count">subexprs_count</a></span> <span class="id">e</span>' &lt; <span class="id"><a href="PFPL.Theorems_Eval.html#subexprs_count">subexprs_count</a></span> <span class="id">e</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof128')">Proof.</div>
<div class="proofscript" id="proof128">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">e</span> <span class="id">e</span>' <span class="id">H</span>. <span class="tactic">induction</span> <span class="id">H</span>; <span class="tactic">simpl</span>; <span class="tactic">try</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">T</span> := <span class="id"><a href="PFPL.Theorems_Eval.html#subst_reduces">subst_reduces</a></span> (<span class="id"><a href="PFPL.Definitions.html#ENum">ENum</a></span> <span class="id">n</span>) <span class="id">x</span> <span class="id">e2</span>).<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">T</span>. <span class="tactic">assert</span> (<span class="id">T</span> := <span class="id">T</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq_refl">Logic.eq_refl</a></span>). <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">T</span> := <span class="id"><a href="PFPL.Theorems_Eval.html#subst_reduces">subst_reduces</a></span> (<span class="id"><a href="PFPL.Definitions.html#EStr">EStr</a></span> <span class="id">s</span>) <span class="id">x</span> <span class="id">e2</span>).<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">T</span>. <span class="tactic">assert</span> (<span class="id">T</span> := <span class="id">T</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq_refl">Logic.eq_refl</a></span>). <span class="tactic">assumption</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Evaluation function produces an expression with less subexpressions </div>
<span class="kwd">Corollary</span> <span class="id"><a name="eval_func_reduces">eval_func_reduces</a></span> : <span class="kwd">forall</span> <span class="id">e</span> <span class="id">e</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="PFPL.Theorems_Eval.html#eval">eval</a></span> <span class="id">e</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">e</span>' -&gt; <span class="id"><a href="PFPL.Theorems_Eval.html#subexprs_count">subexprs_count</a></span> <span class="id">e</span>' &lt; <span class="id"><a href="PFPL.Theorems_Eval.html#subexprs_count">subexprs_count</a></span> <span class="id">e</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof129')">Proof.</div>
<div class="proofscript" id="proof129">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="PFPL.Theorems_Eval.html#eval_correct">eval_correct</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="PFPL.Theorems_Eval.html#eval_reduces">eval_reduces</a></span>. <span class="tactic">assumption</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Big-step implementation </div>
<span class="id">Function</span> <span class="id">eval_big</span> (<span class="id">e</span> : <span class="id"><a href="PFPL.Definitions.html#EExp">EExp</a></span>) {<span class="kwd">measure</span> <span class="id"><a href="PFPL.Theorems_Eval.html#subexprs_count">subexprs_count</a></span> <span class="id">e</span>} : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="PFPL.Definitions.html#EExp">EExp</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">e</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="PFPL.Definitions.html#ENum">ENum</a></span> <span class="id">n</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="PFPL.Definitions.html#ENum">ENum</a></span> <span class="id">n</span>)<br/>
&nbsp;&nbsp;| <span class="id"><a href="PFPL.Definitions.html#EStr">EStr</a></span> <span class="id">s</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="PFPL.Definitions.html#EStr">EStr</a></span> <span class="id">s</span>)<br/>
&nbsp;&nbsp;| <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="PFPL.Theorems_Eval.html#eval">eval</a></span> <span class="id">e</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">e</span>' =&gt; <span class="id">eval_big</span> <span class="id">e</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof130')">Proof.</div>
<div class="proofscript" id="proof130">
<span class="id">all</span>: <span class="tactic">intros</span>; <span class="tactic">subst</span>.<br/>
<span class="tactic">inversion</span> <span class="id">teq0</span>.<br/>
<span class="id">all</span>: <span class="tactic">apply</span> <span class="id"><a href="PFPL.Theorems_Eval.html#eval_func_reduces">eval_func_reduces</a></span>; <span class="tactic">assumption</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Big-step implementation returns some value or none </div>
<span class="kwd">Lemma</span> <span class="id"><a name="eval_big_returns_value_or_none">eval_big_returns_value_or_none</a></span> : <span class="kwd">forall</span> <span class="id">e</span> <span class="id">e</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="PFPL.Theorems_Eval.html#eval_big">eval_big</a></span> <span class="id">e</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">e</span>' -&gt; <span class="id"><a href="PFPL.Definitions.html#Val">Val</a></span> <span class="id">e</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof131')">Proof.</div>
<div class="proofscript" id="proof131">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">e</span> <span class="id">e</span>'.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="PFPL.Theorems_Eval.html#eval_big_ind">eval_big_ind</a></span>; <span class="tactic">intros</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H</span>. <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="tactic">discriminate</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Big-step evaluation returns a value </div>
<span class="kwd">Lemma</span> <span class="id"><a name="eval_big_gives_value">eval_big_gives_value</a></span> : <span class="kwd">forall</span> <span class="id">e</span> <span class="id">e</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="PFPL.Definitions.html#EvalBig">EvalBig</a></span> <span class="id">e</span> <span class="id">e</span>' -&gt; <span class="id"><a href="PFPL.Definitions.html#Val">Val</a></span> <span class="id">e</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof132')">Proof.</div>
<div class="proofscript" id="proof132">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">induction</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">all</span>: <span class="tactic">try</span> <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assumption</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Star evaluation to n-times evaluation </div>
<span class="kwd">Lemma</span> <span class="id"><a name="EvalStarToEvalN">EvalStarToEvalN</a></span> : <span class="kwd">forall</span> <span class="id">e</span> <span class="id">e</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="PFPL.Definitions.html#EvalStar">EvalStar</a></span> <span class="id">e</span> <span class="id">e</span>' -&gt; <span class="id">exists</span> <span class="id">n</span>, <span class="id"><a href="PFPL.Definitions.html#EvalN">EvalN</a></span> <span class="id">e</span> <span class="id">e</span>' <span class="id">n</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof133')">Proof.</div>
<div class="proofscript" id="proof133">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">induction</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;- <span class="id">exists</span> 0. <span class="tactic">apply</span> <span class="id"><a href="PFPL.Definitions.html#eval0">eval0</a></span>.<br/>
&nbsp;&nbsp;- <span class="tactic">destruct</span> <span class="id">IHEvalStar</span>. <span class="id">exists</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="PFPL.Definitions.html#evalN">evalN</a></span> <span class="id">_</span> <span class="id">e</span>'' <span class="id">e</span>'); <span class="tactic">assumption</span>.<br/>
Qed.</div>
<br/>
<div class="doc">N-times evaluation to star evaluation </div>
<span class="kwd">Lemma</span> <span class="id"><a name="EvalNToEvalStar">EvalNToEvalStar</a></span> : <span class="kwd">forall</span> <span class="id">e</span> <span class="id">e</span>',<br/>
&nbsp;&nbsp;(<span class="id">exists</span> <span class="id">n</span>, <span class="id"><a href="PFPL.Definitions.html#EvalN">EvalN</a></span> <span class="id">e</span> <span class="id">e</span>' <span class="id">n</span>) -&gt; <span class="id"><a href="PFPL.Definitions.html#EvalStar">EvalStar</a></span> <span class="id">e</span> <span class="id">e</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof134')">Proof.</div>
<div class="proofscript" id="proof134">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">H</span>. <span class="tactic">induction</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;- <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">apply</span> (<span class="id"><a href="PFPL.Definitions.html#starN">starN</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">e</span>'); <span class="tactic">assumption</span>.<br/>
Qed.</div>
<br/>
<div class="doc">The big-step evaluation is deterministic </div>
<span class="kwd">Lemma</span> <span class="id"><a name="eval_big_deterministic">eval_big_deterministic</a></span> : <span class="kwd">forall</span> <span class="id">e</span> <span class="id">e</span>' <span class="id">e</span>'',<br/>
&nbsp;&nbsp;<span class="id"><a href="PFPL.Definitions.html#EvalBig">EvalBig</a></span> <span class="id">e</span> <span class="id">e</span>' -&gt; <span class="id"><a href="PFPL.Definitions.html#EvalBig">EvalBig</a></span> <span class="id">e</span> <span class="id">e</span>'' -&gt; <span class="id">e</span>' = <span class="id">e</span>''.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof135')">Proof.</div>
<div class="proofscript" id="proof135">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">e</span> <span class="id">e</span>' <span class="id">e</span>'' <span class="id">H</span>. <span class="tactic">generalize</span> <span class="tactic">dependent</span> <span class="id">e</span>''.<br/>
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">H</span>; <span class="tactic">subst</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>. <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>. <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">inversion</span> <span class="id">H1</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">IHEvalBig1</span> := <span class="id">IHEvalBig1</span> (<span class="id"><a href="PFPL.Definitions.html#ENum">ENum</a></span> <span class="id">n0</span>) <span class="id">H4</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">IHEvalBig2</span> := <span class="id">IHEvalBig2</span> (<span class="id"><a href="PFPL.Definitions.html#ENum">ENum</a></span> <span class="id">n3</span>) <span class="id">H6</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">IHEvalBig1</span>. <span class="tactic">inversion</span> <span class="id">IHEvalBig2</span>. <span class="tactic">subst</span>. <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">inversion</span> <span class="id">H1</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">IHEvalBig1</span> := <span class="id">IHEvalBig1</span> (<span class="id"><a href="PFPL.Definitions.html#ENum">ENum</a></span> <span class="id">n0</span>) <span class="id">H4</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">IHEvalBig2</span> := <span class="id">IHEvalBig2</span> (<span class="id"><a href="PFPL.Definitions.html#ENum">ENum</a></span> <span class="id">n3</span>) <span class="id">H6</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">IHEvalBig1</span>. <span class="tactic">inversion</span> <span class="id">IHEvalBig2</span>. <span class="tactic">subst</span>. <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">inversion</span> <span class="id">H1</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">IHEvalBig1</span> := <span class="id">IHEvalBig1</span> (<span class="id"><a href="PFPL.Definitions.html#EStr">EStr</a></span> <span class="id">s0</span>) <span class="id">H4</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">IHEvalBig2</span> := <span class="id">IHEvalBig2</span> (<span class="id"><a href="PFPL.Definitions.html#EStr">EStr</a></span> <span class="id">s3</span>) <span class="id">H6</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">IHEvalBig1</span>. <span class="tactic">inversion</span> <span class="id">IHEvalBig2</span>. <span class="tactic">subst</span>. <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">inversion</span> <span class="id">H0</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">IHEvalBig</span> := <span class="id">IHEvalBig</span> (<span class="id"><a href="PFPL.Definitions.html#EStr">EStr</a></span> <span class="id">s0</span>) <span class="id">H2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">IHEvalBig</span>. <span class="tactic">subst</span>. <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">inversion</span> <span class="id">H1</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">IHEvalBig1</span> := <span class="id">IHEvalBig1</span> <span class="id">e1</span>'0 <span class="id">H6</span>). <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">IHEvalBig2</span>. <span class="tactic">assumption</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Split <span class="bracket"><span class="id">EPlus</span></span> evaluation (part 1) </div>
<span class="kwd">Lemma</span> <span class="id"><a name="plus_seq">plus_seq</a></span> : <span class="kwd">forall</span> <span class="id">n</span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="PFPL.Definitions.html#EvalN">EvalN</a></span> (<span class="id"><a href="PFPL.Definitions.html#EPlus">EPlus</a></span> <span class="id">e1</span> <span class="id">e2</span>) (<span class="id"><a href="PFPL.Definitions.html#ENum">ENum</a></span> <span class="id">x</span>) <span class="id">n</span>) -&gt;<br/>
&nbsp;&nbsp;(<span class="id">exists</span> <span class="id">x1</span> <span class="id">x2</span> <span class="id">n0</span> <span class="id">n1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="PFPL.Definitions.html#EvalN">EvalN</a></span> <span class="id">e1</span> (<span class="id"><a href="PFPL.Definitions.html#ENum">ENum</a></span> <span class="id">x1</span>) <span class="id">n0</span> /\ <span class="id"><a href="PFPL.Definitions.html#EvalN">EvalN</a></span> <span class="id">e2</span> (<span class="id"><a href="PFPL.Definitions.html#ENum">ENum</a></span> <span class="id">x2</span>) <span class="id">n1</span> /\ <span class="id">x</span> = <span class="id">x1</span> + <span class="id">x2</span> /\ <span class="id">n</span> = 1 + <span class="id">n0</span> + <span class="id">n1</span><br/>
&nbsp;&nbsp;).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof136')">Proof.</div>
<div class="proofscript" id="proof136">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">n</span>; <span class="tactic">intros</span>; <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H1</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">inversion</span> <span class="id">H4</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">n1</span>. <span class="id">exists</span> <span class="id">n2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> 0. <span class="id">exists</span> 0. <span class="tactic">repeat</span> <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="PFPL.Definitions.html#eval0">eval0</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="PFPL.Definitions.html#eval0">eval0</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id">IHn</span> <span class="kwd">in</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H4</span> <span class="kwd">as</span> [<span class="id">x1</span> [<span class="id">x2</span> [<span class="id">n0</span> [<span class="id">n1</span> [<span class="id">H4</span> [<span class="id">H4</span>' [<span class="id">H4</span>'' <span class="id">H4</span>''']]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">x1</span>. <span class="id">exists</span> <span class="id">x2</span>. <span class="id">exists</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n0</span>). <span class="id">exists</span> <span class="id">n1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="PFPL.Definitions.html#evalN">evalN</a></span> <span class="id">_</span> <span class="id">e1</span>'); <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assumption</span>. <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">f_equal</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H4</span>'''. <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id">IHn</span> <span class="kwd">in</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H4</span> <span class="kwd">as</span> [<span class="id">x1</span> [<span class="id">x2</span> [<span class="id">n0</span> [<span class="id">n1</span> [<span class="id">H4</span> [<span class="id">H4</span>' [<span class="id">H4</span>'' <span class="id">H4</span>''']]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">x1</span>. <span class="id">exists</span> <span class="id">x2</span>. <span class="id">exists</span> <span class="id">n0</span>. <span class="id">exists</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assumption</span>. <span class="tactic">apply</span> (<span class="id"><a href="PFPL.Definitions.html#evalN">evalN</a></span> <span class="id">_</span> <span class="id">e2</span>'); <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">f_equal</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H4</span>'''.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.add_comm">add_comm</a></span>. <span class="tactic">simpl</span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.add_comm">add_comm</a></span>. <span class="tactic">assumption</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Split <span class="bracket"><span class="id">ETimes</span></span> evaluation (part 1) </div>
<span class="kwd">Lemma</span> <span class="id"><a name="times_seq">times_seq</a></span> : <span class="kwd">forall</span> <span class="id">n</span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="PFPL.Definitions.html#EvalN">EvalN</a></span> (<span class="id"><a href="PFPL.Definitions.html#ETimes">ETimes</a></span> <span class="id">e1</span> <span class="id">e2</span>) (<span class="id"><a href="PFPL.Definitions.html#ENum">ENum</a></span> <span class="id">x</span>) <span class="id">n</span>) -&gt;<br/>
&nbsp;&nbsp;(<span class="id">exists</span> <span class="id">x1</span> <span class="id">x2</span> <span class="id">n0</span> <span class="id">n1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="PFPL.Definitions.html#EvalN">EvalN</a></span> <span class="id">e1</span> (<span class="id"><a href="PFPL.Definitions.html#ENum">ENum</a></span> <span class="id">x1</span>) <span class="id">n0</span> /\ <span class="id"><a href="PFPL.Definitions.html#EvalN">EvalN</a></span> <span class="id">e2</span> (<span class="id"><a href="PFPL.Definitions.html#ENum">ENum</a></span> <span class="id">x2</span>) <span class="id">n1</span> /\ <span class="id">x</span> = <span class="id">x1</span> * <span class="id">x2</span> /\ <span class="id">n</span> = 1 + <span class="id">n0</span> + <span class="id">n1</span><br/>
&nbsp;&nbsp;).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof137')">Proof.</div>
<div class="proofscript" id="proof137">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">n</span>; <span class="tactic">intros</span>; <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H1</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">inversion</span> <span class="id">H4</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">n1</span>. <span class="id">exists</span> <span class="id">n2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> 0. <span class="id">exists</span> 0. <span class="tactic">repeat</span> <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="PFPL.Definitions.html#eval0">eval0</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="PFPL.Definitions.html#eval0">eval0</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id">IHn</span> <span class="kwd">in</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H4</span> <span class="kwd">as</span> [<span class="id">x1</span> [<span class="id">x2</span> [<span class="id">n0</span> [<span class="id">n1</span> [<span class="id">H4</span> [<span class="id">H4</span>' [<span class="id">H4</span>'' <span class="id">H4</span>''']]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">x1</span>. <span class="id">exists</span> <span class="id">x2</span>. <span class="id">exists</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n0</span>). <span class="id">exists</span> <span class="id">n1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="PFPL.Definitions.html#evalN">evalN</a></span> <span class="id">_</span> <span class="id">e1</span>'); <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assumption</span>. <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">f_equal</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H4</span>'''. <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id">IHn</span> <span class="kwd">in</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H4</span> <span class="kwd">as</span> [<span class="id">x1</span> [<span class="id">x2</span> [<span class="id">n0</span> [<span class="id">n1</span> [<span class="id">H4</span> [<span class="id">H4</span>' [<span class="id">H4</span>'' <span class="id">H4</span>''']]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">x1</span>. <span class="id">exists</span> <span class="id">x2</span>. <span class="id">exists</span> <span class="id">n0</span>. <span class="id">exists</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assumption</span>. <span class="tactic">apply</span> (<span class="id"><a href="PFPL.Definitions.html#evalN">evalN</a></span> <span class="id">_</span> <span class="id">e2</span>'); <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">f_equal</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H4</span>'''.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.add_comm">add_comm</a></span>. <span class="tactic">simpl</span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.add_comm">add_comm</a></span>. <span class="tactic">assumption</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Split <span class="bracket"><span class="id">ECat</span></span> evaluation (part 1) </div>
<span class="kwd">Lemma</span> <span class="id"><a name="cat_seq">cat_seq</a></span> : <span class="kwd">forall</span> <span class="id">n</span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="PFPL.Definitions.html#EvalN">EvalN</a></span> (<span class="id"><a href="PFPL.Definitions.html#ECat">ECat</a></span> <span class="id">e1</span> <span class="id">e2</span>) (<span class="id"><a href="PFPL.Definitions.html#EStr">EStr</a></span> <span class="id">x</span>) <span class="id">n</span>) -&gt;<br/>
&nbsp;&nbsp;(<span class="id">exists</span> <span class="id">x1</span> <span class="id">x2</span> <span class="id">n0</span> <span class="id">n1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="PFPL.Definitions.html#EvalN">EvalN</a></span> <span class="id">e1</span> (<span class="id"><a href="PFPL.Definitions.html#EStr">EStr</a></span> <span class="id">x1</span>) <span class="id">n0</span> /\ <span class="id"><a href="PFPL.Definitions.html#EvalN">EvalN</a></span> <span class="id">e2</span> (<span class="id"><a href="PFPL.Definitions.html#EStr">EStr</a></span> <span class="id">x2</span>) <span class="id">n1</span> /\ <span class="id">x</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#append">append</a></span> <span class="id">x1</span> <span class="id">x2</span> /\ <span class="id">n</span> = 1 + <span class="id">n0</span> + <span class="id">n1</span><br/>
&nbsp;&nbsp;).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof138')">Proof.</div>
<div class="proofscript" id="proof138">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">n</span>; <span class="tactic">intros</span>; <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H1</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">inversion</span> <span class="id">H4</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">s1</span>. <span class="id">exists</span> <span class="id">s2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> 0. <span class="id">exists</span> 0. <span class="tactic">repeat</span> <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="PFPL.Definitions.html#eval0">eval0</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="PFPL.Definitions.html#eval0">eval0</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id">IHn</span> <span class="kwd">in</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H4</span> <span class="kwd">as</span> [<span class="id">x1</span> [<span class="id">x2</span> [<span class="id">n0</span> [<span class="id">n1</span> [<span class="id">H4</span> [<span class="id">H4</span>' [<span class="id">H4</span>'' <span class="id">H4</span>''']]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">x1</span>. <span class="id">exists</span> <span class="id">x2</span>. <span class="id">exists</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n0</span>). <span class="id">exists</span> <span class="id">n1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="PFPL.Definitions.html#evalN">evalN</a></span> <span class="id">_</span> <span class="id">e1</span>'); <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assumption</span>. <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">f_equal</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H4</span>'''. <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id">IHn</span> <span class="kwd">in</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H4</span> <span class="kwd">as</span> [<span class="id">x1</span> [<span class="id">x2</span> [<span class="id">n0</span> [<span class="id">n1</span> [<span class="id">H4</span> [<span class="id">H4</span>' [<span class="id">H4</span>'' <span class="id">H4</span>''']]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">x1</span>. <span class="id">exists</span> <span class="id">x2</span>. <span class="id">exists</span> <span class="id">n0</span>. <span class="id">exists</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assumption</span>. <span class="tactic">apply</span> (<span class="id"><a href="PFPL.Definitions.html#evalN">evalN</a></span> <span class="id">_</span> <span class="id">e2</span>'); <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">f_equal</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H4</span>'''.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.add_comm">add_comm</a></span>. <span class="tactic">simpl</span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.add_comm">add_comm</a></span>. <span class="tactic">assumption</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Split <span class="bracket"><span class="id">ELen</span></span> evaluation (part 1) </div>
<span class="kwd">Lemma</span> <span class="id"><a name="len_seq">len_seq</a></span> : <span class="kwd">forall</span> <span class="id">n</span> <span class="id">e1</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="PFPL.Definitions.html#EvalN">EvalN</a></span> (<span class="id"><a href="PFPL.Definitions.html#ELen">ELen</a></span> <span class="id">e1</span>) (<span class="id"><a href="PFPL.Definitions.html#ENum">ENum</a></span> <span class="id">x</span>) <span class="id">n</span>) -&gt;<br/>
&nbsp;&nbsp;(<span class="id">exists</span> <span class="id">x1</span> <span class="id">n0</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="PFPL.Definitions.html#EvalN">EvalN</a></span> <span class="id">e1</span> (<span class="id"><a href="PFPL.Definitions.html#EStr">EStr</a></span> <span class="id">x1</span>) <span class="id">n0</span> /\ <span class="id">x</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#length">length</a></span> <span class="id">x1</span> /\ <span class="id">n</span> = 1 + <span class="id">n0</span><br/>
&nbsp;&nbsp;).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof139')">Proof.</div>
<div class="proofscript" id="proof139">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">n</span>; <span class="tactic">intros</span>; <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H1</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;- <span class="id">exists</span> <span class="id">s1</span>. <span class="id">exists</span> 0.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H4</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">split</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id">IHn</span> <span class="kwd">in</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H4</span> <span class="kwd">as</span> [<span class="id">x1</span> [<span class="id">n0</span> [<span class="id">H4</span> [<span class="id">H4</span>' <span class="id">H4</span>'']]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">x1</span>. <span class="id">exists</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="PFPL.Definitions.html#evalN">evalN</a></span> <span class="id">_</span> <span class="id">e1</span>'); <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assumption</span>. <span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Split <span class="bracket"><span class="id">ELet</span></span> evaluation (part 1) </div>
<span class="kwd">Lemma</span> <span class="id"><a name="let_seq">let_seq</a></span> : <span class="kwd">forall</span> <span class="id">n</span> <span class="id">e1</span> <span class="id">x</span> <span class="id">e2</span> <span class="id">e</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="PFPL.Definitions.html#Val">Val</a></span> <span class="id">e</span>' -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="PFPL.Definitions.html#EvalN">EvalN</a></span> (<span class="id"><a href="PFPL.Definitions.html#ELet">ELet</a></span> <span class="id">e1</span> <span class="id">x</span> <span class="id">e2</span>) <span class="id">e</span>' <span class="id">n</span>) -&gt;<br/>
&nbsp;&nbsp;(<span class="id">exists</span> <span class="id">e1</span>' <span class="id">n0</span> <span class="id">n1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="PFPL.Definitions.html#Val">Val</a></span> <span class="id">e1</span>' /\ <span class="id"><a href="PFPL.Definitions.html#EvalN">EvalN</a></span> <span class="id">e1</span> <span class="id">e1</span>' <span class="id">n0</span> /\ <span class="id"><a href="PFPL.Definitions.html#EvalN">EvalN</a></span> (<span class="tactic">subst</span> <span class="id">e1</span>' <span class="id">x</span> <span class="id">e2</span>) <span class="id">e</span>' <span class="id">n1</span> /\ <span class="id">n</span> = 1 + <span class="id">n0</span> + <span class="id">n1</span><br/>
&nbsp;&nbsp;).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof140')">Proof.</div>
<div class="proofscript" id="proof140">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">n</span>; <span class="tactic">intros</span>; <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>;<br/>
&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">inversion</span> <span class="id">H5</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">inversion</span> <span class="id">H2</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">e1</span>. <span class="id">exists</span> 0. <span class="id">exists</span> 0.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">split</span>. <span class="tactic">assumption</span>. <span class="id">constructor</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">inversion</span> <span class="id">H2</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">IHn</span> <span class="kwd">in</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H5</span> <span class="kwd">as</span> [<span class="id">e1</span>'0 [<span class="id">n2</span> [<span class="id">n3</span> [<span class="id">H5</span> [<span class="id">H5</span>' [<span class="id">H5</span>'' <span class="id">H5</span>''']]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">e1</span>'0. <span class="id">exists</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n2</span>). <span class="id">exists</span> <span class="id">n3</span>. <span class="tactic">repeat</span> <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assumption</span>. <span class="tactic">apply</span> (<span class="id"><a href="PFPL.Definitions.html#evalN">evalN</a></span> <span class="id">_</span> <span class="id">e1</span>'); <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assumption</span>. <span class="id">lia</span>. <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">e1</span>. <span class="id">exists</span> 0. <span class="id">exists</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n1</span>). <span class="tactic">repeat</span> <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assumption</span>. <span class="id">constructor</span>. <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">inversion</span> <span class="id">H5</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">inversion</span> <span class="id">H2</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">e1</span>. <span class="id">exists</span> 0. <span class="id">exists</span> 0.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">split</span>. <span class="tactic">assumption</span>. <span class="id">constructor</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">inversion</span> <span class="id">H2</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">IHn</span> <span class="kwd">in</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H5</span> <span class="kwd">as</span> [<span class="id">e1</span>'0 [<span class="id">n2</span> [<span class="id">n3</span> [<span class="id">H5</span> [<span class="id">H5</span>' [<span class="id">H5</span>'' <span class="id">H5</span>''']]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">e1</span>'0. <span class="id">exists</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n2</span>). <span class="id">exists</span> <span class="id">n3</span>. <span class="tactic">repeat</span> <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assumption</span>. <span class="tactic">apply</span> (<span class="id"><a href="PFPL.Definitions.html#evalN">evalN</a></span> <span class="id">_</span> <span class="id">e1</span>'); <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assumption</span>. <span class="id">lia</span>. <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">e1</span>. <span class="id">exists</span> 0. <span class="id">exists</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n0</span>). <span class="tactic">repeat</span> <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assumption</span>. <span class="id">constructor</span>. <span class="tactic">assumption</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Equivalence of the small-step and big-step semantics (part 1) </div>
<span class="kwd">Lemma</span> <span class="id"><a name="eval_big_equiv_eval_star_1">eval_big_equiv_eval_star_1</a></span> : <span class="kwd">forall</span> <span class="id">e</span> <span class="id">e</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="PFPL.Definitions.html#EvalStar">EvalStar</a></span> <span class="id">e</span> <span class="id">e</span>' /\ <span class="id"><a href="PFPL.Definitions.html#Val">Val</a></span> <span class="id">e</span>' -&gt; <span class="id"><a href="PFPL.Definitions.html#EvalBig">EvalBig</a></span> <span class="id">e</span> <span class="id">e</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof141')">Proof.</div>
<div class="proofscript" id="proof141">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">H</span>. <span class="tactic">apply</span> <span class="id"><a href="PFPL.Theorems_Eval.html#EvalStarToEvalN">EvalStarToEvalN</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">destruct</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> <span class="tactic">dependent</span> <span class="id">e</span>'. <span class="tactic">generalize</span> <span class="tactic">dependent</span> <span class="id">e</span>.<br/>
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">x</span> <span class="kwd">using</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.Wf_nat.html#lt_wf_ind">lt_wf_ind</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H0</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">inversion</span> <span class="id">H1</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="PFPL.Definitions.html#evalBigNum">evalBigNum</a></span>. <span class="tactic">apply</span> <span class="id"><a href="PFPL.Definitions.html#evalBigStr">evalBigStr</a></span>.<br/>
&nbsp;&nbsp;- <span class="tactic">assert</span> (<span class="id">H4</span> := <span class="id">H3</span>). <span class="tactic">apply</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">H3</span>. <span class="tactic">inversion</span> <span class="id">H2</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">inversion</span> <span class="id">H3</span>; <span class="tactic">subst</span>. <span class="tactic">apply</span> <span class="id"><a href="PFPL.Definitions.html#evalBigPlus">evalBigPlus</a></span>; <span class="tactic">apply</span> <span class="id"><a href="PFPL.Definitions.html#evalBigNum">evalBigNum</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">inversion</span> <span class="id">H3</span>; <span class="tactic">subst</span>. <span class="tactic">apply</span> <span class="id"><a href="PFPL.Definitions.html#evalBigPlus">evalBigPlus</a></span>; [| <span class="tactic">assumption</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="PFPL.Theorems_Eval.html#plus_seq">plus_seq</a></span> <span class="kwd">in</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H4</span> <span class="kwd">as</span> [<span class="id">x1</span> [<span class="id">x2</span> [<span class="id">n0</span> [<span class="id">n3</span> [<span class="id">H4</span> [<span class="id">H4</span>' [<span class="id">H4</span>'' <span class="id">H4</span>''']]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">T1</span> := <span class="id">H4</span>). <span class="tactic">apply</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">T1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">T2</span> := <span class="id"><a href="PFPL.Theorems_Eval.html#eval_big_deterministic">eval_big_deterministic</a></span> <span class="id">e1</span>' (<span class="id"><a href="PFPL.Definitions.html#ENum">ENum</a></span> <span class="id">x1</span>) (<span class="id"><a href="PFPL.Definitions.html#ENum">ENum</a></span> <span class="id">n1</span>) <span class="id">T1</span> <span class="id">H8</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">T2</span>. <span class="tactic">subst</span> <span class="id">x1</span>. <span class="tactic">clear</span> <span class="id">T1</span> <span class="id">T2</span>. <span class="tactic">subst</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id">H</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n0</span>)). <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="PFPL.Definitions.html#evalN">evalN</a></span> <span class="id">_</span> <span class="id">e1</span>'); <span class="tactic">assumption</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">lia</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">inversion</span> <span class="id">H3</span>; <span class="tactic">subst</span>. <span class="tactic">apply</span> <span class="id"><a href="PFPL.Definitions.html#evalBigPlus">evalBigPlus</a></span>; [<span class="tactic">assumption</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="PFPL.Theorems_Eval.html#plus_seq">plus_seq</a></span> <span class="kwd">in</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H4</span> <span class="kwd">as</span> [<span class="id">x1</span> [<span class="id">x2</span> [<span class="id">n0</span> [<span class="id">n3</span> [<span class="id">H4</span> [<span class="id">H4</span>' [<span class="id">H4</span>'' <span class="id">H4</span>''']]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">T1</span> := <span class="id">H4</span>'). <span class="tactic">apply</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">T1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">T2</span> := <span class="id"><a href="PFPL.Theorems_Eval.html#eval_big_deterministic">eval_big_deterministic</a></span> <span class="id">e2</span>' (<span class="id"><a href="PFPL.Definitions.html#ENum">ENum</a></span> <span class="id">x2</span>) (<span class="id"><a href="PFPL.Definitions.html#ENum">ENum</a></span> <span class="id">n2</span>) <span class="id">T1</span> <span class="id">H11</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">T2</span>. <span class="tactic">subst</span> <span class="id">x2</span>. <span class="tactic">clear</span> <span class="id">T1</span> <span class="id">T2</span>. <span class="tactic">subst</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id">H</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n3</span>)). <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="PFPL.Definitions.html#evalN">evalN</a></span> <span class="id">_</span> <span class="id">e2</span>'); <span class="tactic">assumption</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">lia</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">inversion</span> <span class="id">H3</span>; <span class="tactic">subst</span>. <span class="tactic">apply</span> <span class="id"><a href="PFPL.Definitions.html#evalBigTimes">evalBigTimes</a></span>; <span class="tactic">apply</span> <span class="id"><a href="PFPL.Definitions.html#evalBigNum">evalBigNum</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">inversion</span> <span class="id">H3</span>; <span class="tactic">subst</span>. <span class="tactic">apply</span> <span class="id"><a href="PFPL.Definitions.html#evalBigTimes">evalBigTimes</a></span>; [| <span class="tactic">assumption</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="PFPL.Theorems_Eval.html#times_seq">times_seq</a></span> <span class="kwd">in</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H4</span> <span class="kwd">as</span> [<span class="id">x1</span> [<span class="id">x2</span> [<span class="id">n0</span> [<span class="id">n3</span> [<span class="id">H4</span> [<span class="id">H4</span>' [<span class="id">H4</span>'' <span class="id">H4</span>''']]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">T1</span> := <span class="id">H4</span>). <span class="tactic">apply</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">T1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">T2</span> := <span class="id"><a href="PFPL.Theorems_Eval.html#eval_big_deterministic">eval_big_deterministic</a></span> <span class="id">e1</span>' (<span class="id"><a href="PFPL.Definitions.html#ENum">ENum</a></span> <span class="id">x1</span>) (<span class="id"><a href="PFPL.Definitions.html#ENum">ENum</a></span> <span class="id">n1</span>) <span class="id">T1</span> <span class="id">H8</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">T2</span>. <span class="tactic">subst</span> <span class="id">x1</span>. <span class="tactic">clear</span> <span class="id">T1</span> <span class="id">T2</span>. <span class="tactic">subst</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id">H</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n0</span>)). <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="PFPL.Definitions.html#evalN">evalN</a></span> <span class="id">_</span> <span class="id">e1</span>'); <span class="tactic">assumption</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">lia</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">inversion</span> <span class="id">H3</span>; <span class="tactic">subst</span>. <span class="tactic">apply</span> <span class="id"><a href="PFPL.Definitions.html#evalBigTimes">evalBigTimes</a></span>; [<span class="tactic">assumption</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="PFPL.Theorems_Eval.html#times_seq">times_seq</a></span> <span class="kwd">in</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H4</span> <span class="kwd">as</span> [<span class="id">x1</span> [<span class="id">x2</span> [<span class="id">n0</span> [<span class="id">n3</span> [<span class="id">H4</span> [<span class="id">H4</span>' [<span class="id">H4</span>'' <span class="id">H4</span>''']]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">T1</span> := <span class="id">H4</span>'). <span class="tactic">apply</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">T1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">T2</span> := <span class="id"><a href="PFPL.Theorems_Eval.html#eval_big_deterministic">eval_big_deterministic</a></span> <span class="id">e2</span>' (<span class="id"><a href="PFPL.Definitions.html#ENum">ENum</a></span> <span class="id">x2</span>) (<span class="id"><a href="PFPL.Definitions.html#ENum">ENum</a></span> <span class="id">n2</span>) <span class="id">T1</span> <span class="id">H11</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">T2</span>. <span class="tactic">subst</span> <span class="id">x2</span>. <span class="tactic">clear</span> <span class="id">T1</span> <span class="id">T2</span>. <span class="tactic">subst</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id">H</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n3</span>)). <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="PFPL.Definitions.html#evalN">evalN</a></span> <span class="id">_</span> <span class="id">e2</span>'); <span class="tactic">assumption</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">lia</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">inversion</span> <span class="id">H3</span>; <span class="tactic">subst</span>. <span class="tactic">apply</span> <span class="id"><a href="PFPL.Definitions.html#evalBigCat">evalBigCat</a></span>; <span class="tactic">apply</span> <span class="id"><a href="PFPL.Definitions.html#evalBigStr">evalBigStr</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">inversion</span> <span class="id">H3</span>; <span class="tactic">subst</span>. <span class="tactic">apply</span> <span class="id"><a href="PFPL.Definitions.html#evalBigCat">evalBigCat</a></span>; [| <span class="tactic">assumption</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="PFPL.Theorems_Eval.html#cat_seq">cat_seq</a></span> <span class="kwd">in</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H4</span> <span class="kwd">as</span> [<span class="id">x1</span> [<span class="id">x2</span> [<span class="id">n0</span> [<span class="id">n3</span> [<span class="id">H4</span> [<span class="id">H4</span>' [<span class="id">H4</span>'' <span class="id">H4</span>''']]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">T1</span> := <span class="id">H4</span>). <span class="tactic">apply</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">T1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">T2</span> := <span class="id"><a href="PFPL.Theorems_Eval.html#eval_big_deterministic">eval_big_deterministic</a></span> <span class="id">e1</span>' (<span class="id"><a href="PFPL.Definitions.html#EStr">EStr</a></span> <span class="id">x1</span>) (<span class="id"><a href="PFPL.Definitions.html#EStr">EStr</a></span> <span class="id">s1</span>) <span class="id">T1</span> <span class="id">H8</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">T2</span>. <span class="tactic">subst</span> <span class="id">x1</span>. <span class="tactic">clear</span> <span class="id">T1</span> <span class="id">T2</span>. <span class="tactic">subst</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id">H</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n0</span>)). <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="PFPL.Definitions.html#evalN">evalN</a></span> <span class="id">_</span> <span class="id">e1</span>'); <span class="tactic">assumption</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">lia</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">inversion</span> <span class="id">H3</span>; <span class="tactic">subst</span>. <span class="tactic">apply</span> <span class="id"><a href="PFPL.Definitions.html#evalBigCat">evalBigCat</a></span>; [<span class="tactic">assumption</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="PFPL.Theorems_Eval.html#cat_seq">cat_seq</a></span> <span class="kwd">in</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H4</span> <span class="kwd">as</span> [<span class="id">x1</span> [<span class="id">x2</span> [<span class="id">n0</span> [<span class="id">n3</span> [<span class="id">H4</span> [<span class="id">H4</span>' [<span class="id">H4</span>'' <span class="id">H4</span>''']]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">T1</span> := <span class="id">H4</span>'). <span class="tactic">apply</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">T1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">T2</span> := <span class="id"><a href="PFPL.Theorems_Eval.html#eval_big_deterministic">eval_big_deterministic</a></span> <span class="id">e2</span>' (<span class="id"><a href="PFPL.Definitions.html#EStr">EStr</a></span> <span class="id">x2</span>) (<span class="id"><a href="PFPL.Definitions.html#EStr">EStr</a></span> <span class="id">s2</span>) <span class="id">T1</span> <span class="id">H11</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">T2</span>. <span class="tactic">subst</span> <span class="id">x2</span>. <span class="tactic">clear</span> <span class="id">T1</span> <span class="id">T2</span>. <span class="tactic">subst</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id">H</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n3</span>)). <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="PFPL.Definitions.html#evalN">evalN</a></span> <span class="id">_</span> <span class="id">e2</span>'); <span class="tactic">assumption</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">lia</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">inversion</span> <span class="id">H3</span>; <span class="tactic">subst</span>. <span class="tactic">apply</span> <span class="id"><a href="PFPL.Definitions.html#evalBigLen">evalBigLen</a></span>; <span class="tactic">apply</span> <span class="id"><a href="PFPL.Definitions.html#evalBigStr">evalBigStr</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">inversion</span> <span class="id">H3</span>; <span class="tactic">subst</span>. <span class="tactic">apply</span> <span class="id"><a href="PFPL.Definitions.html#evalBigLen">evalBigLen</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="PFPL.Theorems_Eval.html#len_seq">len_seq</a></span> <span class="kwd">in</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H4</span> <span class="kwd">as</span> [<span class="id">x1</span> [<span class="id">n0</span> [<span class="id">H4</span> [<span class="id">H4</span>' <span class="id">H4</span>'']]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">T1</span> := <span class="id">H4</span>). <span class="tactic">apply</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">T1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">T2</span> := <span class="id"><a href="PFPL.Theorems_Eval.html#eval_big_deterministic">eval_big_deterministic</a></span> <span class="id">e1</span>' (<span class="id"><a href="PFPL.Definitions.html#EStr">EStr</a></span> <span class="id">x1</span>) (<span class="id"><a href="PFPL.Definitions.html#EStr">EStr</a></span> <span class="id">s1</span>) <span class="id">T1</span> <span class="id">H7</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">T2</span>. <span class="tactic">subst</span> <span class="id">x1</span>. <span class="tactic">clear</span> <span class="id">T1</span> <span class="id">T2</span>. <span class="tactic">subst</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id">H</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n0</span>)). <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="PFPL.Definitions.html#evalN">evalN</a></span> <span class="id">_</span> <span class="id">e1</span>'); <span class="tactic">assumption</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">lia</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">inversion</span> <span class="id">H3</span>; <span class="tactic">subst</span>. <span class="tactic">apply</span> (<span class="id"><a href="PFPL.Definitions.html#evalBigLet">evalBigLet</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">e1</span>'0); [| <span class="tactic">assumption</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="PFPL.Theorems_Eval.html#let_seq">let_seq</a></span> <span class="kwd">in</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H4</span> <span class="kwd">as</span> [<span class="id">e1</span>'1 [<span class="id">n0</span> [<span class="id">n1</span> [<span class="id">H4</span> [<span class="id">H4</span>' [<span class="id">H4</span>'' <span class="id">H4</span>''']]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">T1</span> := <span class="id">H4</span>'). <span class="tactic">apply</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">T1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">T2</span> := <span class="id"><a href="PFPL.Theorems_Eval.html#eval_big_deterministic">eval_big_deterministic</a></span> <span class="id">e1</span>' <span class="id">e1</span>'0 <span class="id">e1</span>'1 <span class="id">H10</span> <span class="id">T1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">e1</span>'1. <span class="tactic">clear</span> <span class="id">T1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id">H</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n0</span>)). <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="PFPL.Definitions.html#evalN">evalN</a></span> <span class="id">_</span> <span class="id">e1</span>'); <span class="tactic">assumption</span>. <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">lia</span>. <span class="tactic">assumption</span>. <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">apply</span> (<span class="id"><a href="PFPL.Definitions.html#evalBigLet">evalBigLet</a></span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">x</span> <span class="id">e1</span> <span class="id">e</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H5</span>; <span class="tactic">subst</span>; <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">assumption</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Split <span class="bracket"><span class="id">EPlus</span></span> evaluation (part 2) </div>
<span class="kwd">Lemma</span> <span class="id"><a name="plus_seq_2">plus_seq_2</a></span> : <span class="kwd">forall</span> <span class="id">n1</span> <span class="id">n2</span> <span class="id">e1</span> <span class="id">x1</span> <span class="id">e2</span> <span class="id">x2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="PFPL.Definitions.html#EvalN">EvalN</a></span> <span class="id">e1</span> (<span class="id"><a href="PFPL.Definitions.html#ENum">ENum</a></span> <span class="id">x1</span>) <span class="id">n1</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="PFPL.Definitions.html#EvalN">EvalN</a></span> <span class="id">e2</span> (<span class="id"><a href="PFPL.Definitions.html#ENum">ENum</a></span> <span class="id">x2</span>) <span class="id">n2</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="PFPL.Definitions.html#EvalN">EvalN</a></span> (<span class="id"><a href="PFPL.Definitions.html#EPlus">EPlus</a></span> <span class="id">e1</span> <span class="id">e2</span>) (<span class="id"><a href="PFPL.Definitions.html#ENum">ENum</a></span> (<span class="id">x1</span> + <span class="id">x2</span>)) (1 + <span class="id">n1</span> + <span class="id">n2</span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof142')">Proof.</div>
<div class="proofscript" id="proof142">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">n1</span>; <span class="tactic">induction</span> <span class="id">n2</span>; <span class="tactic">intros</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>. <span class="tactic">inversion</span> <span class="id">H0</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="PFPL.Definitions.html#evalN">evalN</a></span> <span class="id">_</span> (<span class="id"><a href="PFPL.Definitions.html#ENum">ENum</a></span> (<span class="id">x1</span> + <span class="id">x2</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>. <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>. <span class="tactic">inversion</span> <span class="id">H0</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id">IHn2</span> (<span class="id"><a href="PFPL.Definitions.html#ENum">ENum</a></span> <span class="id">x1</span>) <span class="id">x1</span>) <span class="kwd">in</span> <span class="id">H5</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="PFPL.Definitions.html#evalN">evalN</a></span> <span class="id">_</span> (<span class="id"><a href="PFPL.Definitions.html#EPlus">EPlus</a></span> (<span class="id"><a href="PFPL.Definitions.html#ENum">ENum</a></span> <span class="id">x1</span>) <span class="id">e</span>')).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>. <span class="id">constructor</span>. <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assumption</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>. <span class="tactic">inversion</span> <span class="id">H0</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id">IHn1</span> 0 <span class="id">e</span>' <span class="id">x1</span> (<span class="id"><a href="PFPL.Definitions.html#ENum">ENum</a></span> <span class="id">x2</span>) <span class="id">x2</span>) <span class="kwd">in</span> <span class="id">H5</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="PFPL.Definitions.html#evalN">evalN</a></span> <span class="id">_</span> (<span class="id"><a href="PFPL.Definitions.html#EPlus">EPlus</a></span> <span class="id">e</span>' (<span class="id"><a href="PFPL.Definitions.html#ENum">ENum</a></span> <span class="id">x2</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>. <span class="tactic">assumption</span>. <span class="tactic">assumption</span>. <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id">IHn1</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n2</span>) <span class="id">e</span>' <span class="id">x1</span> <span class="id">e2</span> <span class="id">x2</span>) <span class="kwd">in</span> <span class="id">H5</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="PFPL.Definitions.html#evalN">evalN</a></span> <span class="id">_</span> (<span class="id"><a href="PFPL.Definitions.html#EPlus">EPlus</a></span> <span class="id">e</span>' <span class="id">e2</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>. <span class="tactic">assumption</span>. <span class="tactic">assumption</span>. <span class="tactic">assumption</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Split <span class="bracket"><span class="id">ETimes</span></span> evaluation (part 2) </div>
<span class="kwd">Lemma</span> <span class="id"><a name="times_seq_2">times_seq_2</a></span> : <span class="kwd">forall</span> <span class="id">n1</span> <span class="id">n2</span> <span class="id">e1</span> <span class="id">x1</span> <span class="id">e2</span> <span class="id">x2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="PFPL.Definitions.html#EvalN">EvalN</a></span> <span class="id">e1</span> (<span class="id"><a href="PFPL.Definitions.html#ENum">ENum</a></span> <span class="id">x1</span>) <span class="id">n1</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="PFPL.Definitions.html#EvalN">EvalN</a></span> <span class="id">e2</span> (<span class="id"><a href="PFPL.Definitions.html#ENum">ENum</a></span> <span class="id">x2</span>) <span class="id">n2</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="PFPL.Definitions.html#EvalN">EvalN</a></span> (<span class="id"><a href="PFPL.Definitions.html#ETimes">ETimes</a></span> <span class="id">e1</span> <span class="id">e2</span>) (<span class="id"><a href="PFPL.Definitions.html#ENum">ENum</a></span> (<span class="id">x1</span> * <span class="id">x2</span>)) (1 + <span class="id">n1</span> + <span class="id">n2</span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof143')">Proof.</div>
<div class="proofscript" id="proof143">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">n1</span>; <span class="tactic">induction</span> <span class="id">n2</span>; <span class="tactic">intros</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>. <span class="tactic">inversion</span> <span class="id">H0</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="PFPL.Definitions.html#evalN">evalN</a></span> <span class="id">_</span> (<span class="id"><a href="PFPL.Definitions.html#ENum">ENum</a></span> (<span class="id">x1</span> * <span class="id">x2</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>. <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>. <span class="tactic">inversion</span> <span class="id">H0</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id">IHn2</span> (<span class="id"><a href="PFPL.Definitions.html#ENum">ENum</a></span> <span class="id">x1</span>) <span class="id">x1</span>) <span class="kwd">in</span> <span class="id">H5</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="PFPL.Definitions.html#evalN">evalN</a></span> <span class="id">_</span> (<span class="id"><a href="PFPL.Definitions.html#ETimes">ETimes</a></span> (<span class="id"><a href="PFPL.Definitions.html#ENum">ENum</a></span> <span class="id">x1</span>) <span class="id">e</span>')).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>. <span class="id">constructor</span>. <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assumption</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>. <span class="tactic">inversion</span> <span class="id">H0</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id">IHn1</span> 0 <span class="id">e</span>' <span class="id">x1</span> (<span class="id"><a href="PFPL.Definitions.html#ENum">ENum</a></span> <span class="id">x2</span>) <span class="id">x2</span>) <span class="kwd">in</span> <span class="id">H5</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="PFPL.Definitions.html#evalN">evalN</a></span> <span class="id">_</span> (<span class="id"><a href="PFPL.Definitions.html#ETimes">ETimes</a></span> <span class="id">e</span>' (<span class="id"><a href="PFPL.Definitions.html#ENum">ENum</a></span> <span class="id">x2</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>. <span class="tactic">assumption</span>. <span class="tactic">assumption</span>. <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id">IHn1</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n2</span>) <span class="id">e</span>' <span class="id">x1</span> <span class="id">e2</span> <span class="id">x2</span>) <span class="kwd">in</span> <span class="id">H5</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="PFPL.Definitions.html#evalN">evalN</a></span> <span class="id">_</span> (<span class="id"><a href="PFPL.Definitions.html#ETimes">ETimes</a></span> <span class="id">e</span>' <span class="id">e2</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>. <span class="tactic">assumption</span>. <span class="tactic">assumption</span>. <span class="tactic">assumption</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Split <span class="bracket"><span class="id">ECat</span></span> evaluation (part 2) </div>
<span class="kwd">Lemma</span> <span class="id"><a name="cat_seq_2">cat_seq_2</a></span> : <span class="kwd">forall</span> <span class="id">n1</span> <span class="id">n2</span> <span class="id">e1</span> <span class="id">x1</span> <span class="id">e2</span> <span class="id">x2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="PFPL.Definitions.html#EvalN">EvalN</a></span> <span class="id">e1</span> (<span class="id"><a href="PFPL.Definitions.html#EStr">EStr</a></span> <span class="id">x1</span>) <span class="id">n1</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="PFPL.Definitions.html#EvalN">EvalN</a></span> <span class="id">e2</span> (<span class="id"><a href="PFPL.Definitions.html#EStr">EStr</a></span> <span class="id">x2</span>) <span class="id">n2</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="PFPL.Definitions.html#EvalN">EvalN</a></span> (<span class="id"><a href="PFPL.Definitions.html#ECat">ECat</a></span> <span class="id">e1</span> <span class="id">e2</span>) (<span class="id"><a href="PFPL.Definitions.html#EStr">EStr</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#append">append</a></span> <span class="id">x1</span> <span class="id">x2</span>)) (1 + <span class="id">n1</span> + <span class="id">n2</span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof144')">Proof.</div>
<div class="proofscript" id="proof144">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">n1</span>; <span class="tactic">induction</span> <span class="id">n2</span>; <span class="tactic">intros</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>. <span class="tactic">inversion</span> <span class="id">H0</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="PFPL.Definitions.html#evalN">evalN</a></span> <span class="id">_</span> (<span class="id"><a href="PFPL.Definitions.html#EStr">EStr</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#append">append</a></span> <span class="id">x1</span> <span class="id">x2</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>. <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>. <span class="tactic">inversion</span> <span class="id">H0</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id">IHn2</span> (<span class="id"><a href="PFPL.Definitions.html#EStr">EStr</a></span> <span class="id">x1</span>) <span class="id">x1</span>) <span class="kwd">in</span> <span class="id">H5</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="PFPL.Definitions.html#evalN">evalN</a></span> <span class="id">_</span> (<span class="id"><a href="PFPL.Definitions.html#ECat">ECat</a></span> (<span class="id"><a href="PFPL.Definitions.html#EStr">EStr</a></span> <span class="id">x1</span>) <span class="id">e</span>')).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>. <span class="id">constructor</span>. <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assumption</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>. <span class="tactic">inversion</span> <span class="id">H0</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id">IHn1</span> 0 <span class="id">e</span>' <span class="id">x1</span> (<span class="id"><a href="PFPL.Definitions.html#EStr">EStr</a></span> <span class="id">x2</span>) <span class="id">x2</span>) <span class="kwd">in</span> <span class="id">H5</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="PFPL.Definitions.html#evalN">evalN</a></span> <span class="id">_</span> (<span class="id"><a href="PFPL.Definitions.html#ECat">ECat</a></span> <span class="id">e</span>' (<span class="id"><a href="PFPL.Definitions.html#EStr">EStr</a></span> <span class="id">x2</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>. <span class="tactic">assumption</span>. <span class="tactic">assumption</span>. <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id">IHn1</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n2</span>) <span class="id">e</span>' <span class="id">x1</span> <span class="id">e2</span> <span class="id">x2</span>) <span class="kwd">in</span> <span class="id">H5</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="PFPL.Definitions.html#evalN">evalN</a></span> <span class="id">_</span> (<span class="id"><a href="PFPL.Definitions.html#ECat">ECat</a></span> <span class="id">e</span>' <span class="id">e2</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>. <span class="tactic">assumption</span>. <span class="tactic">assumption</span>. <span class="tactic">assumption</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Split <span class="bracket"><span class="id">ELen</span></span> evaluation (part 2) </div>
<span class="kwd">Lemma</span> <span class="id"><a name="len_seq_2">len_seq_2</a></span> : <span class="kwd">forall</span> <span class="id">n1</span> <span class="id">e1</span> <span class="id">x1</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="PFPL.Definitions.html#EvalN">EvalN</a></span> <span class="id">e1</span> (<span class="id"><a href="PFPL.Definitions.html#EStr">EStr</a></span> <span class="id">x1</span>) <span class="id">n1</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="PFPL.Definitions.html#EvalN">EvalN</a></span> (<span class="id"><a href="PFPL.Definitions.html#ELen">ELen</a></span> <span class="id">e1</span>) (<span class="id"><a href="PFPL.Definitions.html#ENum">ENum</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#length">length</a></span> <span class="id">x1</span>)) (1 + <span class="id">n1</span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof145')">Proof.</div>
<div class="proofscript" id="proof145">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">n1</span>; <span class="tactic">intros</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="PFPL.Definitions.html#evalN">evalN</a></span> <span class="id">_</span> (<span class="id"><a href="PFPL.Definitions.html#ENum">ENum</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#length">length</a></span> <span class="id">x1</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>. <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id">IHn1</span> <span class="id">e</span>' <span class="id">x1</span>) <span class="kwd">in</span> <span class="id">H4</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="PFPL.Definitions.html#evalN">evalN</a></span> <span class="id">_</span> (<span class="id"><a href="PFPL.Definitions.html#ELen">ELen</a></span> <span class="id">e</span>')).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>. <span class="tactic">assumption</span>. <span class="tactic">assumption</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Split <span class="bracket"><span class="id">ELet</span></span> evaluation (part 2) </div>
<span class="kwd">Lemma</span> <span class="id"><a name="let_seq_2">let_seq_2</a></span> : <span class="kwd">forall</span> <span class="id">n1</span> <span class="id">n2</span> <span class="id">e1</span> <span class="id">x</span> <span class="id">e2</span> <span class="id">e1</span>' <span class="id">e2</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="PFPL.Definitions.html#Val">Val</a></span> <span class="id">e1</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="PFPL.Definitions.html#Val">Val</a></span> <span class="id">e2</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="PFPL.Definitions.html#EvalN">EvalN</a></span> <span class="id">e1</span> <span class="id">e1</span>' <span class="id">n1</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="PFPL.Definitions.html#EvalN">EvalN</a></span> (<span class="tactic">subst</span> <span class="id">e1</span>' <span class="id">x</span> <span class="id">e2</span>) <span class="id">e2</span>' <span class="id">n2</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="PFPL.Definitions.html#EvalN">EvalN</a></span> (<span class="id"><a href="PFPL.Definitions.html#ELet">ELet</a></span> <span class="id">e1</span> <span class="id">x</span> <span class="id">e2</span>) <span class="id">e2</span>' (1 + <span class="id">n1</span> + <span class="id">n2</span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof146')">Proof.</div>
<div class="proofscript" id="proof146">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">n1</span>; <span class="tactic">induction</span> <span class="id">n2</span>; <span class="tactic">intros</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">inversion</span> <span class="id">H1</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="PFPL.Definitions.html#evalN">evalN</a></span> <span class="id">_</span> (<span class="tactic">subst</span> <span class="id">e1</span>' <span class="id">x</span> <span class="id">e2</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>. <span class="tactic">assumption</span>. <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">inversion</span> <span class="id">H1</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="PFPL.Definitions.html#evalN">evalN</a></span> <span class="id">_</span> (<span class="tactic">subst</span> <span class="id">e1</span>' <span class="id">x</span> <span class="id">e2</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>. <span class="tactic">assumption</span>. <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">inversion</span> <span class="id">H1</span>; <span class="tactic">subst</span>. <span class="tactic">inversion</span> <span class="id">H2</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id">IHn1</span> 0 <span class="id">e</span>' <span class="id">x</span> <span class="id">e2</span> <span class="id">e1</span>' (<span class="tactic">subst</span> <span class="id">e1</span>' <span class="id">x</span> <span class="id">e2</span>)) <span class="kwd">in</span> <span class="id">H2</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="PFPL.Definitions.html#evalN">evalN</a></span> <span class="id">_</span> (<span class="id"><a href="PFPL.Definitions.html#ELet">ELet</a></span> <span class="id">e</span>' <span class="id">x</span> <span class="id">e2</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>. <span class="tactic">assumption</span>. <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assumption</span>. <span class="tactic">assumption</span>. <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">inversion</span> <span class="id">H1</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id">IHn1</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n2</span>) <span class="id">e</span>' <span class="id">x</span> <span class="id">e2</span> <span class="id">e1</span>' <span class="id">e2</span>') <span class="kwd">in</span> <span class="id">H7</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H7</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="PFPL.Definitions.html#evalN">evalN</a></span> <span class="id">_</span> (<span class="id"><a href="PFPL.Definitions.html#ELet">ELet</a></span> <span class="id">e</span>' <span class="id">x</span> <span class="id">e2</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>. <span class="id">all</span>: <span class="tactic">assumption</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Equivalence of the small-step and big-step semantics (part 2) </div>
<span class="kwd">Lemma</span> <span class="id"><a name="eval_big_equiv_eval_star_2">eval_big_equiv_eval_star_2</a></span> : <span class="kwd">forall</span> <span class="id">e</span> <span class="id">e</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="PFPL.Definitions.html#EvalBig">EvalBig</a></span> <span class="id">e</span> <span class="id">e</span>' -&gt; <span class="id"><a href="PFPL.Definitions.html#EvalStar">EvalStar</a></span> <span class="id">e</span> <span class="id">e</span>' /\ <span class="id"><a href="PFPL.Definitions.html#Val">Val</a></span> <span class="id">e</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof147')">Proof.</div>
<div class="proofscript" id="proof147">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">split</span>. <span class="tactic">apply</span> <span class="id"><a href="PFPL.Theorems_Eval.html#EvalNToEvalStar">EvalNToEvalStar</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;- <span class="id">exists</span> 0. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="id">exists</span> 0. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">destruct</span> <span class="id">IHEvalBig1</span>. <span class="tactic">destruct</span> <span class="id">IHEvalBig2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> (1 + <span class="id">x</span> + <span class="id">x0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="PFPL.Theorems_Eval.html#plus_seq_2">plus_seq_2</a></span>; <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">destruct</span> <span class="id">IHEvalBig1</span>. <span class="tactic">destruct</span> <span class="id">IHEvalBig2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> (1 + <span class="id">x</span> + <span class="id">x0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="PFPL.Theorems_Eval.html#times_seq_2">times_seq_2</a></span>; <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">destruct</span> <span class="id">IHEvalBig1</span>. <span class="tactic">destruct</span> <span class="id">IHEvalBig2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> (1 + <span class="id">x</span> + <span class="id">x0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="PFPL.Theorems_Eval.html#cat_seq_2">cat_seq_2</a></span>; <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">destruct</span> <span class="id">IHEvalBig</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> (1 + <span class="id">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="PFPL.Theorems_Eval.html#len_seq_2">len_seq_2</a></span>; <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">destruct</span> <span class="id">IHEvalBig1</span>. <span class="tactic">destruct</span> <span class="id">IHEvalBig2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> (1 + <span class="id">x0</span> + <span class="id">x1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="PFPL.Theorems_Eval.html#let_seq_2">let_seq_2</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">e1</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="PFPL.Theorems_Eval.html#eval_big_gives_value">eval_big_gives_value</a></span> <span class="id">e1</span>); <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="PFPL.Theorems_Eval.html#eval_big_gives_value">eval_big_gives_value</a></span> (<span class="tactic">subst</span> <span class="id">e1</span>' <span class="id">x</span> <span class="id">e2</span>)); <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>: <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">apply</span> (<span class="id"><a href="PFPL.Theorems_Eval.html#eval_big_gives_value">eval_big_gives_value</a></span> <span class="id">e</span>); <span class="tactic">assumption</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Equivalence of the small-step and big-step semantics </div>
<span class="kwd">Theorem</span> <span class="id"><a name="eval_big_equiv_eval_star">eval_big_equiv_eval_star</a></span> : <span class="kwd">forall</span> <span class="id">e</span> <span class="id">e</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="PFPL.Definitions.html#EvalBig">EvalBig</a></span> <span class="id">e</span> <span class="id">e</span>' &lt;-&gt; <span class="id"><a href="PFPL.Definitions.html#EvalStar">EvalStar</a></span> <span class="id">e</span> <span class="id">e</span>' /\ <span class="id"><a href="PFPL.Definitions.html#Val">Val</a></span> <span class="id">e</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof148')">Proof.</div>
<div class="proofscript" id="proof148">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="PFPL.Theorems_Eval.html#eval_big_equiv_eval_star_2">eval_big_equiv_eval_star_2</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="PFPL.Theorems_Eval.html#eval_big_equiv_eval_star_1">eval_big_equiv_eval_star_1</a></span>.<br/>
Qed.</div>
<br/>
<div class="doc">Correcteness of the big-step implementation (part 1) </div>
<span class="kwd">Lemma</span> <span class="id"><a name="eval_big_correct_1">eval_big_correct_1</a></span> : <span class="kwd">forall</span> <span class="id">e</span> <span class="id">e</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="PFPL.Definitions.html#EvalBig">EvalBig</a></span> <span class="id">e</span> <span class="id">e</span>' -&gt; <span class="id"><a href="PFPL.Theorems_Eval.html#eval_big">eval_big</a></span> <span class="id">e</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">e</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof149')">Proof.</div>
<div class="proofscript" id="proof149">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="PFPL.Theorems_Eval.html#eval_big_equiv_eval_star">eval_big_equiv_eval_star</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">destruct</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="PFPL.Theorems_Eval.html#EvalStarToEvalN">EvalStarToEvalN</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">destruct</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> <span class="tactic">dependent</span> <span class="id">e</span>'. <span class="tactic">generalize</span> <span class="tactic">dependent</span> <span class="id">e</span>.<br/>
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">x</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>. <span class="tactic">inversion</span> <span class="id">H0</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="PFPL.Theorems_Eval.html#eval_big_equation">eval_big_equation</a></span>; <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="PFPL.Theorems_Eval.html#eval_big_equation">eval_big_equation</a></span>; <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>. <span class="tactic">assert</span> (<span class="id">H2</span>' := <span class="id">H2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="PFPL.Theorems_Eval.html#eval_correct">eval_correct</a></span> <span class="kwd">in</span> <span class="id">H2</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="PFPL.Theorems_Eval.html#eval_big_equation">eval_big_equation</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H2</span>'. <span class="tactic">clear</span> <span class="id">H2</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">IHx</span> <span class="kwd">in</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">e</span>; <span class="tactic">inversion</span> <span class="id">H2</span>; <span class="tactic">subst</span>; <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assumption</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Correcteness of the big-step implementation (auxiliary of part 2) </div>
<span class="kwd">Lemma</span> <span class="id"><a name="eval_big_correct_2_aux">eval_big_correct_2_aux</a></span> : <span class="kwd">forall</span> <span class="id">e</span> <span class="id">e</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="PFPL.Theorems_Eval.html#eval_big">eval_big</a></span> <span class="id">e</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">e</span>' -&gt; <span class="id">exists</span> <span class="id">n</span>, <span class="id"><a href="PFPL.Definitions.html#EvalN">EvalN</a></span> <span class="id">e</span> <span class="id">e</span>' <span class="id">n</span> /\ <span class="id"><a href="PFPL.Definitions.html#Val">Val</a></span> <span class="id">e</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof150')">Proof.</div>
<div class="proofscript" id="proof150">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">e</span> <span class="id">e</span>'.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="PFPL.Theorems_Eval.html#eval_big_ind">eval_big_ind</a></span>; <span class="tactic">intros</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>. <span class="id">exists</span> 0. <span class="tactic">split</span>; <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>. <span class="id">exists</span> 0. <span class="tactic">split</span>; <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="tactic">destruct</span> <span class="id">H0</span>. <span class="tactic">destruct</span> <span class="id">H0</span>. <span class="id">exists</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">apply</span> (<span class="id"><a href="PFPL.Definitions.html#evalN">evalN</a></span> <span class="id">_</span> <span class="id">e</span>'0). <span class="tactic">apply</span> <span class="id"><a href="PFPL.Theorems_Eval.html#eval_correct">eval_correct</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>: <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">discriminate</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Correcteness of the big-step implementation (part 2) </div>
<span class="kwd">Lemma</span> <span class="id"><a name="eval_big_correct_2">eval_big_correct_2</a></span> : <span class="kwd">forall</span> <span class="id">e</span> <span class="id">e</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="PFPL.Theorems_Eval.html#eval_big">eval_big</a></span> <span class="id">e</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">e</span>' -&gt; <span class="id"><a href="PFPL.Definitions.html#EvalBig">EvalBig</a></span> <span class="id">e</span> <span class="id">e</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof151')">Proof.</div>
<div class="proofscript" id="proof151">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">T</span> := <span class="id"><a href="PFPL.Theorems_Eval.html#eval_big_correct_2_aux">eval_big_correct_2_aux</a></span> <span class="id">e</span> <span class="id">e</span>' <span class="id">H</span>).<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">T</span>. <span class="tactic">destruct</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="PFPL.Theorems_Eval.html#eval_big_equiv_eval_star">eval_big_equiv_eval_star</a></span>. <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="PFPL.Theorems_Eval.html#EvalNToEvalStar">EvalNToEvalStar</a></span>. <span class="id">exists</span> <span class="id">x</span>.<br/>
&nbsp;&nbsp;<span class="id">all</span>: <span class="tactic">assumption</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Correcteness of the big-step implementation </div>
<span class="kwd">Theorem</span> <span class="id"><a name="eval_big_correct">eval_big_correct</a></span> : <span class="kwd">forall</span> <span class="id">e</span> <span class="id">e</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="PFPL.Definitions.html#EvalBig">EvalBig</a></span> <span class="id">e</span> <span class="id">e</span>' &lt;-&gt; <span class="id"><a href="PFPL.Theorems_Eval.html#eval_big">eval_big</a></span> <span class="id">e</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">e</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof152')">Proof.</div>
<div class="proofscript" id="proof152">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="PFPL.Theorems_Eval.html#eval_big_correct_1">eval_big_correct_1</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="PFPL.Theorems_Eval.html#eval_big_correct_2">eval_big_correct_2</a></span>.<br/>
Qed.</div>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/xavierleroy/coq2html/">coq2html</a></div>
</body>
</html>
