
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module PFPL.Theorems_Eval</title>
<meta name="description" content="Documentation of Coq module PFPL.Theorems_Eval" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module PFPL.Theorems_Eval</h1>
<div class="coq">
<span class="kwd">Set</span> <span class="id">Warnings</span> "-<span class="id">notation</span>-<span class="id">overridden</span>,-<span class="id">parsing</span>,-<span class="id">deprecated</span>-<span class="id">hint</span>-<span class="id">without</span>-<span class="id">locality</span>".<br/>
<span class="kwd">From</span> <span class="id">Coq</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Bool.Bool.html">Bool.Bool</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Coq</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Strings.String.html">Strings.String</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Coq</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.Arith.html">Arith.Arith</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Coq</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.EqNat.html">Arith.EqNat</a></span>. <span class="kwd">Import</span> <span class="id">Nat</span>.<br/>
<span class="kwd">From</span> <span class="id">Coq</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.PeanoNat.html">Arith.PeanoNat</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Coq</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Strings.String.html">Strings.String</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Coq</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Logic.Eqdep_dec.html">Logic.Eqdep_dec</a></span>.<br/>
<span class="kwd">From</span> <span class="id">Coq</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.micromega.Lia.html">Lia</a></span>.<br/>
<span class="kwd">From</span> <span class="id">PFPL</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="PFPL.PartialMap_Set.html">PartialMap_Set</a></span>.<br/>
<span class="kwd">From</span> <span class="id">PFPL</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="PFPL.Definitions.html">Definitions</a></span>.<br/>
<span class="kwd">From</span> <span class="id">PFPL</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="PFPL.Lemmas_Vars.html">Lemmas_Vars</a></span>.<br/>
<span class="kwd">From</span> <span class="id">PFPL</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="PFPL.Lemmas_Rename.html">Lemmas_Rename</a></span>.<br/>
<span class="kwd">From</span> <span class="id">PFPL</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="PFPL.Lemmas_Same_Structure.html">Lemmas_Same_Structure</a></span>.<br/>
<span class="kwd">From</span> <span class="id">PFPL</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="PFPL.Induction_Expr.html">Induction_Expr</a></span>.<br/>
<span class="kwd">From</span> <span class="id">PFPL</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="PFPL.Lemmas_AlphaEquiv.html">Lemmas_AlphaEquiv</a></span>.<br/>
<span class="kwd">From</span> <span class="id">PFPL</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="PFPL.Lemmas_Rename_AlphaEquiv.html">Lemmas_Rename_AlphaEquiv</a></span>.<br/>
<span class="kwd">From</span> <span class="id">PFPL</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="PFPL.Lemmas_FreshRename.html">Lemmas_FreshRename</a></span>.<br/>
<span class="kwd">From</span> <span class="id">PFPL</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="PFPL.Lemmas_FreshRename_AlphaEquiv.html">Lemmas_FreshRename_AlphaEquiv</a></span>.<br/>
<span class="kwd">From</span> <span class="id">PFPL</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="PFPL.Lemmas_Rename_FreshRename.html">Lemmas_Rename_FreshRename</a></span>.<br/>
<span class="kwd">From</span> <span class="id">PFPL</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="PFPL.Lemmas_Subst.html">Lemmas_Subst</a></span>.<br/>
<span class="kwd">From</span> <span class="id">PFPL</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="PFPL.Lemmas_Rename_Subst.html">Lemmas_Rename_Subst</a></span>.<br/>
<span class="kwd">From</span> <span class="id">PFPL</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="PFPL.Theorems_AlphaEquiv.html">Theorems_AlphaEquiv</a></span>.<br/>
<br/>
<div class="doc">Finality of values (In Harper's book) </div>
<span class="kwd">Lemma</span> <span class="id"><a name="finality_of_values">finality_of_values</a></span> : <span class="kwd">forall</span> <span class="id">e</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="PFPL.Definitions.html#Val">Val</a></span> <span class="id">e</span> /\ (<span class="kwd">exists</span> <span class="id">e</span>', <span class="id"><a href="PFPL.Definitions.html#Eval">Eval</a></span> <span class="id">e</span> <span class="id">e</span>') -&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof1')">Proof.</span></div>
<div class="proofscript" id="proof1">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">H</span>; <span class="id">destruct</span> <span class="id">H0</span>; <span class="id">inversion</span> <span class="id">H</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Determinacy (In Harper's book) </div>
<span class="kwd">Lemma</span> <span class="id"><a name="determinacy">determinacy</a></span> : <span class="kwd">forall</span> <span class="id">e</span> <span class="id">e</span>' <span class="id">e</span>'',<br/>
&nbsp;&nbsp;<span class="id"><a href="PFPL.Definitions.html#Eval">Eval</a></span> <span class="id">e</span> <span class="id">e</span>' -&gt; <span class="id"><a href="PFPL.Definitions.html#Eval">Eval</a></span> <span class="id">e</span> <span class="id">e</span>'' -&gt; <span class="id">e</span>' = <span class="id">e</span>''.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof2')">Proof.</span></div>
<div class="proofscript" id="proof2">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">e</span> <span class="id">e</span>' <span class="id">e</span>'' <span class="id">H1</span>. <span class="id">generalize</span> <span class="id">dependent</span> <span class="id">e</span>''.<br/>
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">H1</span>; <span class="id">intros</span> <span class="id">e</span>'' <span class="id">H2</span>.<br/>
&nbsp;&nbsp;- <span class="id">inversion</span> <span class="id">H2</span>; <span class="id">subst</span>. <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inversion</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inversion</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;- <span class="id">inversion</span> <span class="id">H2</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inversion</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">IHEval</span> <span class="kwd">in</span> <span class="id">H4</span>. <span class="id">subst</span>. <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inversion</span> <span class="id">H3</span>; <span class="id">subst</span>; <span class="id">inversion</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;- <span class="id">inversion</span> <span class="id">H2</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inversion</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inversion</span> <span class="id">H</span>; <span class="id">subst</span>; <span class="id">inversion</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">IHEval</span> <span class="kwd">in</span> <span class="id">H6</span>. <span class="id">subst</span>. <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id">inversion</span> <span class="id">H2</span>; <span class="id">subst</span>. <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inversion</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inversion</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;- <span class="id">inversion</span> <span class="id">H2</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inversion</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">IHEval</span> <span class="kwd">in</span> <span class="id">H4</span>. <span class="id">subst</span>. <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inversion</span> <span class="id">H3</span>; <span class="id">subst</span>; <span class="id">inversion</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;- <span class="id">inversion</span> <span class="id">H2</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inversion</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inversion</span> <span class="id">H</span>; <span class="id">subst</span>; <span class="id">inversion</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">IHEval</span> <span class="kwd">in</span> <span class="id">H6</span>. <span class="id">subst</span>. <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id">inversion</span> <span class="id">H2</span>; <span class="id">subst</span>. <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inversion</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inversion</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;- <span class="id">inversion</span> <span class="id">H2</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inversion</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">IHEval</span> <span class="kwd">in</span> <span class="id">H4</span>. <span class="id">subst</span>. <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inversion</span> <span class="id">H3</span>; <span class="id">subst</span>; <span class="id">inversion</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;- <span class="id">inversion</span> <span class="id">H2</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inversion</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inversion</span> <span class="id">H</span>; <span class="id">subst</span>; <span class="id">inversion</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">IHEval</span> <span class="kwd">in</span> <span class="id">H6</span>. <span class="id">subst</span>. <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id">inversion</span> <span class="id">H2</span>; <span class="id">subst</span>. <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inversion</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;- <span class="id">inversion</span> <span class="id">H2</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inversion</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">IHEval</span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="id">subst</span>. <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id">inversion</span> <span class="id">H2</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">IHEval</span> <span class="kwd">in</span> <span class="id">H5</span>. <span class="id">subst</span>. <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inversion</span> <span class="id">H5</span>; <span class="id">subst</span>; <span class="id">inversion</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;- <span class="id">inversion</span> <span class="id">H2</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inversion</span> <span class="id">H</span>; <span class="id">subst</span>; <span class="id">inversion</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">reflexivity</span>.<br/>
Qed.</div>
<br/>
<div class="doc">A value does not evaluate </div>
<span class="kwd">Lemma</span> <span class="id"><a name="values_do_not_evaluate_1">values_do_not_evaluate_1</a></span> : <span class="kwd">forall</span> <span class="id">e</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="PFPL.Definitions.html#Val">Val</a></span> <span class="id">e</span> -&gt; <span class="id"><a href="PFPL.Definitions.html#eval">eval</a></span> <span class="id">e</span> = <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof3')">Proof.</span></div>
<div class="proofscript" id="proof3">
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">e</span>; <span class="id">intro</span>.<br/>
&nbsp;&nbsp;<span class="id">all</span>: <span class="id">inversion</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">all</span>: <span class="id">subst</span>.<br/>
&nbsp;&nbsp;<span class="id">all</span>: <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">all</span>: <span class="id">reflexivity</span>.<br/>
Qed.</div>
<br/>
<div class="doc">An evaluation is possible only to non-values </div>
<span class="kwd">Lemma</span> <span class="id"><a name="values_do_not_evaluate_2">values_do_not_evaluate_2</a></span> : <span class="kwd">forall</span> <span class="id">e</span> <span class="id">e</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="PFPL.Definitions.html#eval">eval</a></span> <span class="id">e</span> = <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">e</span>' -&gt; <span class="id"><a href="PFPL.Definitions.html#is_val">is_val</a></span> <span class="id">e</span> = <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof4')">Proof.</span></div>
<div class="proofscript" id="proof4">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">case_eq</span> (<span class="id"><a href="PFPL.Definitions.html#is_val">is_val</a></span> <span class="id">e</span>); <span class="id">intro</span>.<br/>
&nbsp;&nbsp;- <span class="id">rewrite</span> &lt;- <span class="id"><a href="PFPL.Definitions.html#val_rel_equiv_is_val">val_rel_equiv_is_val</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="PFPL.Theorems_Eval.html#values_do_not_evaluate_1">values_do_not_evaluate_1</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;- <span class="id">reflexivity</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Correcteness of the small-step implementation (part 1) </div>
<span class="kwd">Lemma</span> <span class="id"><a name="eval_correct_1">eval_correct_1</a></span> : <span class="kwd">forall</span> <span class="id">e</span> <span class="id">e</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="PFPL.Definitions.html#eval">eval</a></span> <span class="id">e</span> = <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">e</span>' -&gt; <span class="id"><a href="PFPL.Definitions.html#Eval">Eval</a></span> <span class="id">e</span> <span class="id">e</span>'.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof5')">Proof.</span></div>
<div class="proofscript" id="proof5">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">e</span>; <span class="id">intros</span>; <span class="id">simpl</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;- <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;- <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;- <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;- <span class="id">case_eq</span> (<span class="id"><a href="PFPL.Definitions.html#eval">eval</a></span> <span class="id">e1</span>); <span class="id">intros</span>; <span class="id">rewrite</span> <span class="id">H0</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">assert</span> (<span class="id">T</span> := <span class="id"><a href="PFPL.Theorems_Eval.html#values_do_not_evaluate_2">values_do_not_evaluate_2</a></span> <span class="id">e1</span> <span class="id">e</span> <span class="id">H0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">T</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">e1</span>; <span class="id">simpl</span> <span class="kwd">in</span> <span class="id">T</span>; <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>: <span class="id">inversion</span> <span class="id">H</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>: <span class="id">apply</span> <span class="id"><a href="PFPL.Definitions.html#evalPlus2">evalPlus2</a></span>; <span class="id">apply</span> <span class="id">IHe1</span>; <span class="id">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">case_eq</span> (<span class="id"><a href="PFPL.Definitions.html#eval">eval</a></span> <span class="id">e2</span>); <span class="id">intros</span>; <span class="id">rewrite</span> <span class="id">H1</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">case_eq</span> (<span class="id"><a href="PFPL.Definitions.html#is_val">is_val</a></span> <span class="id">e1</span>); <span class="id">intros</span>; <span class="id">rewrite</span> <span class="id">H2</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> &lt;- <span class="id"><a href="PFPL.Definitions.html#val_rel_equiv_is_val">val_rel_equiv_is_val</a></span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cut</span> (<span class="id">e</span>' = (<span class="id"><a href="PFPL.Definitions.html#EPlus">EPlus</a></span> <span class="id">e1</span> <span class="id">e</span>)). <span class="id">intro</span>. <span class="id">subst</span> <span class="id">e</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="PFPL.Definitions.html#evalPlus3">evalPlus3</a></span>. <span class="id">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">IHe2</span>. <span class="id">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">T</span> := <span class="id"><a href="PFPL.Theorems_Eval.html#values_do_not_evaluate_2">values_do_not_evaluate_2</a></span> <span class="id">e2</span> <span class="id">e</span> <span class="id">H1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">e2</span>; <span class="id">simpl</span> <span class="kwd">in</span> <span class="id">T</span>; <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>: <span class="id">destruct</span> <span class="id">e1</span>; <span class="id">inversion</span> <span class="id">H</span>; <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">e1</span>; <span class="id">simpl</span> <span class="kwd">in</span> <span class="id">H2</span>; <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">destruct</span> <span class="id">e1</span>; <span class="id">unfold</span> <span class="id"><a href="PFPL.Definitions.html#is_val">is_val</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>: <span class="id">destruct</span> <span class="id">e2</span>; <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inversion</span> <span class="id">H</span>. <span class="id">subst</span>. <span class="id">apply</span> <span class="id"><a href="PFPL.Definitions.html#evalPlus1">evalPlus1</a></span>. <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id">case_eq</span> (<span class="id"><a href="PFPL.Definitions.html#eval">eval</a></span> <span class="id">e1</span>); <span class="id">intros</span>; <span class="id">rewrite</span> <span class="id">H0</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">assert</span> (<span class="id">T</span> := <span class="id"><a href="PFPL.Theorems_Eval.html#values_do_not_evaluate_2">values_do_not_evaluate_2</a></span> <span class="id">e1</span> <span class="id">e</span> <span class="id">H0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">T</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">e1</span>; <span class="id">simpl</span> <span class="kwd">in</span> <span class="id">T</span>; <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>: <span class="id">inversion</span> <span class="id">H</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>: <span class="id">apply</span> <span class="id"><a href="PFPL.Definitions.html#evalTimes2">evalTimes2</a></span>; <span class="id">apply</span> <span class="id">IHe1</span>; <span class="id">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">case_eq</span> (<span class="id"><a href="PFPL.Definitions.html#eval">eval</a></span> <span class="id">e2</span>); <span class="id">intros</span>; <span class="id">rewrite</span> <span class="id">H1</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">case_eq</span> (<span class="id"><a href="PFPL.Definitions.html#is_val">is_val</a></span> <span class="id">e1</span>); <span class="id">intros</span>; <span class="id">rewrite</span> <span class="id">H2</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> &lt;- <span class="id"><a href="PFPL.Definitions.html#val_rel_equiv_is_val">val_rel_equiv_is_val</a></span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cut</span> (<span class="id">e</span>' = (<span class="id"><a href="PFPL.Definitions.html#ETimes">ETimes</a></span> <span class="id">e1</span> <span class="id">e</span>)). <span class="id">intro</span>. <span class="id">subst</span> <span class="id">e</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="PFPL.Definitions.html#evalTimes3">evalTimes3</a></span>. <span class="id">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">IHe2</span>. <span class="id">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">T</span> := <span class="id"><a href="PFPL.Theorems_Eval.html#values_do_not_evaluate_2">values_do_not_evaluate_2</a></span> <span class="id">e2</span> <span class="id">e</span> <span class="id">H1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">e2</span>; <span class="id">simpl</span> <span class="kwd">in</span> <span class="id">T</span>; <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>: <span class="id">destruct</span> <span class="id">e1</span>; <span class="id">inversion</span> <span class="id">H</span>; <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">e1</span>; <span class="id">simpl</span> <span class="kwd">in</span> <span class="id">H2</span>; <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">destruct</span> <span class="id">e1</span>; <span class="id">unfold</span> <span class="id"><a href="PFPL.Definitions.html#is_val">is_val</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>: <span class="id">destruct</span> <span class="id">e2</span>; <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inversion</span> <span class="id">H</span>. <span class="id">subst</span>. <span class="id">apply</span> <span class="id"><a href="PFPL.Definitions.html#evalTimes1">evalTimes1</a></span>. <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id">case_eq</span> (<span class="id"><a href="PFPL.Definitions.html#eval">eval</a></span> <span class="id">e1</span>); <span class="id">intros</span>; <span class="id">rewrite</span> <span class="id">H0</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">assert</span> (<span class="id">T</span> := <span class="id"><a href="PFPL.Theorems_Eval.html#values_do_not_evaluate_2">values_do_not_evaluate_2</a></span> <span class="id">e1</span> <span class="id">e</span> <span class="id">H0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">T</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">e1</span>; <span class="id">simpl</span> <span class="kwd">in</span> <span class="id">T</span>; <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>: <span class="id">inversion</span> <span class="id">H</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>: <span class="id">apply</span> <span class="id"><a href="PFPL.Definitions.html#evalCat2">evalCat2</a></span>; <span class="id">apply</span> <span class="id">IHe1</span>; <span class="id">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">case_eq</span> (<span class="id"><a href="PFPL.Definitions.html#eval">eval</a></span> <span class="id">e2</span>); <span class="id">intros</span>; <span class="id">rewrite</span> <span class="id">H1</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">case_eq</span> (<span class="id"><a href="PFPL.Definitions.html#is_val">is_val</a></span> <span class="id">e1</span>); <span class="id">intros</span>; <span class="id">rewrite</span> <span class="id">H2</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> &lt;- <span class="id"><a href="PFPL.Definitions.html#val_rel_equiv_is_val">val_rel_equiv_is_val</a></span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cut</span> (<span class="id">e</span>' = (<span class="id"><a href="PFPL.Definitions.html#ECat">ECat</a></span> <span class="id">e1</span> <span class="id">e</span>)). <span class="id">intro</span>. <span class="id">subst</span> <span class="id">e</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="PFPL.Definitions.html#evalCat3">evalCat3</a></span>. <span class="id">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">IHe2</span>. <span class="id">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">T</span> := <span class="id"><a href="PFPL.Theorems_Eval.html#values_do_not_evaluate_2">values_do_not_evaluate_2</a></span> <span class="id">e2</span> <span class="id">e</span> <span class="id">H1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">e2</span>; <span class="id">simpl</span> <span class="kwd">in</span> <span class="id">T</span>; <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>: <span class="id">destruct</span> <span class="id">e1</span>; <span class="id">inversion</span> <span class="id">H</span>; <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">e1</span>; <span class="id">simpl</span> <span class="kwd">in</span> <span class="id">H2</span>; <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">destruct</span> <span class="id">e1</span>; <span class="id">unfold</span> <span class="id"><a href="PFPL.Definitions.html#is_val">is_val</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>: <span class="id">destruct</span> <span class="id">e2</span>; <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inversion</span> <span class="id">H</span>. <span class="id">subst</span>. <span class="id">apply</span> <span class="id"><a href="PFPL.Definitions.html#evalCat1">evalCat1</a></span>. <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id">case_eq</span> (<span class="id"><a href="PFPL.Definitions.html#eval">eval</a></span> <span class="id">e</span>); <span class="id">intros</span>; <span class="id">rewrite</span> <span class="id">H0</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">destruct</span> <span class="id">e</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>: <span class="id">inversion</span> <span class="id">H</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>: <span class="id">try</span> (<span class="id">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="id">discriminate</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>: <span class="id">apply</span> <span class="id"><a href="PFPL.Definitions.html#evalLen2">evalLen2</a></span>; <span class="id">apply</span> <span class="id">IHe</span>; <span class="id">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">destruct</span> <span class="id">e</span>; <span class="id">try</span> <span class="id">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inversion</span> <span class="id">H</span>. <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="PFPL.Definitions.html#evalLen1">evalLen1</a></span>. <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id">case_eq</span> (<span class="id"><a href="PFPL.Definitions.html#is_val">is_val</a></span> <span class="id">e1</span>); <span class="id">intros</span>; <span class="id">rewrite</span> <span class="id">H0</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">rewrite</span> &lt;- <span class="id"><a href="PFPL.Definitions.html#val_rel_equiv_is_val">val_rel_equiv_is_val</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inversion</span> <span class="id">H</span>. <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="PFPL.Definitions.html#evalLet2">evalLet2</a></span>; <span class="id">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">case_eq</span> (<span class="id"><a href="PFPL.Definitions.html#eval">eval</a></span> <span class="id">e1</span>); <span class="id">intros</span>; <span class="id">rewrite</span> <span class="id">H1</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inversion</span> <span class="id">H</span>. <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="PFPL.Definitions.html#evalLet1">evalLet1</a></span>. <span class="id">apply</span> <span class="id">IHe1</span>. <span class="id">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">discriminate</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Correcteness of the small-step implementation (part 2) </div>
<span class="kwd">Lemma</span> <span class="id"><a name="eval_correct_2">eval_correct_2</a></span> : <span class="kwd">forall</span> <span class="id">e</span> <span class="id">e</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="PFPL.Definitions.html#Eval">Eval</a></span> <span class="id">e</span> <span class="id">e</span>' -&gt; <span class="id"><a href="PFPL.Definitions.html#eval">eval</a></span> <span class="id">e</span> = <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">e</span>'.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof6')">Proof.</span></div>
<div class="proofscript" id="proof6">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">e</span> <span class="id">e</span>' <span class="id">H</span>. <span class="id">induction</span> <span class="id">H</span>; <span class="id">subst</span>; <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;- <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id">rewrite</span> <span class="id">IHEval</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id"><a href="PFPL.Theorems_Eval.html#values_do_not_evaluate_2">values_do_not_evaluate_2</a></span> <span class="id">e1</span> <span class="id">e1</span>' <span class="id">IHEval</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">e1</span>; <span class="id">try</span> (<span class="id">simpl</span> <span class="kwd">in</span> <span class="id">IHEval</span>; <span class="id">discriminate</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>: <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id">rewrite</span> <span class="id">IHEval</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="PFPL.Definitions.html#val_rel_equiv_is_val">val_rel_equiv_is_val</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="id">rewrite</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">T</span> := <span class="id"><a href="PFPL.Theorems_Eval.html#values_do_not_evaluate_2">values_do_not_evaluate_2</a></span> <span class="id">e2</span> <span class="id">e2</span>' <span class="id">IHEval</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">e2</span>; <span class="id">try</span> (<span class="id">simpl</span> <span class="kwd">in</span> <span class="id">T</span>; <span class="id">discriminate</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>: <span class="id">destruct</span> <span class="id">e1</span>; <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id">rewrite</span> <span class="id">IHEval</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id"><a href="PFPL.Theorems_Eval.html#values_do_not_evaluate_2">values_do_not_evaluate_2</a></span> <span class="id">e1</span> <span class="id">e1</span>' <span class="id">IHEval</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">e1</span>; <span class="id">try</span> (<span class="id">simpl</span> <span class="kwd">in</span> <span class="id">IHEval</span>; <span class="id">discriminate</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>: <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id">rewrite</span> <span class="id">IHEval</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="PFPL.Definitions.html#val_rel_equiv_is_val">val_rel_equiv_is_val</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="id">rewrite</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">T</span> := <span class="id"><a href="PFPL.Theorems_Eval.html#values_do_not_evaluate_2">values_do_not_evaluate_2</a></span> <span class="id">e2</span> <span class="id">e2</span>' <span class="id">IHEval</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">e2</span>; <span class="id">try</span> (<span class="id">simpl</span> <span class="kwd">in</span> <span class="id">T</span>; <span class="id">discriminate</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>: <span class="id">destruct</span> <span class="id">e1</span>; <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id">rewrite</span> <span class="id">IHEval</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id"><a href="PFPL.Theorems_Eval.html#values_do_not_evaluate_2">values_do_not_evaluate_2</a></span> <span class="id">e1</span> <span class="id">e1</span>' <span class="id">IHEval</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">e1</span>; <span class="id">try</span> (<span class="id">simpl</span> <span class="kwd">in</span> <span class="id">IHEval</span>; <span class="id">discriminate</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>: <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id">rewrite</span> <span class="id">IHEval</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="PFPL.Definitions.html#val_rel_equiv_is_val">val_rel_equiv_is_val</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="id">rewrite</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">T</span> := <span class="id"><a href="PFPL.Theorems_Eval.html#values_do_not_evaluate_2">values_do_not_evaluate_2</a></span> <span class="id">e2</span> <span class="id">e2</span>' <span class="id">IHEval</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">e2</span>; <span class="id">try</span> (<span class="id">simpl</span> <span class="kwd">in</span> <span class="id">T</span>; <span class="id">discriminate</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>: <span class="id">destruct</span> <span class="id">e1</span>; <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id">rewrite</span> <span class="id">IHEval</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">e1</span>; <span class="id">try</span> (<span class="id">simpl</span> <span class="kwd">in</span> <span class="id">IHEval</span>; <span class="id">discriminate</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>: <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id">rewrite</span> <span class="id">IHEval</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id"><a href="PFPL.Theorems_Eval.html#values_do_not_evaluate_2">values_do_not_evaluate_2</a></span> <span class="id">e1</span> <span class="id">e1</span>' <span class="id">IHEval</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id">rewrite</span> <span class="id"><a href="PFPL.Definitions.html#val_rel_equiv_is_val">val_rel_equiv_is_val</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="id">rewrite</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">reflexivity</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Correcteness of the small-step implementation </div>
<span class="kwd">Theorem</span> <span class="id"><a name="eval_correct">eval_correct</a></span> : <span class="kwd">forall</span> <span class="id">e</span> <span class="id">e</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="PFPL.Definitions.html#Eval">Eval</a></span> <span class="id">e</span> <span class="id">e</span>' &lt;-&gt; <span class="id"><a href="PFPL.Definitions.html#eval">eval</a></span> <span class="id">e</span> = <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">e</span>'.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof7')">Proof.</span></div>
<div class="proofscript" id="proof7">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="PFPL.Theorems_Eval.html#eval_correct_2">eval_correct_2</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="PFPL.Theorems_Eval.html#eval_correct_1">eval_correct_1</a></span>.<br/>
Qed.</div>
<br/>
<div class="doc">Substitution is able to reduce the number of subexpressions (auxiliary) </div>
<span class="kwd">Lemma</span> <span class="id">subst</span>'<span class="id">_reduces_aux</span> : <span class="kwd">forall</span> <span class="id">e1</span> <span class="id">x</span> <span class="id">e2</span> <span class="id">e2</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="PFPL.Definitions.html#subexprs_count">subexprs_count</a></span> <span class="id">e1</span> = 1 -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="PFPL.Definitions.html#subexprs_count">subexprs_count</a></span> <span class="id">e2</span> = <span class="id"><a href="PFPL.Definitions.html#subexprs_count">subexprs_count</a></span> <span class="id">e2</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="PFPL.Definitions.html#subexprs_count">subexprs_count</a></span> (<span class="id">subst</span>' <span class="id">e1</span> <span class="id">x</span> <span class="id">e2</span>) = <span class="id"><a href="PFPL.Definitions.html#subexprs_count">subexprs_count</a></span> <span class="id">e2</span>'.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof8')">Proof.</span></div>
<div class="proofscript" id="proof8">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">e1</span> <span class="id">x</span>. <span class="id">induction</span> <span class="id">e2</span>; <span class="id">intros</span>; <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;- <span class="id">simpl</span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="id">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id">simpl</span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="id">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id">simpl</span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="id">destruct</span> (<span class="id">x</span> =? <span class="id">x0</span>); <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">H</span>. <span class="id">all</span>: <span class="id">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id">rewrite</span> &lt;- <span class="id">H0</span>. <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span>(<span class="id">IHe2_1</span> := <span class="id">IHe2_1</span> <span class="id">e2_1</span> <span class="id">H</span>). <span class="id">assert</span>(<span class="id">IHe2_2</span> := <span class="id">IHe2_2</span> <span class="id">e2_2</span> <span class="id">H</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">IHe2_1</span>. <span class="id">rewrite</span> <span class="id">IHe2_2</span>. <span class="id">all</span>: <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id">rewrite</span> &lt;- <span class="id">H0</span>. <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span>(<span class="id">IHe2_1</span> := <span class="id">IHe2_1</span> <span class="id">e2_1</span> <span class="id">H</span>). <span class="id">assert</span>(<span class="id">IHe2_2</span> := <span class="id">IHe2_2</span> <span class="id">e2_2</span> <span class="id">H</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">IHe2_1</span>. <span class="id">rewrite</span> <span class="id">IHe2_2</span>. <span class="id">all</span>: <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id">rewrite</span> &lt;- <span class="id">H0</span>. <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span>(<span class="id">IHe2_1</span> := <span class="id">IHe2_1</span> <span class="id">e2_1</span> <span class="id">H</span>). <span class="id">assert</span>(<span class="id">IHe2_2</span> := <span class="id">IHe2_2</span> <span class="id">e2_2</span> <span class="id">H</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">IHe2_1</span>. <span class="id">rewrite</span> <span class="id">IHe2_2</span>. <span class="id">all</span>: <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id">rewrite</span> &lt;- <span class="id">H0</span>. <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span>(<span class="id">IHe2</span> := <span class="id">IHe2</span> <span class="id">e2</span> <span class="id">H</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">IHe2</span>. <span class="id">all</span>: <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id">rewrite</span> &lt;- <span class="id">H0</span>. <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span>(<span class="id">IHe2_1</span> := <span class="id">IHe2_1</span> <span class="id">e2_1</span> <span class="id">H</span>). <span class="id">assert</span>(<span class="id">IHe2_2</span> := <span class="id">IHe2_2</span> <span class="id">e2_2</span> <span class="id">H</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> (<span class="id">x</span> =? <span class="id">x0</span>); <span class="id">simpl</span>; <span class="id">rewrite</span> <span class="id">IHe2_1</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">try</span> <span class="id">rewrite</span> <span class="id">IHe2_2</span>; <span class="id">reflexivity</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Substitution is able to reduce the number of subexpressions </div>
<span class="kwd">Lemma</span> <span class="id">subst</span>'<span class="id">_reduces</span> : <span class="kwd">forall</span> <span class="id">e1</span> <span class="id">x</span> <span class="id">e2</span> <span class="id">e2</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="PFPL.Definitions.html#subexprs_count">subexprs_count</a></span> <span class="id">e1</span> = 1 -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="PFPL.Definitions.html#subexprs_count">subexprs_count</a></span> <span class="id">e2</span> = <span class="id"><a href="PFPL.Definitions.html#subexprs_count">subexprs_count</a></span> <span class="id">e2</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="PFPL.Definitions.html#subexprs_count">subexprs_count</a></span> (<span class="id">subst</span>' <span class="id">e1</span> <span class="id">x</span> <span class="id">e2</span>) &lt; <span class="id"><a href="PFPL.Definitions.html#subexprs_count">subexprs_count</a></span> (<span class="id"><a href="PFPL.Definitions.html#ELet">ELet</a></span> <span class="id">e1</span> <span class="id">x</span> <span class="id">e2</span>').<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof9')">Proof.</span></div>
<div class="proofscript" id="proof9">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">rewrite</span> (<span class="id">subst</span>'<span class="id">_reduces_aux</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">e2</span>').<br/>
&nbsp;&nbsp;<span class="id">simpl</span>. <span class="id">lia</span>. <span class="id">auto</span>. <span class="id">auto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Fresh renamings keep the number of subexpressions </div>
<span class="kwd">Lemma</span> <span class="id"><a name="fresh_rename_keeps_count">fresh_rename_keeps_count</a></span> : <span class="kwd">forall</span> <span class="id">e</span> <span class="id">bv</span> <span class="id">o</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="PFPL.Definitions.html#subexprs_count">subexprs_count</a></span> <span class="id">e</span> = <span class="id"><a href="PFPL.Definitions.html#subexprs_count">subexprs_count</a></span> (<span class="id"><a href="PFPL.Definitions.html#fresh_rename">fresh_rename</a></span> <span class="id">e</span> <span class="id">bv</span> <span class="id">o</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof10')">Proof.</span></div>
<div class="proofscript" id="proof10">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">e</span>; <span class="id">intros</span>; <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;- <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id">destruct</span> (<span class="id">bv</span> <span class="id">x</span>); <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id">assert</span>(<span class="id">IHe1</span> := <span class="id">IHe1</span> <span class="id">bv</span> <span class="id">o</span>). <span class="id">assert</span>(<span class="id">IHe2</span> := <span class="id">IHe2</span> <span class="id">bv</span> <span class="id">o</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">IHe1</span>. <span class="id">rewrite</span> <span class="id">IHe2</span>. <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id">assert</span>(<span class="id">IHe1</span> := <span class="id">IHe1</span> <span class="id">bv</span> <span class="id">o</span>). <span class="id">assert</span>(<span class="id">IHe2</span> := <span class="id">IHe2</span> <span class="id">bv</span> <span class="id">o</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">IHe1</span>. <span class="id">rewrite</span> <span class="id">IHe2</span>. <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id">assert</span>(<span class="id">IHe1</span> := <span class="id">IHe1</span> <span class="id">bv</span> <span class="id">o</span>). <span class="id">assert</span>(<span class="id">IHe2</span> := <span class="id">IHe2</span> <span class="id">bv</span> <span class="id">o</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">IHe1</span>. <span class="id">rewrite</span> <span class="id">IHe2</span>. <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id">assert</span>(<span class="id">IHe</span> := <span class="id">IHe</span> <span class="id">bv</span> <span class="id">o</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">IHe</span>. <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id">assert</span>(<span class="id">IHe1</span> := <span class="id">IHe1</span> <span class="id">bv</span> <span class="id">o</span>). <span class="id">assert</span>(<span class="id">IHe2</span> := <span class="id">IHe2</span> (<span class="id"><a href="PFPL.PartialMap_Set.html#updateSet">updateSet</a></span> <span class="id">bv</span> <span class="id">x</span>) <span class="id">o</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">IHe1</span>. <span class="id">rewrite</span> <span class="id">IHe2</span>. <span class="id">reflexivity</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Substitution with capture-avoidance is able to reduce the number of subexpressions </div>
<span class="kwd">Lemma</span> <span class="id"><a name="subst_reduces">subst_reduces</a></span> : <span class="kwd">forall</span> <span class="id">e1</span> <span class="id">x</span> <span class="id">e2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="PFPL.Definitions.html#subexprs_count">subexprs_count</a></span> <span class="id">e1</span> = 1 -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="PFPL.Definitions.html#subexprs_count">subexprs_count</a></span> (<span class="id"><a href="PFPL.Definitions.html#subst">subst</a></span> <span class="id">e1</span> <span class="id">x</span> <span class="id">e2</span>) &lt; <span class="id"><a href="PFPL.Definitions.html#subexprs_count">subexprs_count</a></span> (<span class="id"><a href="PFPL.Definitions.html#ELet">ELet</a></span> <span class="id">e1</span> <span class="id">x</span> <span class="id">e2</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof11')">Proof.</span></div>
<div class="proofscript" id="proof11">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">unfold</span> <span class="id"><a href="PFPL.Definitions.html#subst">subst</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id">subst</span>'<span class="id">_reduces</span>. <span class="id">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id">symmetry</span>. <span class="id">apply</span> <span class="id"><a href="PFPL.Theorems_Eval.html#fresh_rename_keeps_count">fresh_rename_keeps_count</a></span>.<br/>
Qed.</div>
<br/>
<div class="doc">Evaluation produces an expression with less subexpressions </div>
<span class="kwd">Lemma</span> <span class="id"><a name="eval_reduces">eval_reduces</a></span> : <span class="kwd">forall</span> <span class="id">e</span> <span class="id">e</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="PFPL.Definitions.html#Eval">Eval</a></span> <span class="id">e</span> <span class="id">e</span>' -&gt; <span class="id"><a href="PFPL.Definitions.html#subexprs_count">subexprs_count</a></span> <span class="id">e</span>' &lt; <span class="id"><a href="PFPL.Definitions.html#subexprs_count">subexprs_count</a></span> <span class="id">e</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof12')">Proof.</span></div>
<div class="proofscript" id="proof12">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">e</span> <span class="id">e</span>' <span class="id">H</span>. <span class="id">induction</span> <span class="id">H</span>; <span class="id">simpl</span>; <span class="id">try</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;<span class="id">inversion</span> <span class="id">H</span>; <span class="id">subst</span>; <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">T</span> := <span class="id"><a href="PFPL.Theorems_Eval.html#subst_reduces">subst_reduces</a></span> (<span class="id"><a href="PFPL.Definitions.html#ENum">ENum</a></span> <span class="id">n</span>) <span class="id">x</span> <span class="id">e2</span>).<br/>
&nbsp;&nbsp;<span class="id">simpl</span> <span class="kwd">in</span> <span class="id">T</span>. <span class="id">assert</span> (<span class="id">T</span> := <span class="id">T</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_refl">Logic.eq_refl</a></span>). <span class="id">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">T</span> := <span class="id"><a href="PFPL.Theorems_Eval.html#subst_reduces">subst_reduces</a></span> (<span class="id"><a href="PFPL.Definitions.html#EStr">EStr</a></span> <span class="id">s</span>) <span class="id">x</span> <span class="id">e2</span>).<br/>
&nbsp;&nbsp;<span class="id">simpl</span> <span class="kwd">in</span> <span class="id">T</span>. <span class="id">assert</span> (<span class="id">T</span> := <span class="id">T</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Logic.html#eq_refl">Logic.eq_refl</a></span>). <span class="id">assumption</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Evaluation function produces an expression with less subexpressions </div>
<span class="kwd">Corollary</span> <span class="id"><a name="eval_func_reduces">eval_func_reduces</a></span> : <span class="kwd">forall</span> <span class="id">e</span> <span class="id">e</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="PFPL.Definitions.html#eval">eval</a></span> <span class="id">e</span> = <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">e</span>' -&gt; <span class="id"><a href="PFPL.Definitions.html#subexprs_count">subexprs_count</a></span> <span class="id">e</span>' &lt; <span class="id"><a href="PFPL.Definitions.html#subexprs_count">subexprs_count</a></span> <span class="id">e</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof13')">Proof.</span></div>
<div class="proofscript" id="proof13">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="PFPL.Theorems_Eval.html#eval_correct">eval_correct</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="PFPL.Theorems_Eval.html#eval_reduces">eval_reduces</a></span>. <span class="id">assumption</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Big-step implementation </div>
<span class="kwd">Function</span> <span id="eval_big" class="id"><a href="PFPL.Theorems_Eval.html#eval_big">eval_big</a></span> (<span class="id">e</span> : <span class="id"><a href="PFPL.Definitions.html#EExp">EExp</a></span>) {<span class="id">measure</span> <span class="id"><a href="PFPL.Definitions.html#subexprs_count">subexprs_count</a></span> <span class="id">e</span>} : <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="PFPL.Definitions.html#EExp">EExp</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">e</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="PFPL.Definitions.html#ENum">ENum</a></span> <span class="id">n</span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="PFPL.Definitions.html#ENum">ENum</a></span> <span class="id">n</span>)<br/>
&nbsp;&nbsp;| <span class="id"><a href="PFPL.Definitions.html#EStr">EStr</a></span> <span class="id">s</span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="PFPL.Definitions.html#EStr">EStr</a></span> <span class="id">s</span>)<br/>
&nbsp;&nbsp;| <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="PFPL.Definitions.html#eval">eval</a></span> <span class="id">e</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">e</span>' =&gt; <span class="id"><a href="PFPL.Theorems_Eval.html#eval_big">eval_big</a></span> <span class="id">e</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof14')">Proof.</span></div>
<div class="proofscript" id="proof14">
<span class="id">all</span>: <span class="id">intros</span>; <span class="id">subst</span>.<br/>
<span class="id">inversion</span> <span class="id">teq0</span>.<br/>
<span class="id">all</span>: <span class="id">apply</span> <span class="id"><a href="PFPL.Theorems_Eval.html#eval_func_reduces">eval_func_reduces</a></span>; <span class="id">assumption</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Big-step implementation returns some value or none </div>
<span class="kwd">Lemma</span> <span class="id"><a name="eval_big_returns_value_or_none">eval_big_returns_value_or_none</a></span> : <span class="kwd">forall</span> <span class="id">e</span> <span class="id">e</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="PFPL.Theorems_Eval.html#eval_big">eval_big</a></span> <span class="id">e</span> = <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">e</span>' -&gt; <span class="id"><a href="PFPL.Definitions.html#Val">Val</a></span> <span class="id">e</span>'.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof15')">Proof.</span></div>
<div class="proofscript" id="proof15">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">e</span> <span class="id">e</span>'.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="PFPL.Theorems_Eval.html#eval_big_ind">eval_big_ind</a></span>; <span class="id">intros</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;<span class="id">inversion</span> <span class="id">H</span>; <span class="id">subst</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id">inversion</span> <span class="id">H</span>; <span class="id">subst</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id">H</span>. <span class="id">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id">discriminate</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Big-step evaluation returns a value </div>
<span class="kwd">Lemma</span> <span class="id"><a name="eval_big_gives_value">eval_big_gives_value</a></span> : <span class="kwd">forall</span> <span class="id">e</span> <span class="id">e</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="PFPL.Definitions.html#EvalBig">EvalBig</a></span> <span class="id">e</span> <span class="id">e</span>' -&gt; <span class="id"><a href="PFPL.Definitions.html#Val">Val</a></span> <span class="id">e</span>'.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof16')">Proof.</span></div>
<div class="proofscript" id="proof16">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">induction</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">all</span>: <span class="id">try</span> <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id">assumption</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Star evaluation to n-times evaluation (In Harper's book) </div>
<span class="kwd">Lemma</span> <span class="id"><a name="EvalStarToEvalN">EvalStarToEvalN</a></span> : <span class="kwd">forall</span> <span class="id">e</span> <span class="id">e</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="PFPL.Definitions.html#EvalStar">EvalStar</a></span> <span class="id">e</span> <span class="id">e</span>' -&gt; <span class="kwd">exists</span> <span class="id">n</span>, <span class="id"><a href="PFPL.Definitions.html#EvalN">EvalN</a></span> <span class="id">e</span> <span class="id">e</span>' <span class="id">n</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof17')">Proof.</span></div>
<div class="proofscript" id="proof17">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">induction</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;- <span class="kwd">exists</span> 0. <span class="id">apply</span> <span class="id"><a href="PFPL.Definitions.html#eval0">eval0</a></span>.<br/>
&nbsp;&nbsp;- <span class="id">destruct</span> <span class="id">IHEvalStar</span>. <span class="kwd">exists</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> (<span class="id"><a href="PFPL.Definitions.html#evalN">evalN</a></span> <span class="id">_</span> <span class="id">e</span>'' <span class="id">e</span>'); <span class="id">assumption</span>.<br/>
Qed.</div>
<br/>
<div class="doc">N-times evaluation to star evaluation (In Harper's book) </div>
<span class="kwd">Lemma</span> <span class="id"><a name="EvalNToEvalStar">EvalNToEvalStar</a></span> : <span class="kwd">forall</span> <span class="id">e</span> <span class="id">e</span>',<br/>
&nbsp;&nbsp;(<span class="kwd">exists</span> <span class="id">n</span>, <span class="id"><a href="PFPL.Definitions.html#EvalN">EvalN</a></span> <span class="id">e</span> <span class="id">e</span>' <span class="id">n</span>) -&gt; <span class="id"><a href="PFPL.Definitions.html#EvalStar">EvalStar</a></span> <span class="id">e</span> <span class="id">e</span>'.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof18')">Proof.</span></div>
<div class="proofscript" id="proof18">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> <span class="id">H</span>. <span class="id">induction</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;- <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="id">apply</span> (<span class="id"><a href="PFPL.Definitions.html#starN">starN</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">e</span>'); <span class="id">assumption</span>.<br/>
Qed.</div>
<br/>
<div class="doc">The big-step evaluation is deterministic </div>
<span class="kwd">Lemma</span> <span class="id"><a name="eval_big_deterministic">eval_big_deterministic</a></span> : <span class="kwd">forall</span> <span class="id">e</span> <span class="id">e</span>' <span class="id">e</span>'',<br/>
&nbsp;&nbsp;<span class="id"><a href="PFPL.Definitions.html#EvalBig">EvalBig</a></span> <span class="id">e</span> <span class="id">e</span>' -&gt; <span class="id"><a href="PFPL.Definitions.html#EvalBig">EvalBig</a></span> <span class="id">e</span> <span class="id">e</span>'' -&gt; <span class="id">e</span>' = <span class="id">e</span>''.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof19')">Proof.</span></div>
<div class="proofscript" id="proof19">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">e</span> <span class="id">e</span>' <span class="id">e</span>'' <span class="id">H</span>. <span class="id">generalize</span> <span class="id">dependent</span> <span class="id">e</span>''.<br/>
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">H</span>; <span class="id">subst</span>; <span class="id">intros</span>.<br/>
&nbsp;&nbsp;- <span class="id">inversion</span> <span class="id">H</span>; <span class="id">subst</span>. <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id">inversion</span> <span class="id">H</span>; <span class="id">subst</span>. <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id">inversion</span> <span class="id">H1</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">IHEvalBig1</span> := <span class="id">IHEvalBig1</span> (<span class="id"><a href="PFPL.Definitions.html#ENum">ENum</a></span> <span class="id">n0</span>) <span class="id">H4</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">IHEvalBig2</span> := <span class="id">IHEvalBig2</span> (<span class="id"><a href="PFPL.Definitions.html#ENum">ENum</a></span> <span class="id">n3</span>) <span class="id">H6</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inversion</span> <span class="id">IHEvalBig1</span>. <span class="id">inversion</span> <span class="id">IHEvalBig2</span>. <span class="id">subst</span>. <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id">inversion</span> <span class="id">H1</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">IHEvalBig1</span> := <span class="id">IHEvalBig1</span> (<span class="id"><a href="PFPL.Definitions.html#ENum">ENum</a></span> <span class="id">n0</span>) <span class="id">H4</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">IHEvalBig2</span> := <span class="id">IHEvalBig2</span> (<span class="id"><a href="PFPL.Definitions.html#ENum">ENum</a></span> <span class="id">n3</span>) <span class="id">H6</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inversion</span> <span class="id">IHEvalBig1</span>. <span class="id">inversion</span> <span class="id">IHEvalBig2</span>. <span class="id">subst</span>. <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id">inversion</span> <span class="id">H1</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">IHEvalBig1</span> := <span class="id">IHEvalBig1</span> (<span class="id"><a href="PFPL.Definitions.html#EStr">EStr</a></span> <span class="id">s0</span>) <span class="id">H4</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">IHEvalBig2</span> := <span class="id">IHEvalBig2</span> (<span class="id"><a href="PFPL.Definitions.html#EStr">EStr</a></span> <span class="id">s3</span>) <span class="id">H6</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inversion</span> <span class="id">IHEvalBig1</span>. <span class="id">inversion</span> <span class="id">IHEvalBig2</span>. <span class="id">subst</span>. <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id">inversion</span> <span class="id">H0</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">IHEvalBig</span> := <span class="id">IHEvalBig</span> (<span class="id"><a href="PFPL.Definitions.html#EStr">EStr</a></span> <span class="id">s0</span>) <span class="id">H2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inversion</span> <span class="id">IHEvalBig</span>. <span class="id">subst</span>. <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id">inversion</span> <span class="id">H1</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">IHEvalBig1</span> := <span class="id">IHEvalBig1</span> <span class="id">e1</span>'0 <span class="id">H6</span>). <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">IHEvalBig2</span>. <span class="id">assumption</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Split <span class="bracket"><span class="id">EPlus</span></span> evaluation (part 1) </div>
<span class="kwd">Lemma</span> <span class="id"><a name="plus_seq">plus_seq</a></span> : <span class="kwd">forall</span> <span class="id">n</span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="PFPL.Definitions.html#EvalN">EvalN</a></span> (<span class="id"><a href="PFPL.Definitions.html#EPlus">EPlus</a></span> <span class="id">e1</span> <span class="id">e2</span>) (<span class="id"><a href="PFPL.Definitions.html#ENum">ENum</a></span> <span class="id">x</span>) <span class="id">n</span>) -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">exists</span> <span class="id">x1</span> <span class="id">x2</span> <span class="id">n0</span> <span class="id">n1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="PFPL.Definitions.html#EvalN">EvalN</a></span> <span class="id">e1</span> (<span class="id"><a href="PFPL.Definitions.html#ENum">ENum</a></span> <span class="id">x1</span>) <span class="id">n0</span> /\ <span class="id"><a href="PFPL.Definitions.html#EvalN">EvalN</a></span> <span class="id">e2</span> (<span class="id"><a href="PFPL.Definitions.html#ENum">ENum</a></span> <span class="id">x2</span>) <span class="id">n1</span> /\ <span class="id">x</span> = <span class="id">x1</span> + <span class="id">x2</span> /\ <span class="id">n</span> = 1 + <span class="id">n0</span> + <span class="id">n1</span><br/>
&nbsp;&nbsp;).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof20')">Proof.</span></div>
<div class="proofscript" id="proof20">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">n</span>; <span class="id">intros</span>; <span class="id">inversion</span> <span class="id">H</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;<span class="id">inversion</span> <span class="id">H1</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;- <span class="id">inversion</span> <span class="id">H4</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> <span class="id">n1</span>. <span class="kwd">exists</span> <span class="id">n2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> 0. <span class="kwd">exists</span> 0. <span class="id">repeat</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="PFPL.Definitions.html#eval0">eval0</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="PFPL.Definitions.html#eval0">eval0</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inversion</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;- <span class="id">apply</span> <span class="id">IHn</span> <span class="kwd">in</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">H4</span> <span class="kwd">as</span> [<span class="id">x1</span> [<span class="id">x2</span> [<span class="id">n0</span> [<span class="id">n1</span> [<span class="id">H4</span> [<span class="id">H4</span>' [<span class="id">H4</span>'' <span class="id">H4</span>''']]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> <span class="id">x1</span>. <span class="kwd">exists</span> <span class="id">x2</span>. <span class="kwd">exists</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n0</span>). <span class="kwd">exists</span> <span class="id">n1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">repeat</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> (<span class="id"><a href="PFPL.Definitions.html#evalN">evalN</a></span> <span class="id">_</span> <span class="id">e1</span>'); <span class="id">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assumption</span>. <span class="id">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span>. <span class="id">f_equal</span>. <span class="id">simpl</span> <span class="kwd">in</span> <span class="id">H4</span>'''. <span class="id">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id">apply</span> <span class="id">IHn</span> <span class="kwd">in</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">H4</span> <span class="kwd">as</span> [<span class="id">x1</span> [<span class="id">x2</span> [<span class="id">n0</span> [<span class="id">n1</span> [<span class="id">H4</span> [<span class="id">H4</span>' [<span class="id">H4</span>'' <span class="id">H4</span>''']]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> <span class="id">x1</span>. <span class="kwd">exists</span> <span class="id">x2</span>. <span class="kwd">exists</span> <span class="id">n0</span>. <span class="kwd">exists</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">repeat</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assumption</span>. <span class="id">apply</span> (<span class="id"><a href="PFPL.Definitions.html#evalN">evalN</a></span> <span class="id">_</span> <span class="id">e2</span>'); <span class="id">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span>. <span class="id">f_equal</span>. <span class="id">simpl</span> <span class="kwd">in</span> <span class="id">H4</span>'''. <span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Split <span class="bracket"><span class="id">ETimes</span></span> evaluation (part 1) </div>
<span class="kwd">Lemma</span> <span class="id"><a name="times_seq">times_seq</a></span> : <span class="kwd">forall</span> <span class="id">n</span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="PFPL.Definitions.html#EvalN">EvalN</a></span> (<span class="id"><a href="PFPL.Definitions.html#ETimes">ETimes</a></span> <span class="id">e1</span> <span class="id">e2</span>) (<span class="id"><a href="PFPL.Definitions.html#ENum">ENum</a></span> <span class="id">x</span>) <span class="id">n</span>) -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">exists</span> <span class="id">x1</span> <span class="id">x2</span> <span class="id">n0</span> <span class="id">n1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="PFPL.Definitions.html#EvalN">EvalN</a></span> <span class="id">e1</span> (<span class="id"><a href="PFPL.Definitions.html#ENum">ENum</a></span> <span class="id">x1</span>) <span class="id">n0</span> /\ <span class="id"><a href="PFPL.Definitions.html#EvalN">EvalN</a></span> <span class="id">e2</span> (<span class="id"><a href="PFPL.Definitions.html#ENum">ENum</a></span> <span class="id">x2</span>) <span class="id">n1</span> /\ <span class="id">x</span> = <span class="id">x1</span> * <span class="id">x2</span> /\ <span class="id">n</span> = 1 + <span class="id">n0</span> + <span class="id">n1</span><br/>
&nbsp;&nbsp;).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof21')">Proof.</span></div>
<div class="proofscript" id="proof21">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">n</span>; <span class="id">intros</span>; <span class="id">inversion</span> <span class="id">H</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;<span class="id">inversion</span> <span class="id">H1</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;- <span class="id">inversion</span> <span class="id">H4</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> <span class="id">n1</span>. <span class="kwd">exists</span> <span class="id">n2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> 0. <span class="kwd">exists</span> 0. <span class="id">repeat</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="PFPL.Definitions.html#eval0">eval0</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="PFPL.Definitions.html#eval0">eval0</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inversion</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;- <span class="id">apply</span> <span class="id">IHn</span> <span class="kwd">in</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">H4</span> <span class="kwd">as</span> [<span class="id">x1</span> [<span class="id">x2</span> [<span class="id">n0</span> [<span class="id">n1</span> [<span class="id">H4</span> [<span class="id">H4</span>' [<span class="id">H4</span>'' <span class="id">H4</span>''']]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> <span class="id">x1</span>. <span class="kwd">exists</span> <span class="id">x2</span>. <span class="kwd">exists</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n0</span>). <span class="kwd">exists</span> <span class="id">n1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">repeat</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> (<span class="id"><a href="PFPL.Definitions.html#evalN">evalN</a></span> <span class="id">_</span> <span class="id">e1</span>'); <span class="id">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assumption</span>. <span class="id">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span>. <span class="id">f_equal</span>. <span class="id">simpl</span> <span class="kwd">in</span> <span class="id">H4</span>'''. <span class="id">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id">apply</span> <span class="id">IHn</span> <span class="kwd">in</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">H4</span> <span class="kwd">as</span> [<span class="id">x1</span> [<span class="id">x2</span> [<span class="id">n0</span> [<span class="id">n1</span> [<span class="id">H4</span> [<span class="id">H4</span>' [<span class="id">H4</span>'' <span class="id">H4</span>''']]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> <span class="id">x1</span>. <span class="kwd">exists</span> <span class="id">x2</span>. <span class="kwd">exists</span> <span class="id">n0</span>. <span class="kwd">exists</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">repeat</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assumption</span>. <span class="id">apply</span> (<span class="id"><a href="PFPL.Definitions.html#evalN">evalN</a></span> <span class="id">_</span> <span class="id">e2</span>'); <span class="id">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span>. <span class="id">f_equal</span>. <span class="id">simpl</span> <span class="kwd">in</span> <span class="id">H4</span>'''. <span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Split <span class="bracket"><span class="id">ECat</span></span> evaluation (part 1) </div>
<span class="kwd">Lemma</span> <span class="id"><a name="cat_seq">cat_seq</a></span> : <span class="kwd">forall</span> <span class="id">n</span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="PFPL.Definitions.html#EvalN">EvalN</a></span> (<span class="id"><a href="PFPL.Definitions.html#ECat">ECat</a></span> <span class="id">e1</span> <span class="id">e2</span>) (<span class="id"><a href="PFPL.Definitions.html#EStr">EStr</a></span> <span class="id">x</span>) <span class="id">n</span>) -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">exists</span> <span class="id">x1</span> <span class="id">x2</span> <span class="id">n0</span> <span class="id">n1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="PFPL.Definitions.html#EvalN">EvalN</a></span> <span class="id">e1</span> (<span class="id"><a href="PFPL.Definitions.html#EStr">EStr</a></span> <span class="id">x1</span>) <span class="id">n0</span> /\ <span class="id"><a href="PFPL.Definitions.html#EvalN">EvalN</a></span> <span class="id">e2</span> (<span class="id"><a href="PFPL.Definitions.html#EStr">EStr</a></span> <span class="id">x2</span>) <span class="id">n1</span> /\ <span class="id">x</span> = <span class="id"><a href="https://coq.inria.fr/library/Coq.Strings.String.html#append">append</a></span> <span class="id">x1</span> <span class="id">x2</span> /\ <span class="id">n</span> = 1 + <span class="id">n0</span> + <span class="id">n1</span><br/>
&nbsp;&nbsp;).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof22')">Proof.</span></div>
<div class="proofscript" id="proof22">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">n</span>; <span class="id">intros</span>; <span class="id">inversion</span> <span class="id">H</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;<span class="id">inversion</span> <span class="id">H1</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;- <span class="id">inversion</span> <span class="id">H4</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> <span class="id">s1</span>. <span class="kwd">exists</span> <span class="id">s2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> 0. <span class="kwd">exists</span> 0. <span class="id">repeat</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="PFPL.Definitions.html#eval0">eval0</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="PFPL.Definitions.html#eval0">eval0</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inversion</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;- <span class="id">apply</span> <span class="id">IHn</span> <span class="kwd">in</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">H4</span> <span class="kwd">as</span> [<span class="id">x1</span> [<span class="id">x2</span> [<span class="id">n0</span> [<span class="id">n1</span> [<span class="id">H4</span> [<span class="id">H4</span>' [<span class="id">H4</span>'' <span class="id">H4</span>''']]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> <span class="id">x1</span>. <span class="kwd">exists</span> <span class="id">x2</span>. <span class="kwd">exists</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n0</span>). <span class="kwd">exists</span> <span class="id">n1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">repeat</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> (<span class="id"><a href="PFPL.Definitions.html#evalN">evalN</a></span> <span class="id">_</span> <span class="id">e1</span>'); <span class="id">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assumption</span>. <span class="id">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span>. <span class="id">f_equal</span>. <span class="id">simpl</span> <span class="kwd">in</span> <span class="id">H4</span>'''. <span class="id">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id">apply</span> <span class="id">IHn</span> <span class="kwd">in</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">H4</span> <span class="kwd">as</span> [<span class="id">x1</span> [<span class="id">x2</span> [<span class="id">n0</span> [<span class="id">n1</span> [<span class="id">H4</span> [<span class="id">H4</span>' [<span class="id">H4</span>'' <span class="id">H4</span>''']]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> <span class="id">x1</span>. <span class="kwd">exists</span> <span class="id">x2</span>. <span class="kwd">exists</span> <span class="id">n0</span>. <span class="kwd">exists</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">repeat</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assumption</span>. <span class="id">apply</span> (<span class="id"><a href="PFPL.Definitions.html#evalN">evalN</a></span> <span class="id">_</span> <span class="id">e2</span>'); <span class="id">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">simpl</span>. <span class="id">f_equal</span>. <span class="id">simpl</span> <span class="kwd">in</span> <span class="id">H4</span>'''. <span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Split <span class="bracket"><span class="id">ELen</span></span> evaluation (part 1) </div>
<span class="kwd">Lemma</span> <span class="id"><a name="len_seq">len_seq</a></span> : <span class="kwd">forall</span> <span class="id">n</span> <span class="id">e1</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="PFPL.Definitions.html#EvalN">EvalN</a></span> (<span class="id"><a href="PFPL.Definitions.html#ELen">ELen</a></span> <span class="id">e1</span>) (<span class="id"><a href="PFPL.Definitions.html#ENum">ENum</a></span> <span class="id">x</span>) <span class="id">n</span>) -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">exists</span> <span class="id">x1</span> <span class="id">n0</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="PFPL.Definitions.html#EvalN">EvalN</a></span> <span class="id">e1</span> (<span class="id"><a href="PFPL.Definitions.html#EStr">EStr</a></span> <span class="id">x1</span>) <span class="id">n0</span> /\ <span class="id">x</span> = <span class="id"><a href="https://coq.inria.fr/library/Coq.Strings.String.html#length">length</a></span> <span class="id">x1</span> /\ <span class="id">n</span> = 1 + <span class="id">n0</span><br/>
&nbsp;&nbsp;).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof23')">Proof.</span></div>
<div class="proofscript" id="proof23">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">n</span>; <span class="id">intros</span>; <span class="id">inversion</span> <span class="id">H</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;<span class="id">inversion</span> <span class="id">H1</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;- <span class="kwd">exists</span> <span class="id">s1</span>. <span class="kwd">exists</span> 0.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inversion</span> <span class="id">H4</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">repeat</span> <span class="id">split</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inversion</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;- <span class="id">apply</span> <span class="id">IHn</span> <span class="kwd">in</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">H4</span> <span class="kwd">as</span> [<span class="id">x1</span> [<span class="id">n0</span> [<span class="id">H4</span> [<span class="id">H4</span>' <span class="id">H4</span>'']]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> <span class="id">x1</span>. <span class="kwd">exists</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">repeat</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> (<span class="id"><a href="PFPL.Definitions.html#evalN">evalN</a></span> <span class="id">_</span> <span class="id">e1</span>'); <span class="id">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assumption</span>. <span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Split <span class="bracket"><span class="id">ELet</span></span> evaluation (part 1) </div>
<span class="kwd">Lemma</span> <span class="id"><a name="let_seq">let_seq</a></span> : <span class="kwd">forall</span> <span class="id">n</span> <span class="id">e1</span> <span class="id">x</span> <span class="id">e2</span> <span class="id">e</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="PFPL.Definitions.html#Val">Val</a></span> <span class="id">e</span>' -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="PFPL.Definitions.html#EvalN">EvalN</a></span> (<span class="id"><a href="PFPL.Definitions.html#ELet">ELet</a></span> <span class="id">e1</span> <span class="id">x</span> <span class="id">e2</span>) <span class="id">e</span>' <span class="id">n</span>) -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">exists</span> <span class="id">e1</span>' <span class="id">n0</span> <span class="id">n1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="PFPL.Definitions.html#Val">Val</a></span> <span class="id">e1</span>' /\ <span class="id"><a href="PFPL.Definitions.html#EvalN">EvalN</a></span> <span class="id">e1</span> <span class="id">e1</span>' <span class="id">n0</span> /\ <span class="id"><a href="PFPL.Definitions.html#EvalN">EvalN</a></span> (<span class="id"><a href="PFPL.Definitions.html#subst">subst</a></span> <span class="id">e1</span>' <span class="id">x</span> <span class="id">e2</span>) <span class="id">e</span>' <span class="id">n1</span> /\ <span class="id">n</span> = 1 + <span class="id">n0</span> + <span class="id">n1</span><br/>
&nbsp;&nbsp;).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof24')">Proof.</span></div>
<div class="proofscript" id="proof24">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">n</span>; <span class="id">intros</span>; <span class="id">inversion</span> <span class="id">H</span>; <span class="id">subst</span>;<br/>
&nbsp;&nbsp;<span class="id">inversion</span> <span class="id">H0</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;- <span class="id">inversion</span> <span class="id">H5</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">inversion</span> <span class="id">H2</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> <span class="id">e1</span>. <span class="kwd">exists</span> 0. <span class="kwd">exists</span> 0.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">repeat</span> <span class="id">split</span>. <span class="id">assumption</span>. <span class="id">constructor</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">inversion</span> <span class="id">H2</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">IHn</span> <span class="kwd">in</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">H5</span> <span class="kwd">as</span> [<span class="id">e1</span>'0 [<span class="id">n2</span> [<span class="id">n3</span> [<span class="id">H5</span> [<span class="id">H5</span>' [<span class="id">H5</span>'' <span class="id">H5</span>''']]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> <span class="id">e1</span>'0. <span class="kwd">exists</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n2</span>). <span class="kwd">exists</span> <span class="id">n3</span>. <span class="id">repeat</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assumption</span>. <span class="id">apply</span> (<span class="id"><a href="PFPL.Definitions.html#evalN">evalN</a></span> <span class="id">_</span> <span class="id">e1</span>'); <span class="id">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assumption</span>. <span class="id">lia</span>. <span class="id">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> <span class="id">e1</span>. <span class="kwd">exists</span> 0. <span class="kwd">exists</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n1</span>). <span class="id">repeat</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assumption</span>. <span class="id">constructor</span>. <span class="id">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id">inversion</span> <span class="id">H5</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">inversion</span> <span class="id">H2</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> <span class="id">e1</span>. <span class="kwd">exists</span> 0. <span class="kwd">exists</span> 0.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">repeat</span> <span class="id">split</span>. <span class="id">assumption</span>. <span class="id">constructor</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">inversion</span> <span class="id">H2</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">IHn</span> <span class="kwd">in</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">H5</span> <span class="kwd">as</span> [<span class="id">e1</span>'0 [<span class="id">n2</span> [<span class="id">n3</span> [<span class="id">H5</span> [<span class="id">H5</span>' [<span class="id">H5</span>'' <span class="id">H5</span>''']]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> <span class="id">e1</span>'0. <span class="kwd">exists</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n2</span>). <span class="kwd">exists</span> <span class="id">n3</span>. <span class="id">repeat</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assumption</span>. <span class="id">apply</span> (<span class="id"><a href="PFPL.Definitions.html#evalN">evalN</a></span> <span class="id">_</span> <span class="id">e1</span>'); <span class="id">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assumption</span>. <span class="id">lia</span>. <span class="id">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> <span class="id">e1</span>. <span class="kwd">exists</span> 0. <span class="kwd">exists</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n0</span>). <span class="id">repeat</span> <span class="id">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assumption</span>. <span class="id">constructor</span>. <span class="id">assumption</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Equivalence of the small-step and big-step semantics (part 1) </div>
<span class="kwd">Lemma</span> <span class="id"><a name="eval_big_equiv_eval_star_1">eval_big_equiv_eval_star_1</a></span> : <span class="kwd">forall</span> <span class="id">e</span> <span class="id">e</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="PFPL.Definitions.html#EvalStar">EvalStar</a></span> <span class="id">e</span> <span class="id">e</span>' /\ <span class="id"><a href="PFPL.Definitions.html#Val">Val</a></span> <span class="id">e</span>' -&gt; <span class="id"><a href="PFPL.Definitions.html#EvalBig">EvalBig</a></span> <span class="id">e</span> <span class="id">e</span>'.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof25')">Proof.</span></div>
<div class="proofscript" id="proof25">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">destruct</span> <span class="id">H</span>. <span class="id">apply</span> <span class="id"><a href="PFPL.Theorems_Eval.html#EvalStarToEvalN">EvalStarToEvalN</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="id">destruct</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">generalize</span> <span class="id">dependent</span> <span class="id">e</span>'. <span class="id">generalize</span> <span class="id">dependent</span> <span class="id">e</span>.<br/>
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">x</span> <span class="kwd">using</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.Wf_nat.html#lt_wf_ind">lt_wf_ind</a></span>; <span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">inversion</span> <span class="id">H0</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;- <span class="id">inversion</span> <span class="id">H1</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="PFPL.Definitions.html#evalBigNum">evalBigNum</a></span>. <span class="id">apply</span> <span class="id"><a href="PFPL.Definitions.html#evalBigStr">evalBigStr</a></span>.<br/>
&nbsp;&nbsp;- <span class="id">assert</span> (<span class="id">H4</span> := <span class="id">H3</span>). <span class="id">apply</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">H3</span>. <span class="id">inversion</span> <span class="id">H2</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">inversion</span> <span class="id">H3</span>; <span class="id">subst</span>. <span class="id">apply</span> <span class="id"><a href="PFPL.Definitions.html#evalBigPlus">evalBigPlus</a></span>; <span class="id">apply</span> <span class="id"><a href="PFPL.Definitions.html#evalBigNum">evalBigNum</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">inversion</span> <span class="id">H3</span>; <span class="id">subst</span>. <span class="id">apply</span> <span class="id"><a href="PFPL.Definitions.html#evalBigPlus">evalBigPlus</a></span>; [| <span class="id">assumption</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="PFPL.Theorems_Eval.html#plus_seq">plus_seq</a></span> <span class="kwd">in</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">H4</span> <span class="kwd">as</span> [<span class="id">x1</span> [<span class="id">x2</span> [<span class="id">n0</span> [<span class="id">n3</span> [<span class="id">H4</span> [<span class="id">H4</span>' [<span class="id">H4</span>'' <span class="id">H4</span>''']]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">T1</span> := <span class="id">H4</span>). <span class="id">apply</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">T1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">T2</span> := <span class="id"><a href="PFPL.Theorems_Eval.html#eval_big_deterministic">eval_big_deterministic</a></span> <span class="id">e1</span>' (<span class="id"><a href="PFPL.Definitions.html#ENum">ENum</a></span> <span class="id">x1</span>) (<span class="id"><a href="PFPL.Definitions.html#ENum">ENum</a></span> <span class="id">n1</span>) <span class="id">T1</span> <span class="id">H8</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inversion</span> <span class="id">T2</span>. <span class="id">subst</span> <span class="id">x1</span>. <span class="id">clear</span> <span class="id">T1</span> <span class="id">T2</span>. <span class="id">subst</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> (<span class="id">H</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n0</span>)). <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> (<span class="id"><a href="PFPL.Definitions.html#evalN">evalN</a></span> <span class="id">_</span> <span class="id">e1</span>'); <span class="id">assumption</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">lia</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">inversion</span> <span class="id">H3</span>; <span class="id">subst</span>. <span class="id">apply</span> <span class="id"><a href="PFPL.Definitions.html#evalBigPlus">evalBigPlus</a></span>; [<span class="id">assumption</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="PFPL.Theorems_Eval.html#plus_seq">plus_seq</a></span> <span class="kwd">in</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">H4</span> <span class="kwd">as</span> [<span class="id">x1</span> [<span class="id">x2</span> [<span class="id">n0</span> [<span class="id">n3</span> [<span class="id">H4</span> [<span class="id">H4</span>' [<span class="id">H4</span>'' <span class="id">H4</span>''']]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">T1</span> := <span class="id">H4</span>'). <span class="id">apply</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">T1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">T2</span> := <span class="id"><a href="PFPL.Theorems_Eval.html#eval_big_deterministic">eval_big_deterministic</a></span> <span class="id">e2</span>' (<span class="id"><a href="PFPL.Definitions.html#ENum">ENum</a></span> <span class="id">x2</span>) (<span class="id"><a href="PFPL.Definitions.html#ENum">ENum</a></span> <span class="id">n2</span>) <span class="id">T1</span> <span class="id">H11</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inversion</span> <span class="id">T2</span>. <span class="id">subst</span> <span class="id">x2</span>. <span class="id">clear</span> <span class="id">T1</span> <span class="id">T2</span>. <span class="id">subst</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> (<span class="id">H</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n3</span>)). <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> (<span class="id"><a href="PFPL.Definitions.html#evalN">evalN</a></span> <span class="id">_</span> <span class="id">e2</span>'); <span class="id">assumption</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">lia</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">inversion</span> <span class="id">H3</span>; <span class="id">subst</span>. <span class="id">apply</span> <span class="id"><a href="PFPL.Definitions.html#evalBigTimes">evalBigTimes</a></span>; <span class="id">apply</span> <span class="id"><a href="PFPL.Definitions.html#evalBigNum">evalBigNum</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">inversion</span> <span class="id">H3</span>; <span class="id">subst</span>. <span class="id">apply</span> <span class="id"><a href="PFPL.Definitions.html#evalBigTimes">evalBigTimes</a></span>; [| <span class="id">assumption</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="PFPL.Theorems_Eval.html#times_seq">times_seq</a></span> <span class="kwd">in</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">H4</span> <span class="kwd">as</span> [<span class="id">x1</span> [<span class="id">x2</span> [<span class="id">n0</span> [<span class="id">n3</span> [<span class="id">H4</span> [<span class="id">H4</span>' [<span class="id">H4</span>'' <span class="id">H4</span>''']]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">T1</span> := <span class="id">H4</span>). <span class="id">apply</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">T1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">T2</span> := <span class="id"><a href="PFPL.Theorems_Eval.html#eval_big_deterministic">eval_big_deterministic</a></span> <span class="id">e1</span>' (<span class="id"><a href="PFPL.Definitions.html#ENum">ENum</a></span> <span class="id">x1</span>) (<span class="id"><a href="PFPL.Definitions.html#ENum">ENum</a></span> <span class="id">n1</span>) <span class="id">T1</span> <span class="id">H8</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inversion</span> <span class="id">T2</span>. <span class="id">subst</span> <span class="id">x1</span>. <span class="id">clear</span> <span class="id">T1</span> <span class="id">T2</span>. <span class="id">subst</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> (<span class="id">H</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n0</span>)). <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> (<span class="id"><a href="PFPL.Definitions.html#evalN">evalN</a></span> <span class="id">_</span> <span class="id">e1</span>'); <span class="id">assumption</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">lia</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">inversion</span> <span class="id">H3</span>; <span class="id">subst</span>. <span class="id">apply</span> <span class="id"><a href="PFPL.Definitions.html#evalBigTimes">evalBigTimes</a></span>; [<span class="id">assumption</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="PFPL.Theorems_Eval.html#times_seq">times_seq</a></span> <span class="kwd">in</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">H4</span> <span class="kwd">as</span> [<span class="id">x1</span> [<span class="id">x2</span> [<span class="id">n0</span> [<span class="id">n3</span> [<span class="id">H4</span> [<span class="id">H4</span>' [<span class="id">H4</span>'' <span class="id">H4</span>''']]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">T1</span> := <span class="id">H4</span>'). <span class="id">apply</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">T1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">T2</span> := <span class="id"><a href="PFPL.Theorems_Eval.html#eval_big_deterministic">eval_big_deterministic</a></span> <span class="id">e2</span>' (<span class="id"><a href="PFPL.Definitions.html#ENum">ENum</a></span> <span class="id">x2</span>) (<span class="id"><a href="PFPL.Definitions.html#ENum">ENum</a></span> <span class="id">n2</span>) <span class="id">T1</span> <span class="id">H11</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inversion</span> <span class="id">T2</span>. <span class="id">subst</span> <span class="id">x2</span>. <span class="id">clear</span> <span class="id">T1</span> <span class="id">T2</span>. <span class="id">subst</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> (<span class="id">H</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n3</span>)). <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> (<span class="id"><a href="PFPL.Definitions.html#evalN">evalN</a></span> <span class="id">_</span> <span class="id">e2</span>'); <span class="id">assumption</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">lia</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">inversion</span> <span class="id">H3</span>; <span class="id">subst</span>. <span class="id">apply</span> <span class="id"><a href="PFPL.Definitions.html#evalBigCat">evalBigCat</a></span>; <span class="id">apply</span> <span class="id"><a href="PFPL.Definitions.html#evalBigStr">evalBigStr</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">inversion</span> <span class="id">H3</span>; <span class="id">subst</span>. <span class="id">apply</span> <span class="id"><a href="PFPL.Definitions.html#evalBigCat">evalBigCat</a></span>; [| <span class="id">assumption</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="PFPL.Theorems_Eval.html#cat_seq">cat_seq</a></span> <span class="kwd">in</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">H4</span> <span class="kwd">as</span> [<span class="id">x1</span> [<span class="id">x2</span> [<span class="id">n0</span> [<span class="id">n3</span> [<span class="id">H4</span> [<span class="id">H4</span>' [<span class="id">H4</span>'' <span class="id">H4</span>''']]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">T1</span> := <span class="id">H4</span>). <span class="id">apply</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">T1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">T2</span> := <span class="id"><a href="PFPL.Theorems_Eval.html#eval_big_deterministic">eval_big_deterministic</a></span> <span class="id">e1</span>' (<span class="id"><a href="PFPL.Definitions.html#EStr">EStr</a></span> <span class="id">x1</span>) (<span class="id"><a href="PFPL.Definitions.html#EStr">EStr</a></span> <span class="id">s1</span>) <span class="id">T1</span> <span class="id">H8</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inversion</span> <span class="id">T2</span>. <span class="id">subst</span> <span class="id">x1</span>. <span class="id">clear</span> <span class="id">T1</span> <span class="id">T2</span>. <span class="id">subst</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> (<span class="id">H</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n0</span>)). <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> (<span class="id"><a href="PFPL.Definitions.html#evalN">evalN</a></span> <span class="id">_</span> <span class="id">e1</span>'); <span class="id">assumption</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">lia</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">inversion</span> <span class="id">H3</span>; <span class="id">subst</span>. <span class="id">apply</span> <span class="id"><a href="PFPL.Definitions.html#evalBigCat">evalBigCat</a></span>; [<span class="id">assumption</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="PFPL.Theorems_Eval.html#cat_seq">cat_seq</a></span> <span class="kwd">in</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">H4</span> <span class="kwd">as</span> [<span class="id">x1</span> [<span class="id">x2</span> [<span class="id">n0</span> [<span class="id">n3</span> [<span class="id">H4</span> [<span class="id">H4</span>' [<span class="id">H4</span>'' <span class="id">H4</span>''']]]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">T1</span> := <span class="id">H4</span>'). <span class="id">apply</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">T1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">T2</span> := <span class="id"><a href="PFPL.Theorems_Eval.html#eval_big_deterministic">eval_big_deterministic</a></span> <span class="id">e2</span>' (<span class="id"><a href="PFPL.Definitions.html#EStr">EStr</a></span> <span class="id">x2</span>) (<span class="id"><a href="PFPL.Definitions.html#EStr">EStr</a></span> <span class="id">s2</span>) <span class="id">T1</span> <span class="id">H11</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inversion</span> <span class="id">T2</span>. <span class="id">subst</span> <span class="id">x2</span>. <span class="id">clear</span> <span class="id">T1</span> <span class="id">T2</span>. <span class="id">subst</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> (<span class="id">H</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n3</span>)). <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> (<span class="id"><a href="PFPL.Definitions.html#evalN">evalN</a></span> <span class="id">_</span> <span class="id">e2</span>'); <span class="id">assumption</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">lia</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">inversion</span> <span class="id">H3</span>; <span class="id">subst</span>. <span class="id">apply</span> <span class="id"><a href="PFPL.Definitions.html#evalBigLen">evalBigLen</a></span>; <span class="id">apply</span> <span class="id"><a href="PFPL.Definitions.html#evalBigStr">evalBigStr</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">inversion</span> <span class="id">H3</span>; <span class="id">subst</span>. <span class="id">apply</span> <span class="id"><a href="PFPL.Definitions.html#evalBigLen">evalBigLen</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="PFPL.Theorems_Eval.html#len_seq">len_seq</a></span> <span class="kwd">in</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">H4</span> <span class="kwd">as</span> [<span class="id">x1</span> [<span class="id">n0</span> [<span class="id">H4</span> [<span class="id">H4</span>' <span class="id">H4</span>'']]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">T1</span> := <span class="id">H4</span>). <span class="id">apply</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">T1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">T2</span> := <span class="id"><a href="PFPL.Theorems_Eval.html#eval_big_deterministic">eval_big_deterministic</a></span> <span class="id">e1</span>' (<span class="id"><a href="PFPL.Definitions.html#EStr">EStr</a></span> <span class="id">x1</span>) (<span class="id"><a href="PFPL.Definitions.html#EStr">EStr</a></span> <span class="id">s1</span>) <span class="id">T1</span> <span class="id">H7</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inversion</span> <span class="id">T2</span>. <span class="id">subst</span> <span class="id">x1</span>. <span class="id">clear</span> <span class="id">T1</span> <span class="id">T2</span>. <span class="id">subst</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> (<span class="id">H</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n0</span>)). <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> (<span class="id"><a href="PFPL.Definitions.html#evalN">evalN</a></span> <span class="id">_</span> <span class="id">e1</span>'); <span class="id">assumption</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">lia</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">inversion</span> <span class="id">H3</span>; <span class="id">subst</span>. <span class="id">apply</span> (<span class="id"><a href="PFPL.Definitions.html#evalBigLet">evalBigLet</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">e1</span>'0); [| <span class="id">assumption</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="PFPL.Theorems_Eval.html#let_seq">let_seq</a></span> <span class="kwd">in</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">H4</span> <span class="kwd">as</span> [<span class="id">e1</span>'1 [<span class="id">n0</span> [<span class="id">n1</span> [<span class="id">H4</span> [<span class="id">H4</span>' [<span class="id">H4</span>'' <span class="id">H4</span>''']]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">T1</span> := <span class="id">H4</span>'). <span class="id">apply</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">T1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">T2</span> := <span class="id"><a href="PFPL.Theorems_Eval.html#eval_big_deterministic">eval_big_deterministic</a></span> <span class="id">e1</span>' <span class="id">e1</span>'0 <span class="id">e1</span>'1 <span class="id">H10</span> <span class="id">T1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">subst</span> <span class="id">e1</span>'1. <span class="id">clear</span> <span class="id">T1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> (<span class="id">H</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n0</span>)). <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> (<span class="id"><a href="PFPL.Definitions.html#evalN">evalN</a></span> <span class="id">_</span> <span class="id">e1</span>'); <span class="id">assumption</span>. <span class="id">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">lia</span>. <span class="id">assumption</span>. <span class="id">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">apply</span> (<span class="id"><a href="PFPL.Definitions.html#evalBigLet">evalBigLet</a></span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">x</span> <span class="id">e1</span> <span class="id">e</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inversion</span> <span class="id">H5</span>; <span class="id">subst</span>; <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">assumption</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Split <span class="bracket"><span class="id">EPlus</span></span> evaluation (part 2) </div>
<span class="kwd">Lemma</span> <span class="id"><a name="plus_seq_2">plus_seq_2</a></span> : <span class="kwd">forall</span> <span class="id">n1</span> <span class="id">n2</span> <span class="id">e1</span> <span class="id">x1</span> <span class="id">e2</span> <span class="id">x2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="PFPL.Definitions.html#EvalN">EvalN</a></span> <span class="id">e1</span> (<span class="id"><a href="PFPL.Definitions.html#ENum">ENum</a></span> <span class="id">x1</span>) <span class="id">n1</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="PFPL.Definitions.html#EvalN">EvalN</a></span> <span class="id">e2</span> (<span class="id"><a href="PFPL.Definitions.html#ENum">ENum</a></span> <span class="id">x2</span>) <span class="id">n2</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="PFPL.Definitions.html#EvalN">EvalN</a></span> (<span class="id"><a href="PFPL.Definitions.html#EPlus">EPlus</a></span> <span class="id">e1</span> <span class="id">e2</span>) (<span class="id"><a href="PFPL.Definitions.html#ENum">ENum</a></span> (<span class="id">x1</span> + <span class="id">x2</span>)) (1 + <span class="id">n1</span> + <span class="id">n2</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof26')">Proof.</span></div>
<div class="proofscript" id="proof26">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">n1</span>; <span class="id">induction</span> <span class="id">n2</span>; <span class="id">intros</span>; <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;- <span class="id">inversion</span> <span class="id">H</span>; <span class="id">subst</span>. <span class="id">inversion</span> <span class="id">H0</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> (<span class="id"><a href="PFPL.Definitions.html#evalN">evalN</a></span> <span class="id">_</span> (<span class="id"><a href="PFPL.Definitions.html#ENum">ENum</a></span> (<span class="id">x1</span> + <span class="id">x2</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>. <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="id">inversion</span> <span class="id">H</span>; <span class="id">subst</span>. <span class="id">inversion</span> <span class="id">H0</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> (<span class="id">IHn2</span> (<span class="id"><a href="PFPL.Definitions.html#ENum">ENum</a></span> <span class="id">x1</span>) <span class="id">x1</span>) <span class="kwd">in</span> <span class="id">H5</span>. <span class="id">simpl</span> <span class="kwd">in</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> (<span class="id"><a href="PFPL.Definitions.html#evalN">evalN</a></span> <span class="id">_</span> (<span class="id"><a href="PFPL.Definitions.html#EPlus">EPlus</a></span> (<span class="id"><a href="PFPL.Definitions.html#ENum">ENum</a></span> <span class="id">x1</span>) <span class="id">e</span>')).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>. <span class="id">constructor</span>. <span class="id">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assumption</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="id">inversion</span> <span class="id">H</span>; <span class="id">subst</span>. <span class="id">inversion</span> <span class="id">H0</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> (<span class="id">IHn1</span> 0 <span class="id">e</span>' <span class="id">x1</span> (<span class="id"><a href="PFPL.Definitions.html#ENum">ENum</a></span> <span class="id">x2</span>) <span class="id">x2</span>) <span class="kwd">in</span> <span class="id">H5</span>. <span class="id">simpl</span> <span class="kwd">in</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> (<span class="id"><a href="PFPL.Definitions.html#evalN">evalN</a></span> <span class="id">_</span> (<span class="id"><a href="PFPL.Definitions.html#EPlus">EPlus</a></span> <span class="id">e</span>' (<span class="id"><a href="PFPL.Definitions.html#ENum">ENum</a></span> <span class="id">x2</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>. <span class="id">assumption</span>. <span class="id">assumption</span>. <span class="id">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id">inversion</span> <span class="id">H</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> (<span class="id">IHn1</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n2</span>) <span class="id">e</span>' <span class="id">x1</span> <span class="id">e2</span> <span class="id">x2</span>) <span class="kwd">in</span> <span class="id">H5</span>. <span class="id">simpl</span> <span class="kwd">in</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> (<span class="id"><a href="PFPL.Definitions.html#evalN">evalN</a></span> <span class="id">_</span> (<span class="id"><a href="PFPL.Definitions.html#EPlus">EPlus</a></span> <span class="id">e</span>' <span class="id">e2</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>. <span class="id">assumption</span>. <span class="id">assumption</span>. <span class="id">assumption</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Split <span class="bracket"><span class="id">ETimes</span></span> evaluation (part 2) </div>
<span class="kwd">Lemma</span> <span class="id"><a name="times_seq_2">times_seq_2</a></span> : <span class="kwd">forall</span> <span class="id">n1</span> <span class="id">n2</span> <span class="id">e1</span> <span class="id">x1</span> <span class="id">e2</span> <span class="id">x2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="PFPL.Definitions.html#EvalN">EvalN</a></span> <span class="id">e1</span> (<span class="id"><a href="PFPL.Definitions.html#ENum">ENum</a></span> <span class="id">x1</span>) <span class="id">n1</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="PFPL.Definitions.html#EvalN">EvalN</a></span> <span class="id">e2</span> (<span class="id"><a href="PFPL.Definitions.html#ENum">ENum</a></span> <span class="id">x2</span>) <span class="id">n2</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="PFPL.Definitions.html#EvalN">EvalN</a></span> (<span class="id"><a href="PFPL.Definitions.html#ETimes">ETimes</a></span> <span class="id">e1</span> <span class="id">e2</span>) (<span class="id"><a href="PFPL.Definitions.html#ENum">ENum</a></span> (<span class="id">x1</span> * <span class="id">x2</span>)) (1 + <span class="id">n1</span> + <span class="id">n2</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof27')">Proof.</span></div>
<div class="proofscript" id="proof27">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">n1</span>; <span class="id">induction</span> <span class="id">n2</span>; <span class="id">intros</span>; <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;- <span class="id">inversion</span> <span class="id">H</span>; <span class="id">subst</span>. <span class="id">inversion</span> <span class="id">H0</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> (<span class="id"><a href="PFPL.Definitions.html#evalN">evalN</a></span> <span class="id">_</span> (<span class="id"><a href="PFPL.Definitions.html#ENum">ENum</a></span> (<span class="id">x1</span> * <span class="id">x2</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>. <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="id">inversion</span> <span class="id">H</span>; <span class="id">subst</span>. <span class="id">inversion</span> <span class="id">H0</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> (<span class="id">IHn2</span> (<span class="id"><a href="PFPL.Definitions.html#ENum">ENum</a></span> <span class="id">x1</span>) <span class="id">x1</span>) <span class="kwd">in</span> <span class="id">H5</span>. <span class="id">simpl</span> <span class="kwd">in</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> (<span class="id"><a href="PFPL.Definitions.html#evalN">evalN</a></span> <span class="id">_</span> (<span class="id"><a href="PFPL.Definitions.html#ETimes">ETimes</a></span> (<span class="id"><a href="PFPL.Definitions.html#ENum">ENum</a></span> <span class="id">x1</span>) <span class="id">e</span>')).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>. <span class="id">constructor</span>. <span class="id">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assumption</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="id">inversion</span> <span class="id">H</span>; <span class="id">subst</span>. <span class="id">inversion</span> <span class="id">H0</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> (<span class="id">IHn1</span> 0 <span class="id">e</span>' <span class="id">x1</span> (<span class="id"><a href="PFPL.Definitions.html#ENum">ENum</a></span> <span class="id">x2</span>) <span class="id">x2</span>) <span class="kwd">in</span> <span class="id">H5</span>. <span class="id">simpl</span> <span class="kwd">in</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> (<span class="id"><a href="PFPL.Definitions.html#evalN">evalN</a></span> <span class="id">_</span> (<span class="id"><a href="PFPL.Definitions.html#ETimes">ETimes</a></span> <span class="id">e</span>' (<span class="id"><a href="PFPL.Definitions.html#ENum">ENum</a></span> <span class="id">x2</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>. <span class="id">assumption</span>. <span class="id">assumption</span>. <span class="id">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id">inversion</span> <span class="id">H</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> (<span class="id">IHn1</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n2</span>) <span class="id">e</span>' <span class="id">x1</span> <span class="id">e2</span> <span class="id">x2</span>) <span class="kwd">in</span> <span class="id">H5</span>. <span class="id">simpl</span> <span class="kwd">in</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> (<span class="id"><a href="PFPL.Definitions.html#evalN">evalN</a></span> <span class="id">_</span> (<span class="id"><a href="PFPL.Definitions.html#ETimes">ETimes</a></span> <span class="id">e</span>' <span class="id">e2</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>. <span class="id">assumption</span>. <span class="id">assumption</span>. <span class="id">assumption</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Split <span class="bracket"><span class="id">ECat</span></span> evaluation (part 2) </div>
<span class="kwd">Lemma</span> <span class="id"><a name="cat_seq_2">cat_seq_2</a></span> : <span class="kwd">forall</span> <span class="id">n1</span> <span class="id">n2</span> <span class="id">e1</span> <span class="id">x1</span> <span class="id">e2</span> <span class="id">x2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="PFPL.Definitions.html#EvalN">EvalN</a></span> <span class="id">e1</span> (<span class="id"><a href="PFPL.Definitions.html#EStr">EStr</a></span> <span class="id">x1</span>) <span class="id">n1</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="PFPL.Definitions.html#EvalN">EvalN</a></span> <span class="id">e2</span> (<span class="id"><a href="PFPL.Definitions.html#EStr">EStr</a></span> <span class="id">x2</span>) <span class="id">n2</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="PFPL.Definitions.html#EvalN">EvalN</a></span> (<span class="id"><a href="PFPL.Definitions.html#ECat">ECat</a></span> <span class="id">e1</span> <span class="id">e2</span>) (<span class="id"><a href="PFPL.Definitions.html#EStr">EStr</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Strings.String.html#append">append</a></span> <span class="id">x1</span> <span class="id">x2</span>)) (1 + <span class="id">n1</span> + <span class="id">n2</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof28')">Proof.</span></div>
<div class="proofscript" id="proof28">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">n1</span>; <span class="id">induction</span> <span class="id">n2</span>; <span class="id">intros</span>; <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;- <span class="id">inversion</span> <span class="id">H</span>; <span class="id">subst</span>. <span class="id">inversion</span> <span class="id">H0</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> (<span class="id"><a href="PFPL.Definitions.html#evalN">evalN</a></span> <span class="id">_</span> (<span class="id"><a href="PFPL.Definitions.html#EStr">EStr</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Strings.String.html#append">append</a></span> <span class="id">x1</span> <span class="id">x2</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>. <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="id">inversion</span> <span class="id">H</span>; <span class="id">subst</span>. <span class="id">inversion</span> <span class="id">H0</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> (<span class="id">IHn2</span> (<span class="id"><a href="PFPL.Definitions.html#EStr">EStr</a></span> <span class="id">x1</span>) <span class="id">x1</span>) <span class="kwd">in</span> <span class="id">H5</span>. <span class="id">simpl</span> <span class="kwd">in</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> (<span class="id"><a href="PFPL.Definitions.html#evalN">evalN</a></span> <span class="id">_</span> (<span class="id"><a href="PFPL.Definitions.html#ECat">ECat</a></span> (<span class="id"><a href="PFPL.Definitions.html#EStr">EStr</a></span> <span class="id">x1</span>) <span class="id">e</span>')).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>. <span class="id">constructor</span>. <span class="id">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assumption</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="id">inversion</span> <span class="id">H</span>; <span class="id">subst</span>. <span class="id">inversion</span> <span class="id">H0</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> (<span class="id">IHn1</span> 0 <span class="id">e</span>' <span class="id">x1</span> (<span class="id"><a href="PFPL.Definitions.html#EStr">EStr</a></span> <span class="id">x2</span>) <span class="id">x2</span>) <span class="kwd">in</span> <span class="id">H5</span>. <span class="id">simpl</span> <span class="kwd">in</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> (<span class="id"><a href="PFPL.Definitions.html#evalN">evalN</a></span> <span class="id">_</span> (<span class="id"><a href="PFPL.Definitions.html#ECat">ECat</a></span> <span class="id">e</span>' (<span class="id"><a href="PFPL.Definitions.html#EStr">EStr</a></span> <span class="id">x2</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>. <span class="id">assumption</span>. <span class="id">assumption</span>. <span class="id">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id">inversion</span> <span class="id">H</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> (<span class="id">IHn1</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n2</span>) <span class="id">e</span>' <span class="id">x1</span> <span class="id">e2</span> <span class="id">x2</span>) <span class="kwd">in</span> <span class="id">H5</span>. <span class="id">simpl</span> <span class="kwd">in</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> (<span class="id"><a href="PFPL.Definitions.html#evalN">evalN</a></span> <span class="id">_</span> (<span class="id"><a href="PFPL.Definitions.html#ECat">ECat</a></span> <span class="id">e</span>' <span class="id">e2</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>. <span class="id">assumption</span>. <span class="id">assumption</span>. <span class="id">assumption</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Split <span class="bracket"><span class="id">ELen</span></span> evaluation (part 2) </div>
<span class="kwd">Lemma</span> <span class="id"><a name="len_seq_2">len_seq_2</a></span> : <span class="kwd">forall</span> <span class="id">n1</span> <span class="id">e1</span> <span class="id">x1</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="PFPL.Definitions.html#EvalN">EvalN</a></span> <span class="id">e1</span> (<span class="id"><a href="PFPL.Definitions.html#EStr">EStr</a></span> <span class="id">x1</span>) <span class="id">n1</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="PFPL.Definitions.html#EvalN">EvalN</a></span> (<span class="id"><a href="PFPL.Definitions.html#ELen">ELen</a></span> <span class="id">e1</span>) (<span class="id"><a href="PFPL.Definitions.html#ENum">ENum</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Strings.String.html#length">length</a></span> <span class="id">x1</span>)) (1 + <span class="id">n1</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof29')">Proof.</span></div>
<div class="proofscript" id="proof29">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">n1</span>; <span class="id">intros</span>; <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;- <span class="id">inversion</span> <span class="id">H</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> (<span class="id"><a href="PFPL.Definitions.html#evalN">evalN</a></span> <span class="id">_</span> (<span class="id"><a href="PFPL.Definitions.html#ENum">ENum</a></span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Strings.String.html#length">length</a></span> <span class="id">x1</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>. <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="id">inversion</span> <span class="id">H</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> (<span class="id">IHn1</span> <span class="id">e</span>' <span class="id">x1</span>) <span class="kwd">in</span> <span class="id">H4</span>. <span class="id">simpl</span> <span class="kwd">in</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> (<span class="id"><a href="PFPL.Definitions.html#evalN">evalN</a></span> <span class="id">_</span> (<span class="id"><a href="PFPL.Definitions.html#ELen">ELen</a></span> <span class="id">e</span>')).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>. <span class="id">assumption</span>. <span class="id">assumption</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Split <span class="bracket"><span class="id">ELet</span></span> evaluation (part 2) </div>
<span class="kwd">Lemma</span> <span class="id"><a name="let_seq_2">let_seq_2</a></span> : <span class="kwd">forall</span> <span class="id">n1</span> <span class="id">n2</span> <span class="id">e1</span> <span class="id">x</span> <span class="id">e2</span> <span class="id">e1</span>' <span class="id">e2</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="PFPL.Definitions.html#Val">Val</a></span> <span class="id">e1</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="PFPL.Definitions.html#Val">Val</a></span> <span class="id">e2</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="PFPL.Definitions.html#EvalN">EvalN</a></span> <span class="id">e1</span> <span class="id">e1</span>' <span class="id">n1</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="PFPL.Definitions.html#EvalN">EvalN</a></span> (<span class="id"><a href="PFPL.Definitions.html#subst">subst</a></span> <span class="id">e1</span>' <span class="id">x</span> <span class="id">e2</span>) <span class="id">e2</span>' <span class="id">n2</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="PFPL.Definitions.html#EvalN">EvalN</a></span> (<span class="id"><a href="PFPL.Definitions.html#ELet">ELet</a></span> <span class="id">e1</span> <span class="id">x</span> <span class="id">e2</span>) <span class="id">e2</span>' (1 + <span class="id">n1</span> + <span class="id">n2</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof30')">Proof.</span></div>
<div class="proofscript" id="proof30">
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">n1</span>; <span class="id">induction</span> <span class="id">n2</span>; <span class="id">intros</span>; <span class="id">simpl</span>.<br/>
&nbsp;&nbsp;- <span class="id">inversion</span> <span class="id">H1</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> (<span class="id"><a href="PFPL.Definitions.html#evalN">evalN</a></span> <span class="id">_</span> (<span class="id"><a href="PFPL.Definitions.html#subst">subst</a></span> <span class="id">e1</span>' <span class="id">x</span> <span class="id">e2</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>. <span class="id">assumption</span>. <span class="id">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id">inversion</span> <span class="id">H1</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> (<span class="id"><a href="PFPL.Definitions.html#evalN">evalN</a></span> <span class="id">_</span> (<span class="id"><a href="PFPL.Definitions.html#subst">subst</a></span> <span class="id">e1</span>' <span class="id">x</span> <span class="id">e2</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>. <span class="id">assumption</span>. <span class="id">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id">inversion</span> <span class="id">H1</span>; <span class="id">subst</span>. <span class="id">inversion</span> <span class="id">H2</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> (<span class="id">IHn1</span> 0 <span class="id">e</span>' <span class="id">x</span> <span class="id">e2</span> <span class="id">e1</span>' (<span class="id"><a href="PFPL.Definitions.html#subst">subst</a></span> <span class="id">e1</span>' <span class="id">x</span> <span class="id">e2</span>)) <span class="kwd">in</span> <span class="id">H2</span>. <span class="id">simpl</span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> (<span class="id"><a href="PFPL.Definitions.html#evalN">evalN</a></span> <span class="id">_</span> (<span class="id"><a href="PFPL.Definitions.html#ELet">ELet</a></span> <span class="id">e</span>' <span class="id">x</span> <span class="id">e2</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>. <span class="id">assumption</span>. <span class="id">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assumption</span>. <span class="id">assumption</span>. <span class="id">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id">inversion</span> <span class="id">H1</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> (<span class="id">IHn1</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n2</span>) <span class="id">e</span>' <span class="id">x</span> <span class="id">e2</span> <span class="id">e1</span>' <span class="id">e2</span>') <span class="kwd">in</span> <span class="id">H7</span>. <span class="id">simpl</span> <span class="kwd">in</span> <span class="id">H7</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> (<span class="id"><a href="PFPL.Definitions.html#evalN">evalN</a></span> <span class="id">_</span> (<span class="id"><a href="PFPL.Definitions.html#ELet">ELet</a></span> <span class="id">e</span>' <span class="id">x</span> <span class="id">e2</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>. <span class="id">all</span>: <span class="id">assumption</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Equivalence of the small-step and big-step semantics (part 2) </div>
<span class="kwd">Lemma</span> <span class="id"><a name="eval_big_equiv_eval_star_2">eval_big_equiv_eval_star_2</a></span> : <span class="kwd">forall</span> <span class="id">e</span> <span class="id">e</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="PFPL.Definitions.html#EvalBig">EvalBig</a></span> <span class="id">e</span> <span class="id">e</span>' -&gt; <span class="id"><a href="PFPL.Definitions.html#EvalStar">EvalStar</a></span> <span class="id">e</span> <span class="id">e</span>' /\ <span class="id"><a href="PFPL.Definitions.html#Val">Val</a></span> <span class="id">e</span>'.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof31')">Proof.</span></div>
<div class="proofscript" id="proof31">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">split</span>. <span class="id">apply</span> <span class="id"><a href="PFPL.Theorems_Eval.html#EvalNToEvalStar">EvalNToEvalStar</a></span>.<br/>
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;- <span class="kwd">exists</span> 0. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="kwd">exists</span> 0. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="id">destruct</span> <span class="id">IHEvalBig1</span>. <span class="id">destruct</span> <span class="id">IHEvalBig2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> (1 + <span class="id">x</span> + <span class="id">x0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="PFPL.Theorems_Eval.html#plus_seq_2">plus_seq_2</a></span>; <span class="id">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id">destruct</span> <span class="id">IHEvalBig1</span>. <span class="id">destruct</span> <span class="id">IHEvalBig2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> (1 + <span class="id">x</span> + <span class="id">x0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="PFPL.Theorems_Eval.html#times_seq_2">times_seq_2</a></span>; <span class="id">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id">destruct</span> <span class="id">IHEvalBig1</span>. <span class="id">destruct</span> <span class="id">IHEvalBig2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> (1 + <span class="id">x</span> + <span class="id">x0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="PFPL.Theorems_Eval.html#cat_seq_2">cat_seq_2</a></span>; <span class="id">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id">destruct</span> <span class="id">IHEvalBig</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> (1 + <span class="id">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="PFPL.Theorems_Eval.html#len_seq_2">len_seq_2</a></span>; <span class="id">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id">destruct</span> <span class="id">IHEvalBig1</span>. <span class="id">destruct</span> <span class="id">IHEvalBig2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> (1 + <span class="id">x0</span> + <span class="id">x1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> (<span class="id"><a href="PFPL.Theorems_Eval.html#let_seq_2">let_seq_2</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">e1</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> (<span class="id"><a href="PFPL.Theorems_Eval.html#eval_big_gives_value">eval_big_gives_value</a></span> <span class="id">e1</span>); <span class="id">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> (<span class="id"><a href="PFPL.Theorems_Eval.html#eval_big_gives_value">eval_big_gives_value</a></span> (<span class="id"><a href="PFPL.Definitions.html#subst">subst</a></span> <span class="id">e1</span>' <span class="id">x</span> <span class="id">e2</span>)); <span class="id">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>: <span class="id">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id">apply</span> (<span class="id"><a href="PFPL.Theorems_Eval.html#eval_big_gives_value">eval_big_gives_value</a></span> <span class="id">e</span>); <span class="id">assumption</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Equivalence of the small-step and big-step semantics </div>
<span class="kwd">Theorem</span> <span class="id"><a name="eval_big_equiv_eval_star">eval_big_equiv_eval_star</a></span> : <span class="kwd">forall</span> <span class="id">e</span> <span class="id">e</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="PFPL.Definitions.html#EvalBig">EvalBig</a></span> <span class="id">e</span> <span class="id">e</span>' &lt;-&gt; <span class="id"><a href="PFPL.Definitions.html#EvalStar">EvalStar</a></span> <span class="id">e</span> <span class="id">e</span>' /\ <span class="id"><a href="PFPL.Definitions.html#Val">Val</a></span> <span class="id">e</span>'.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof32')">Proof.</span></div>
<div class="proofscript" id="proof32">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="PFPL.Theorems_Eval.html#eval_big_equiv_eval_star_2">eval_big_equiv_eval_star_2</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="PFPL.Theorems_Eval.html#eval_big_equiv_eval_star_1">eval_big_equiv_eval_star_1</a></span>.<br/>
Qed.</div>
<br/>
<div class="doc">Correcteness of the big-step implementation (part 1) </div>
<span class="kwd">Lemma</span> <span class="id"><a name="eval_big_correct_1">eval_big_correct_1</a></span> : <span class="kwd">forall</span> <span class="id">e</span> <span class="id">e</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="PFPL.Definitions.html#EvalBig">EvalBig</a></span> <span class="id">e</span> <span class="id">e</span>' -&gt; <span class="id"><a href="PFPL.Theorems_Eval.html#eval_big">eval_big</a></span> <span class="id">e</span> = <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">e</span>'.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof33')">Proof.</span></div>
<div class="proofscript" id="proof33">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">apply</span> <span class="id"><a href="PFPL.Theorems_Eval.html#eval_big_equiv_eval_star">eval_big_equiv_eval_star</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="id">destruct</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="PFPL.Theorems_Eval.html#EvalStarToEvalN">EvalStarToEvalN</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="id">destruct</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">generalize</span> <span class="id">dependent</span> <span class="id">e</span>'. <span class="id">generalize</span> <span class="id">dependent</span> <span class="id">e</span>.<br/>
&nbsp;&nbsp;<span class="id">induction</span> <span class="id">x</span>; <span class="id">intros</span>.<br/>
&nbsp;&nbsp;- <span class="id">inversion</span> <span class="id">H</span>; <span class="id">subst</span>. <span class="id">inversion</span> <span class="id">H0</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="PFPL.Theorems_Eval.html#eval_big_equation">eval_big_equation</a></span>; <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="PFPL.Theorems_Eval.html#eval_big_equation">eval_big_equation</a></span>; <span class="id">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id">inversion</span> <span class="id">H</span>; <span class="id">subst</span>. <span class="id">assert</span> (<span class="id">H2</span>' := <span class="id">H2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="PFPL.Theorems_Eval.html#eval_correct">eval_correct</a></span> <span class="kwd">in</span> <span class="id">H2</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="PFPL.Theorems_Eval.html#eval_big_equation">eval_big_equation</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">H2</span>'. <span class="id">clear</span> <span class="id">H2</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">IHx</span> <span class="kwd">in</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">e</span>; <span class="id">inversion</span> <span class="id">H2</span>; <span class="id">subst</span>; <span class="id">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assumption</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Correcteness of the big-step implementation (auxiliary of part 2) </div>
<span class="kwd">Lemma</span> <span class="id"><a name="eval_big_correct_2_aux">eval_big_correct_2_aux</a></span> : <span class="kwd">forall</span> <span class="id">e</span> <span class="id">e</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="PFPL.Theorems_Eval.html#eval_big">eval_big</a></span> <span class="id">e</span> = <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">e</span>' -&gt; <span class="kwd">exists</span> <span class="id">n</span>, <span class="id"><a href="PFPL.Definitions.html#EvalN">EvalN</a></span> <span class="id">e</span> <span class="id">e</span>' <span class="id">n</span> /\ <span class="id"><a href="PFPL.Definitions.html#Val">Val</a></span> <span class="id">e</span>'.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof34')">Proof.</span></div>
<div class="proofscript" id="proof34">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">e</span> <span class="id">e</span>'.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="PFPL.Theorems_Eval.html#eval_big_ind">eval_big_ind</a></span>; <span class="id">intros</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;- <span class="id">inversion</span> <span class="id">H</span>; <span class="id">subst</span>. <span class="kwd">exists</span> 0. <span class="id">split</span>; <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="id">inversion</span> <span class="id">H</span>; <span class="id">subst</span>. <span class="kwd">exists</span> 0. <span class="id">split</span>; <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="id">apply</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="id">destruct</span> <span class="id">H0</span>. <span class="id">destruct</span> <span class="id">H0</span>. <span class="kwd">exists</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">split</span>. <span class="id">apply</span> (<span class="id"><a href="PFPL.Definitions.html#evalN">evalN</a></span> <span class="id">_</span> <span class="id">e</span>'0). <span class="id">apply</span> <span class="id"><a href="PFPL.Theorems_Eval.html#eval_correct">eval_correct</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all</span>: <span class="id">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id">discriminate</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Correcteness of the big-step implementation (part 2) </div>
<span class="kwd">Lemma</span> <span class="id"><a name="eval_big_correct_2">eval_big_correct_2</a></span> : <span class="kwd">forall</span> <span class="id">e</span> <span class="id">e</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="PFPL.Theorems_Eval.html#eval_big">eval_big</a></span> <span class="id">e</span> = <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">e</span>' -&gt; <span class="id"><a href="PFPL.Definitions.html#EvalBig">EvalBig</a></span> <span class="id">e</span> <span class="id">e</span>'.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof35')">Proof.</span></div>
<div class="proofscript" id="proof35">
&nbsp;&nbsp;<span class="id">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">assert</span> (<span class="id">T</span> := <span class="id"><a href="PFPL.Theorems_Eval.html#eval_big_correct_2_aux">eval_big_correct_2_aux</a></span> <span class="id">e</span> <span class="id">e</span>' <span class="id">H</span>).<br/>
&nbsp;&nbsp;<span class="id">destruct</span> <span class="id">T</span>. <span class="id">destruct</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="PFPL.Theorems_Eval.html#eval_big_equiv_eval_star">eval_big_equiv_eval_star</a></span>. <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="PFPL.Theorems_Eval.html#EvalNToEvalStar">EvalNToEvalStar</a></span>. <span class="kwd">exists</span> <span class="id">x</span>.<br/>
&nbsp;&nbsp;<span class="id">all</span>: <span class="id">assumption</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Correcteness of the big-step implementation </div>
<span class="kwd">Theorem</span> <span class="id"><a name="eval_big_correct">eval_big_correct</a></span> : <span class="kwd">forall</span> <span class="id">e</span> <span class="id">e</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="PFPL.Definitions.html#EvalBig">EvalBig</a></span> <span class="id">e</span> <span class="id">e</span>' &lt;-&gt; <span class="id"><a href="PFPL.Theorems_Eval.html#eval_big">eval_big</a></span> <span class="id">e</span> = <span class="id"><a href="https://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">e</span>'.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof36')">Proof.</span></div>
<div class="proofscript" id="proof36">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="PFPL.Theorems_Eval.html#eval_big_correct_1">eval_big_correct_1</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="PFPL.Theorems_Eval.html#eval_big_correct_2">eval_big_correct_2</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="alpha_variants_same_eval_aux">alpha_variants_same_eval_aux</a></span> : <span class="kwd">forall</span> <span class="id">e</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="PFPL.Definitions.html#EvalBig">EvalBig</a></span> <span class="id">e</span> <span class="id">v</span> -&gt; (<span class="kwd">forall</span> <span class="id">e</span>', <span class="id"><a href="PFPL.Definitions.html#alpha_equiv_rel">alpha_equiv_rel</a></span> <span class="id">e</span> <span class="id">e</span>' -&gt; <span class="id"><a href="PFPL.Definitions.html#EvalBig">EvalBig</a></span> <span class="id">e</span>' <span class="id">v</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof37')">Proof.</span></div>
<div class="proofscript" id="proof37">
&nbsp;&nbsp;<span class="id">intros</span> <span class="id">e</span> <span class="id">v</span> <span class="id">E</span>. <span class="id">induction</span> <span class="id">E</span>; <span class="id">intros</span> <span class="id">e</span>' <span class="id">A</span>; <span class="id">inversion</span> <span class="id">A</span>; <span class="id">subst</span>.<br/>
&nbsp;&nbsp;- <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="id">apply</span> <span class="id"><a href="https://coq.inria.fr/library/Coq.Strings.String.html#eqb_eq">eqb_eq</a></span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="id">subst</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="id">constructor</span>. <span class="id">apply</span> <span class="id">IHE1</span>. <span class="id">auto</span>. <span class="id">apply</span> <span class="id">IHE2</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id">constructor</span>. <span class="id">apply</span> <span class="id">IHE1</span>. <span class="id">auto</span>. <span class="id">apply</span> <span class="id">IHE2</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id">constructor</span>. <span class="id">apply</span> <span class="id">IHE1</span>. <span class="id">auto</span>. <span class="id">apply</span> <span class="id">IHE2</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id">constructor</span>. <span class="id">apply</span> <span class="id">IHE</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id">apply</span> (<span class="id"><a href="PFPL.Definitions.html#evalBigLet">evalBigLet</a></span> <span class="id">e1</span>'0 <span class="id">e2</span>'0 <span class="id">x</span>' <span class="id">e1</span>' <span class="id">e2</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">IHE1</span>. <span class="id">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">IHE2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">remember</span> (<span class="id"><a href="https://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.max">max</a></span> (<span class="id"><a href="PFPL.Definitions.html#get_fresh_var">get_fresh_var</a></span> <span class="id">e2</span>) (<span class="id"><a href="PFPL.Definitions.html#get_fresh_var">get_fresh_var</a></span> <span class="id">e2</span>'0)) <span class="kwd">as</span> <span class="id">z</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> (<span class="id"><a href="PFPL.Theorems_AlphaEquiv.html#rename_vs_subst_2">rename_vs_subst_2</a></span> <span class="id">e1</span>' <span class="id">x</span> <span class="id">e2</span> <span class="id">x</span>' <span class="id">e2</span>'0 <span class="id">z</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="PFPL.Lemmas_Vars.html#fresh_var_not_in_all_vars">fresh_var_not_in_all_vars</a></span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="PFPL.Lemmas_Vars.html#fresh_var_not_in_all_vars">fresh_var_not_in_all_vars</a></span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="PFPL.Lemmas_Vars.html#fresh_var_not_in_all_vars">fresh_var_not_in_all_vars</a></span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="PFPL.Lemmas_Vars.html#fresh_var_not_in_all_vars">fresh_var_not_in_all_vars</a></span>. <span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Alpha-variants evaluate in the same way </div>
<span class="kwd">Theorem</span> <span class="id"><a name="alpha_variants_same_eval">alpha_variants_same_eval</a></span> : <span class="kwd">forall</span> <span class="id">e</span> <span class="id">e</span>' <span class="id">v</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="PFPL.Definitions.html#alpha_equiv_rel">alpha_equiv_rel</a></span> <span class="id">e</span> <span class="id">e</span>' -&gt; (<span class="id"><a href="PFPL.Definitions.html#EvalBig">EvalBig</a></span> <span class="id">e</span> <span class="id">v</span> &lt;-&gt; <span class="id"><a href="PFPL.Definitions.html#EvalBig">EvalBig</a></span> <span class="id">e</span>' <span class="id">v</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof38')">Proof.</span></div>
<div class="proofscript" id="proof38">
&nbsp;&nbsp;<span class="id">intros</span>. <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">intro</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> (<span class="id"><a href="PFPL.Theorems_Eval.html#alpha_variants_same_eval_aux">alpha_variants_same_eval_aux</a></span> <span class="id">e</span> <span class="id">v</span> <span class="id">H0</span> <span class="id">e</span>' <span class="id">H</span>).<br/>
&nbsp;&nbsp;<span class="id">intro</span>. <span class="id">symmetry</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> (<span class="id"><a href="PFPL.Theorems_Eval.html#alpha_variants_same_eval_aux">alpha_variants_same_eval_aux</a></span> <span class="id">e</span>' <span class="id">v</span> <span class="id">H0</span> <span class="id">e</span> <span class="id">H</span>).<br/>
Qed.</div>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/xavierleroy/coq2html/">coq2html</a></div>
</body>
</html>
